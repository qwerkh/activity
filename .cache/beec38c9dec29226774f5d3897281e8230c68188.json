{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/snr/Desktop/Project/activity/imports/vue/ui/schBusRegister.vue","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","dynamicImport",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"/home/snr/Desktop/Project/activity/imports/vue/ui/schBusRegister.vue","filename":"/home/snr/Desktop/Project/activity/imports/vue/ui/schBusRegister.vue","passPerPreset":false,"envName":"development","cwd":"/home/snr/Desktop/Project/activity","root":"/home/snr/Desktop/Project/activity","plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/snr/Desktop/Project/activity/imports/vue/ui/schBusRegister.vue","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"/home/snr/Desktop/Project/activity/imports/vue/ui/schBusRegister.vue"}},"code":"var compoLang;\nmodule.link(\"../../../both/i18n/lang/elem-label-sch\", {\n  \"default\": function (v) {\n    compoLang = v;\n  }\n}, 0);\nvar formatCurrency;\nmodule.link(\"../../../imports/api/methods/roundCurrency\", {\n  formatCurrency: function (v) {\n    formatCurrency = v;\n  }\n}, 1);\nvar WB_waterBillingSetup;\nmodule.link(\"../../collection/waterBillingSetup\", {\n  WB_waterBillingSetup: function (v) {\n    WB_waterBillingSetup = v;\n  }\n}, 2);\nvar getCurrencySymbolById;\nmodule.link(\"../../../imports/api/methods/roundCurrency\", {\n  getCurrencySymbolById: function (v) {\n    getCurrencySymbolById = v;\n  }\n}, 3);\nvar Sch_BusRegisterReact;\nmodule.link(\"../../collection/schBusRegister\", {\n  Sch_BusRegisterReact: function (v) {\n    Sch_BusRegisterReact = v;\n  }\n}, 4);\nmodule.exportDefault({\n  meteor: {\n    langSession: function () {\n      return Session.get('lang') || \"en\";\n    },\n    disabledRemove: function () {\n      return Session.get(\"canRemove\");\n    },\n    disabledUpdate: function () {\n      return Session.get(\"canUpdate\");\n    },\n    newRe: function () {\n      var vm = this;\n      Sch_BusRegisterReact.find({}).fetch();\n      vm.queryData(vm.searchData, vm.skip, vm.currentSize + vm.skip);\n    }\n  },\n  mounted: function () {\n    this.$jQuery('body').off();\n  },\n  data: function () {\n    return {\n      newLoading: true,\n      ref: \"\",\n      fullscreen: true,\n      disableUpdateField: false,\n      schBusRegisterData: [],\n      loading: false,\n      searchData: '',\n      isSearching: false,\n      currentPage: 1,\n      currentSize: 10,\n      count: 0,\n      dialogAddSchBusRegister: false,\n      dialogUpdateSchBusRegister: false,\n      studentList: [],\n      promotionList: [],\n      busList: [],\n      busStopList: [],\n      statusOption: [{\n        label: \"Active\",\n        value: \"Active\"\n      }, {\n        label: \"Close\",\n        value: \"Close\"\n      }],\n      discountTypeList: [{\n        label: \"Amount\",\n        value: \"Amount\"\n      }, {\n        label: \"Percent (%)\",\n        value: \"Percent\"\n      }],\n      schBusRegisterForm: {\n        studentId: \"\",\n        busId: \"\",\n        busStopId: \"\",\n        busStopType: \"\",\n        discount: 0,\n        discountType: \"Amount\",\n        busRegisterDate: moment().toDate(),\n        startDate: moment().toDate(),\n        price: 0,\n        status: \"Active\",\n        _id: \"\"\n      },\n      busStopTypeList: [{\n        label: \"One Way\",\n        value: \"One Way\"\n      }, {\n        label: \"Round\",\n        value: \"Round\"\n      }, {\n        label: \"Three Turn\",\n        value: \"Three Turn\"\n      }, {\n        label: \"Four Turn\",\n        value: \"Four Turn\"\n      }],\n      rules: {\n        busRegisterDate: [{\n          type: 'date',\n          required: true,\n          message: 'Please input BusRegister Date',\n          trigger: 'blur'\n        }],\n        studentId: [{\n          required: true,\n          type: \"string\",\n          message: 'Please choose Student',\n          trigger: 'change'\n        }],\n        busId: [{\n          required: true,\n          type: \"string\",\n          message: 'Please choose Bus',\n          trigger: 'change'\n        }],\n        busStopId: [{\n          required: true,\n          type: \"string\",\n          message: 'Please choose Bus Stop',\n          trigger: 'change'\n        }]\n      },\n      companyDoc: {},\n      sym: \"\",\n      skip: 0\n    };\n  },\n  watch: {\n    currentSize: function (val) {\n      this.isSearching = true;\n      this.skip = (this.currentPage - 1) * val;\n      this.queryData(this.searchData, this.skip, val + this.skip);\n    },\n    currentPage: function (val) {\n      this.isSearching = true;\n      this.skip = (val - 1) * this.currentSize;\n      this.queryData(this.searchData, this.skip, this.currentSize + this.skip);\n    },\n    searchData: function (val) {\n      this.isSearching = true;\n      this.skip = (this.currentPage - 1) * this.currentSize;\n      this.queryData(val, this.skip, this.currentSize + this.skip);\n    },\n    \"schBusRegisterForm.busStopId\": function (val) {\n      this.getPriceByBusStopAndType(val, this.schBusRegisterForm.busStopType);\n    },\n    \"schBusRegisterForm.busStopType\": function (val) {\n      this.getPriceByBusStopAndType(this.schBusRegisterForm.busStopId, val);\n    },\n    \"schBusRegisterForm.discount\": function (val) {\n      this.schBusRegisterForm.discount = val;\n      this.getPriceByBusStopAndType(this.schBusRegisterForm.busStopId, this.schBusRegisterForm.busStopType);\n    },\n    \"schBusRegisterForm.discountType\": function (val) {\n      if (val === \"Percent\") {\n        this.sym = \"%\";\n      } else {\n        this.sym = getCurrencySymbolById(this.companyDoc.baseCurrency);\n      }\n\n      this.schBusRegisterForm.discountType = val;\n      this.getPriceByBusStopAndType(this.schBusRegisterForm.busStopId, this.schBusRegisterForm.busStopType);\n    }\n  },\n  methods: {\n    handleSizeChange: function (val) {\n      this.currentSize = val;\n    },\n    handleCurrentChange: function (val) {\n      this.currentPage = val;\n    },\n    queryData: _.debounce(function (val, skip, limit) {\n      var _this = this;\n\n      this.newLoading = true;\n      Meteor.call('querySchBusRegister', {\n        q: val,\n        filter: this.filter,\n        rolesArea: Session.get('area'),\n        options: {\n          skip: skip || 0,\n          limit: limit || 10\n        }\n      }, function (err, result) {\n        if (!err) {\n          _this.schBusRegisterData = result.content;\n          _this.count = result.countSchBusRegister;\n        }\n\n        _this.isSearching = false;\n        _this.newLoading = false;\n      });\n    }, 300),\n    indexMethod: function (index) {\n      return index + 1;\n    },\n    fetchUser: function () {\n      var _this2 = this;\n\n      Meteor.call(\"queryUserOption\", function (err, result) {\n        _this2.applyUserOption = result;\n      });\n    },\n    studentOpt: function (query) {\n      var vm = this;\n\n      if (!!query) {\n        //vm.loading = true;\n        setTimeout(function () {\n          //vm.loading = false;\n          Meteor.call('querySchStudentOption', query, function (err, result) {\n            if (!err) {\n              vm.studentList = result;\n            } else {\n              console.log(err.message);\n            }\n          });\n        }, 200);\n      } else {\n        Meteor.call('querySchStudentOption', \"\", function (err, result) {\n          if (!err) {\n            vm.studentList = result;\n          } else {\n            console.log(err.message);\n          }\n        });\n      }\n    },\n    busOpt: function () {\n      var _this3 = this;\n\n      var selector = {};\n      Meteor.call(\"queryBusOption\", selector, function (err, result) {\n        if (result) {\n          _this3.busList = result;\n        }\n      });\n    },\n    busStopOpt: function () {\n      var _this4 = this;\n\n      var selector = {};\n      Meteor.call(\"queryBusStopOption\", selector, function (err, result) {\n        if (result) {\n          _this4.busStopList = result;\n        }\n      });\n    },\n    promotionOpt: function () {\n      var _this5 = this;\n\n      var selector = {};\n      Meteor.call(\"queryPromotionOption\", selector, function (err, result) {\n        _this5.promotionList = result;\n      });\n    },\n    saveSchBusRegister: function (event) {\n      event.preventDefault();\n      var vm = this;\n      this.$refs[\"schBusRegisterFormAdd\"].validate(function (valid) {\n        if (valid) {\n          var schBusRegisterDoc = {\n            studentId: vm.schBusRegisterForm.studentId,\n            busId: vm.schBusRegisterForm.busId,\n            busStopId: vm.schBusRegisterForm.busStopId,\n            busStopType: vm.schBusRegisterForm.busStopType,\n            price: vm.schBusRegisterForm.price,\n            discount: vm.schBusRegisterForm.discount || 0,\n            discountType: vm.schBusRegisterForm.discountType,\n            busRegisterDate: vm.schBusRegisterForm.busRegisterDate,\n            startDate: vm.schBusRegisterForm.startDate,\n            dueDate: vm.schBusRegisterForm.startDate,\n            busRegisterDateName: moment(vm.schBusRegisterForm.busRegisterDate).format(\"DD/MM/YYYY\"),\n            rolesArea: Session.get('area')\n          };\n          Meteor.call(\"insertSchBusRegister\", schBusRegisterDoc, function (err, result) {\n            if (!err) {\n              vm.$message({\n                duration: 1000,\n                message: \"Save Successfully!\",\n                type: 'success'\n              });\n              vm.dialogAddSchBusRegister = false;\n              vm.$refs[\"schBusRegisterFormAdd\"].resetFields();\n            } else {\n              vm.$message({\n                duration: 1000,\n                message: err.message,\n                type: 'error'\n              });\n            }\n          });\n        }\n      });\n    },\n    updateSchBusRegister: function () {\n      var vm = this;\n      this.$refs[\"schBusRegisterFormUpdate\"].validate(function (valid) {\n        if (valid) {\n          var schBusRegisterDoc = {\n            _id: vm.schBusRegisterForm._id,\n            studentId: vm.schBusRegisterForm.studentId,\n            busId: vm.schBusRegisterForm.busId,\n            busStopId: vm.schBusRegisterForm.busStopId,\n            busStopType: vm.schBusRegisterForm.busStopType,\n            price: vm.schBusRegisterForm.price,\n            discountType: vm.schBusRegisterForm.discountType,\n            discount: vm.schBusRegisterForm.discount || 0,\n            busRegisterDate: vm.schBusRegisterForm.busRegisterDate,\n            startDate: vm.schBusRegisterForm.startDate,\n            dueDate: vm.schBusRegisterForm.startDate,\n            status: vm.schBusRegisterForm.status,\n            busRegisterDateName: moment(vm.schBusRegisterForm.busRegisterDate).format(\"DD/MM/YYYY\"),\n            rolesArea: Session.get('area')\n          };\n          Meteor.call(\"updateSchBusRegister\", schBusRegisterDoc, function (err, result) {\n            if (!err) {\n              vm.$message({\n                duration: 1000,\n                message: \"\\n                    Update\\n                    Successfully\\n                    !\",\n                type: 'success'\n              });\n              vm.dialogUpdateSchBusRegister = false;\n              vm.dialogUpdateSchBusRegisterToClass = false;\n              vm.$refs[\"schBusRegisterFormUpdate\"].resetFields();\n            } else {\n              vm.$message({\n                duration: 1000,\n                message: \"\\n                    Update\\n                    Failed\\n                    !\",\n                type: 'error'\n              });\n            }\n          });\n        }\n      });\n    },\n    removeSchBusRegister: function (index, row, rows) {\n      var _this6 = this;\n\n      var vm = this;\n      this.$confirm('This will permanently delete the Item. Continue?', 'Warning', {\n        confirmButtonText: 'OK',\n        cancelButtonText: 'Cancel',\n        type: 'warning'\n      }).then(function () {\n        Meteor.call(\"removeSchBusRegister\", row._id, function (err, result) {\n          if (!err) {\n            rows.splice(index, 1);\n            vm.$message({\n              message: \"\\n                    \\u179B\\u17BB\\u1794 \\u1794\\u17B6\\u1793\\u1787\\u17C4\\u1782\\u1787\\u17D0\\u1799\",\n              type: 'success'\n            });\n          } else {\n            vm.$message({\n              type: 'error',\n              message: 'Delete Fialed'\n            });\n          }\n        });\n      }).catch(function () {\n        _this6.$message({\n          type: 'info',\n          message: 'Delete canceled'\n        });\n      });\n    },\n    findSchBusRegisterById: function (doc) {\n      var vm = this;\n      vm.schBusRegisterForm = {};\n      Meteor.call(\"querySchBusRegisterById\", doc.row._id, function (err, result) {\n        if (result) {\n          vm.schBusRegisterForm._id = result._id;\n          vm.schBusRegisterForm = result;\n        }\n      });\n    },\n    cancel: function () {\n      this.$message({\n        type: 'info',\n        message: 'Canceled'\n      });\n    },\n    resetForm: function () {\n      this.schBusRegisterForm._id = \"\";\n\n      if (this.$refs[\"schBusRegisterFormAdd\"]) {\n        this.$refs[\"schBusRegisterFormAdd\"].resetFields();\n      }\n\n      if (this.$refs[\"schBusRegisterFormUpdate\"]) {\n        this.$refs[\"schBusRegisterFormUpdate\"].resetFields();\n      }\n    },\n    popupSchBusRegisterAdd: function () {\n      this.ref = \"schBusRegisterFormAdd\";\n      this.resetForm();\n      this.studentOpt();\n      this.promotionOpt();\n    },\n    popupSchBusRegisterUpdate: function (row) {\n      this.ref = \"schBusRegisterFormUpdate\";\n      this.resetForm();\n      this.studentOpt(row.studentDoc._id);\n      this.promotionOpt();\n    },\n    getPriceByBusStopAndType: function (busStopId, type) {\n      var vm = this;\n\n      if (busStopId && type && busStopId !== \"\" && type !== \"\") {\n        Meteor.call(\"getPriceByBusStopAndType\", busStopId, type, function (err, result) {\n          if (result) {\n            if (vm.schBusRegisterForm.discountType === \"Amount\") {\n              vm.schBusRegisterForm.price = result.priceRange.price - (vm.schBusRegisterForm.discount || 0);\n            } else if (vm.schBusRegisterForm.discountType === \"Percent\") {\n              vm.schBusRegisterForm.price = vm.$_numeral(formatCurrency(result.priceRange.price - (vm.schBusRegisterForm.discount || 0) * result.priceRange.price / 100)).value();\n            } else {\n              vm.schBusRegisterForm.price = result.priceRange.price;\n            }\n          }\n        });\n      }\n    }\n  },\n  created: function () {\n    this.isSearching = true;\n    this.fetchUser();\n    this.queryData();\n    this.busOpt();\n    this.busStopOpt();\n    this.companyDoc = WB_waterBillingSetup.findOne({});\n    this.sym = getCurrencySymbolById(this.companyDoc.baseCurrency);\n    Meteor.subscribe('Sch_BusRegisterReact');\n  },\n  computed: {\n    langConfig: function () {\n      var _this7 = this;\n\n      var data = compoLang.filter(function (config) {\n        return config.lang === _this7.langSession;\n      })[0]['busRegister'];\n      return data;\n    }\n  }\n});","map":{"version":3,"sources":["/home/snr/Desktop/Project/activity/imports/vue/ui/schBusRegister.vue"],"names":["compoLang","module","link","v","formatCurrency","WB_waterBillingSetup","getCurrencySymbolById","Sch_BusRegisterReact","exportDefault","meteor","langSession","Session","get","disabledRemove","disabledUpdate","newRe","vm","find","fetch","queryData","searchData","skip","currentSize","mounted","$jQuery","off","data","newLoading","ref","fullscreen","disableUpdateField","schBusRegisterData","loading","isSearching","currentPage","count","dialogAddSchBusRegister","dialogUpdateSchBusRegister","studentList","promotionList","busList","busStopList","statusOption","label","value","discountTypeList","schBusRegisterForm","studentId","busId","busStopId","busStopType","discount","discountType","busRegisterDate","moment","toDate","startDate","price","status","_id","busStopTypeList","rules","type","required","message","trigger","companyDoc","sym","watch","val","getPriceByBusStopAndType","baseCurrency","methods","handleSizeChange","handleCurrentChange","_","debounce","limit","Meteor","call","q","filter","rolesArea","options","err","result","content","countSchBusRegister","indexMethod","index","fetchUser","applyUserOption","studentOpt","query","setTimeout","console","log","busOpt","selector","busStopOpt","promotionOpt","saveSchBusRegister","event","preventDefault","$refs","validate","valid","schBusRegisterDoc","dueDate","busRegisterDateName","format","$message","duration","resetFields","updateSchBusRegister","dialogUpdateSchBusRegisterToClass","removeSchBusRegister","row","rows","$confirm","confirmButtonText","cancelButtonText","then","splice","catch","findSchBusRegisterById","doc","cancel","resetForm","popupSchBusRegisterAdd","popupSchBusRegisterUpdate","studentDoc","priceRange","$_numeral","created","findOne","subscribe","computed","langConfig","config","lang"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport compoLang from '../../../both/i18n/lang/elem-label-sch'\nimport {formatCurrency} from \"../../../imports/api/methods/roundCurrency\";\nimport {WB_waterBillingSetup} from \"../../collection/waterBillingSetup\";\nimport {getCurrencySymbolById} from \"../../../imports/api/methods/roundCurrency\";\nimport {Sch_BusRegisterReact} from \"../../collection/schBusRegister\";\n\nexport default {\n    meteor: {\n        langSession() {\n            return Session.get('lang') || \"en\";\n        },\n        disabledRemove() {\n            return Session.get(\"canRemove\");\n        },\n        disabledUpdate() {\n            return Session.get(\"canUpdate\");\n        },\n        newRe() {\n            let vm = this;\n            Sch_BusRegisterReact.find({}).fetch();\n            vm.queryData(vm.searchData, vm.skip, vm.currentSize + vm.skip);\n        }\n    },\n    mounted() {\n        this.$jQuery('body').off();\n\n    },\n    data() {\n        return {\n            newLoading: true,\n            ref: \"\",\n            fullscreen: true,\n            disableUpdateField: false,\n            schBusRegisterData: [],\n            loading: false,\n            searchData: '',\n            isSearching: false,\n            currentPage: 1,\n            currentSize: 10,\n            count: 0,\n            dialogAddSchBusRegister: false,\n            dialogUpdateSchBusRegister: false,\n            studentList: [],\n            promotionList: [],\n            busList: [],\n            busStopList: [],\n            statusOption: [\n                {label: \"Active\", value: \"Active\"},\n                {label: \"Close\", value: \"Close\"}\n            ],\n            discountTypeList: [\n                {label: \"Amount\", value: \"Amount\"},\n                {label: \"Percent (%)\", value: \"Percent\"},\n            ],\n            schBusRegisterForm: {\n                studentId: \"\",\n                busId: \"\",\n                busStopId: \"\",\n                busStopType: \"\",\n                discount: 0,\n                discountType: \"Amount\",\n                busRegisterDate: moment().toDate(),\n                startDate: moment().toDate(),\n                price: 0,\n                status: \"Active\",\n                _id: \"\",\n\n            },\n            busStopTypeList: [\n                {label: \"One Way\", value: \"One Way\"},\n                {label: \"Round\", value: \"Round\"},\n                {label: \"Three Turn\", value: \"Three Turn\"},\n                {label: \"Four Turn\", value: \"Four Turn\"}\n            ],\n            rules: {\n                busRegisterDate: [{\n                    type: 'date',\n                    required: true,\n                    message: 'Please input BusRegister Date',\n                    trigger: 'blur'\n                }],\n                studentId:\n                    [{\n                        required: true,\n                        type: \"string\",\n                        message: 'Please choose Student',\n                        trigger: 'change'\n                    }],\n                busId:\n                    [{\n                        required: true,\n                        type: \"string\",\n                        message: 'Please choose Bus',\n                        trigger: 'change'\n                    }],\n                busStopId:\n                    [{\n                        required: true,\n                        type: \"string\",\n                        message: 'Please choose Bus Stop',\n                        trigger: 'change'\n                    }]\n            },\n            companyDoc: {},\n            sym: \"\",\n            skip: 0\n        }\n    },\n    watch: {\n        currentSize(val) {\n            this.isSearching = true;\n            this.skip = (this.currentPage - 1) * val;\n            this.queryData(this.searchData, this.skip, val + this.skip);\n        },\n        currentPage(val) {\n            this.isSearching = true;\n            this.skip = (val - 1) * this.currentSize;\n            this.queryData(this.searchData, this.skip, this.currentSize + this.skip);\n        },\n        searchData(val) {\n            this.isSearching = true;\n            this.skip = (this.currentPage - 1) * this.currentSize;\n            this.queryData(val, this.skip, this.currentSize + this.skip);\n        },\n        \"schBusRegisterForm.busStopId\"(val) {\n            this.getPriceByBusStopAndType(val, this.schBusRegisterForm.busStopType);\n        },\n        \"schBusRegisterForm.busStopType\"(val) {\n            this.getPriceByBusStopAndType(this.schBusRegisterForm.busStopId, val);\n        },\n        \"schBusRegisterForm.discount\"(val) {\n            this.schBusRegisterForm.discount = val;\n            this.getPriceByBusStopAndType(this.schBusRegisterForm.busStopId, this.schBusRegisterForm.busStopType);\n        },\n        \"schBusRegisterForm.discountType\"(val) {\n            if (val === \"Percent\") {\n                this.sym = \"%\";\n            } else {\n                this.sym = getCurrencySymbolById(this.companyDoc.baseCurrency);\n            }\n            this.schBusRegisterForm.discountType = val;\n            this.getPriceByBusStopAndType(this.schBusRegisterForm.busStopId, this.schBusRegisterForm.busStopType);\n        }\n\n    },\n    methods: {\n        handleSizeChange(val) {\n            this.currentSize = val;\n        },\n        handleCurrentChange(val) {\n            this.currentPage = val;\n        },\n        queryData: _.debounce(function (val, skip, limit) {\n            this.newLoading = true;\n            Meteor.call('querySchBusRegister', {\n                q: val,\n                filter: this.filter,\n                rolesArea:Session.get('area'),\n                options: {skip: skip || 0, limit: limit || 10}\n            }, (err, result) => {\n                if (!err) {\n                    this.schBusRegisterData = result.content;\n                    this.count = result.countSchBusRegister;\n                }\n                this.isSearching = false;\n                this.newLoading = false;\n            });\n        }, 300),\n        indexMethod(index) {\n            return index + 1;\n        },\n        fetchUser() {\n            Meteor.call(\"queryUserOption\", (err, result) => {\n                this.applyUserOption = result;\n            })\n        },\n        studentOpt(query) {\n            let vm = this;\n            if (!!query) {\n                //vm.loading = true;\n                setTimeout(() => {\n                    //vm.loading = false;\n                    Meteor.call('querySchStudentOption', query, (err, result) => {\n                        if (!err) {\n                            vm.studentList = result;\n                        } else {\n                            console.log(err.message);\n                        }\n                    })\n                }, 200);\n            } else {\n                Meteor.call('querySchStudentOption', \"\", (err, result) => {\n                    if (!err) {\n                        vm.studentList = result;\n                    } else {\n                        console.log(err.message);\n                    }\n                })\n            }\n        },\n        busOpt() {\n            let selector = {};\n\n            Meteor.call(\"queryBusOption\", selector, (err, result) => {\n                if (result) {\n                    this.busList = result;\n                }\n            })\n        },\n        busStopOpt() {\n            let selector = {};\n            Meteor.call(\"queryBusStopOption\", selector, (err, result) => {\n                if (result) {\n                    this.busStopList = result;\n                }\n            })\n        },\n        promotionOpt() {\n            let selector = {};\n            Meteor.call(\"queryPromotionOption\", selector, (err, result) => {\n                this.promotionList = result;\n            })\n        },\n        saveSchBusRegister(event) {\n            event.preventDefault();\n\n            let vm = this;\n            this.$refs[\"schBusRegisterFormAdd\"].validate((valid) => {\n                if (valid) {\n                    let schBusRegisterDoc = {\n                        studentId: vm.schBusRegisterForm.studentId,\n                        busId: vm.schBusRegisterForm.busId,\n                        busStopId: vm.schBusRegisterForm.busStopId,\n                        busStopType: vm.schBusRegisterForm.busStopType,\n                        price: vm.schBusRegisterForm.price,\n                        discount: vm.schBusRegisterForm.discount || 0,\n                        discountType: vm.schBusRegisterForm.discountType,\n                        busRegisterDate: vm.schBusRegisterForm.busRegisterDate,\n                        startDate: vm.schBusRegisterForm.startDate,\n                        dueDate: vm.schBusRegisterForm.startDate,\n                        busRegisterDateName: moment(vm.schBusRegisterForm.busRegisterDate).format(\"DD/MM/YYYY\"),\n                        rolesArea: Session.get('area')\n                    };\n                    Meteor.call(\"insertSchBusRegister\", schBusRegisterDoc, (err, result) => {\n                        if (!err) {\n                            vm.$message({\n                                duration: 1000,\n                                message: `Save Successfully!`,\n                                type: 'success'\n                            });\n                            vm.dialogAddSchBusRegister = false;\n\n                            vm.$refs[\"schBusRegisterFormAdd\"].resetFields();\n                        } else {\n                            vm.$message({\n                                duration: 1000,\n                                message: err.message,\n                                type: 'error'\n                            });\n                        }\n                    })\n                }\n            })\n\n        },\n        updateSchBusRegister() {\n            let vm = this;\n            this.$refs[\"schBusRegisterFormUpdate\"].validate((valid) => {\n                if (valid) {\n                    let schBusRegisterDoc = {\n                        _id: vm.schBusRegisterForm._id,\n                        studentId: vm.schBusRegisterForm.studentId,\n                        busId: vm.schBusRegisterForm.busId,\n                        busStopId: vm.schBusRegisterForm.busStopId,\n                        busStopType: vm.schBusRegisterForm.busStopType,\n                        price: vm.schBusRegisterForm.price,\n                        discountType: vm.schBusRegisterForm.discountType,\n                        discount: vm.schBusRegisterForm.discount || 0,\n                        busRegisterDate: vm.schBusRegisterForm.busRegisterDate,\n                        startDate: vm.schBusRegisterForm.startDate,\n                        dueDate: vm.schBusRegisterForm.startDate,\n                        status: vm.schBusRegisterForm.status,\n                        busRegisterDateName: moment(vm.schBusRegisterForm.busRegisterDate).format(\"DD/MM/YYYY\"),\n                        rolesArea: Session.get('area')\n                    };\n                    Meteor.call(\"updateSchBusRegister\", schBusRegisterDoc, (err, result) => {\n                        if (!err) {\n                            vm.$message({\n                                duration: 1000,\n                                message: `\n                    Update\n                    Successfully\n                    !`,\n                                type: 'success'\n                            });\n                            vm.dialogUpdateSchBusRegister = false;\n                            vm.dialogUpdateSchBusRegisterToClass = false;\n\n                            vm.$refs[\"schBusRegisterFormUpdate\"].resetFields();\n                        } else {\n                            vm.$message({\n                                duration: 1000,\n                                message: `\n                    Update\n                    Failed\n                    !`,\n                                type: 'error'\n                            });\n                        }\n                    })\n                }\n            })\n\n        },\n        removeSchBusRegister(index, row, rows) {\n            let vm = this;\n            this.$confirm('This will permanently delete the Item. Continue?', 'Warning', {\n                confirmButtonText: 'OK',\n                cancelButtonText: 'Cancel',\n                type: 'warning'\n            }).then(() => {\n                Meteor.call(\"removeSchBusRegister\", row._id, (err, result) => {\n                    if (!err) {\n                        rows.splice(index, 1);\n\n                        vm.$message({\n                            message: `\n                    លុប បានជោគជ័យ`,\n                            type: 'success'\n                        });\n\n\n                    } else {\n                        vm.$message({\n                            type: 'error',\n                            message: 'Delete Fialed'\n                        });\n                    }\n\n                })\n\n            }).catch(() => {\n                this.$message({\n                    type: 'info',\n                    message: 'Delete canceled'\n                });\n            });\n\n\n        },\n        findSchBusRegisterById(doc) {\n            let vm = this;\n            vm.schBusRegisterForm = {};\n            Meteor.call(\"querySchBusRegisterById\", doc.row._id, (err, result) => {\n                if (result) {\n                    vm.schBusRegisterForm._id = result._id;\n                    vm.schBusRegisterForm = result;\n                }\n            })\n        },\n        cancel() {\n            this.$message({\n                type: 'info',\n                message: 'Canceled'\n            });\n        },\n        resetForm() {\n            this.schBusRegisterForm._id = \"\";\n            if (this.$refs[\"schBusRegisterFormAdd\"]) {\n                this.$refs[\"schBusRegisterFormAdd\"].resetFields();\n            }\n\n            if (this.$refs[\"schBusRegisterFormUpdate\"]) {\n                this.$refs[\"schBusRegisterFormUpdate\"].resetFields();\n            }\n\n\n        },\n        popupSchBusRegisterAdd() {\n            this.ref = \"schBusRegisterFormAdd\";\n\n            this.resetForm();\n            this.studentOpt();\n            this.promotionOpt();\n\n        },\n        popupSchBusRegisterUpdate(row) {\n            this.ref = \"schBusRegisterFormUpdate\";\n            this.resetForm();\n            this.studentOpt(row.studentDoc._id);\n            this.promotionOpt();\n\n        },\n        getPriceByBusStopAndType(busStopId, type) {\n            let vm = this;\n            if (busStopId && type && busStopId !== \"\" && type !== \"\") {\n                Meteor.call(\"getPriceByBusStopAndType\", busStopId, type, (err, result) => {\n                    if (result) {\n                        if (vm.schBusRegisterForm.discountType === \"Amount\") {\n                            vm.schBusRegisterForm.price = result.priceRange.price - (vm.schBusRegisterForm.discount || 0);\n                        } else if (vm.schBusRegisterForm.discountType === \"Percent\") {\n                            vm.schBusRegisterForm.price = vm.$_numeral(formatCurrency(result.priceRange.price - ((vm.schBusRegisterForm.discount || 0) * result.priceRange.price / 100))).value();\n                        } else {\n                            vm.schBusRegisterForm.price = result.priceRange.price;\n                        }\n                    }\n                })\n            }\n        }\n    },\n    created() {\n        this.isSearching = true;\n        this.fetchUser();\n        this.queryData();\n        this.busOpt();\n        this.busStopOpt();\n        this.companyDoc = WB_waterBillingSetup.findOne({});\n        this.sym = getCurrencySymbolById(this.companyDoc.baseCurrency);\n        Meteor.subscribe('Sch_BusRegisterReact');\n\n\n    },\n    computed: {\n        langConfig() {\n            let data = compoLang.filter(config => config.lang === this.langSession)[0]['busRegister'];\n            return data;\n        }\n    }\n}\n"]},"sourceType":"script","hash":"beec38c9dec29226774f5d3897281e8230c68188"}
