{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/snr/Desktop/Project/activity/imports/vue/ui/posSaleCoffee.vue","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","dynamicImport",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"/home/snr/Desktop/Project/activity/imports/vue/ui/posSaleCoffee.vue","filename":"/home/snr/Desktop/Project/activity/imports/vue/ui/posSaleCoffee.vue","passPerPreset":false,"envName":"development","cwd":"/home/snr/Desktop/Project/activity","root":"/home/snr/Desktop/Project/activity","plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/snr/Desktop/Project/activity/imports/vue/ui/posSaleCoffee.vue","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"/home/snr/Desktop/Project/activity/imports/vue/ui/posSaleCoffee.vue"}},"code":"var draggable;\nmodule.link(\"vuedraggable\", {\n  \"default\": function (v) {\n    draggable = v;\n  }\n}, 0);\nvar formatCurrency;\nmodule.link(\"../../../imports/api/methods/roundCurrency\", {\n  formatCurrency: function (v) {\n    formatCurrency = v;\n  }\n}, 1);\nvar formatCurrencyLast;\nmodule.link(\"../../../imports/api/methods/roundCurrency\", {\n  formatCurrencyLast: function (v) {\n    formatCurrencyLast = v;\n  }\n}, 2);\nvar GeneralFunction;\nmodule.link(\"../../../imports/api/methods/generalFunction\", {\n  GeneralFunction: function (v) {\n    GeneralFunction = v;\n  }\n}, 3);\nvar getCurrencySymbolById;\nmodule.link(\"../../../imports/api/methods/roundCurrency\", {\n  getCurrencySymbolById: function (v) {\n    getCurrencySymbolById = v;\n  }\n}, 4);\nvar WB_waterBillingSetup;\nmodule.link(\"../../collection/waterBillingSetup\", {\n  WB_waterBillingSetup: function (v) {\n    WB_waterBillingSetup = v;\n  }\n}, 5);\nvar compoLang;\nmodule.link(\"../../../both/i18n/lang/elem-label\", {\n  \"default\": function (v) {\n    compoLang = v;\n  }\n}, 6);\nvar Pos_InvoiceReact;\nmodule.link(\"../../collection/posInvoice\", {\n  Pos_InvoiceReact: function (v) {\n    Pos_InvoiceReact = v;\n  }\n}, 7);\nmodule.exportDefault({\n  meteor: {\n    langSession: function () {\n      return Session.get('lang') || \"en\";\n    },\n    disabledRemove: function () {\n      return Session.get(\"canRemove\");\n    },\n    disabledUpdate: function () {\n      return Session.get(\"canUpdate\");\n    }\n  },\n  components: {\n    draggable: draggable\n  },\n  data: function () {\n    return {\n      keyCode: [],\n      refForm: 'posSaleCoffeeFormAdd',\n      multipleSelection: [],\n      posInvoiceId: \"\",\n      loading: false,\n      searchData: '',\n      isSearching: false,\n      typeDiscount: \"\",\n      categoryData: [],\n      productData: [],\n      productDataAll: [],\n      currencySymbol: \"\",\n      posSaleCoffeeData: [],\n      dialogPayMoney: false,\n      posSaleCoffeeForm: {\n        itemId: \"\",\n        itemName: \"\",\n        price: 0,\n        qty: 0,\n        amount: 0,\n        total: 0,\n        netTotal: 0,\n        balanceUnPaid: 0,\n        paid: 0,\n        invoiceDate: moment().toDate(),\n        dueDate: moment().add(1, \"month\").toDate(),\n        invoiceNo: \"\",\n        note: \"\",\n        discountType: \"Amount\",\n        discount: 0,\n        discountValue: 0,\n        termId: \"\",\n        address: \"\",\n        customerId: \"\",\n        isRetail: true,\n        paidUSD: 0,\n        paidKHR: 0,\n        paidTHB: 0,\n        remainUSD: 0,\n        remainKHR: 0,\n        remainTHB: 0,\n        unit1: 1,\n        unit2: 1,\n        totalUnit: 1,\n        desc: \"\",\n        tableId: \"\",\n        rawQty: 0,\n        isReceiveAll: false,\n        balanceNotCut: 0,\n        balanceNotCutFull: 0,\n        code: \"\"\n      },\n      rules: {\n        tableId: [{\n          required: true,\n          type: 'string',\n          message: 'Please choose Table',\n          trigger: 'change'\n        }]\n      },\n      // Options\n      itemOption: [],\n      customerOption: [],\n      termOption: [],\n      dialog: true,\n      notifications: false,\n      sound: true,\n      widgets: false,\n      labelPosition: \"top\",\n      options: {\n        disabledDate: function (time) {\n          return false;\n        }\n      },\n      disabledDate: false,\n      closeDate: \"\",\n      type: \"\",\n      posSaleCoffeeDetail: {},\n      discountTypeOption: [{\n        label: \"amountDiscount\",\n        value: \"Amount\"\n      }, {\n        label: \"percent\",\n        value: \"Percent\"\n      }],\n      tableOption: [],\n      disabledItem: true,\n      timeStamp: [],\n      takeBarcode: '',\n      skip: 0,\n      waterBillingSetup: {},\n      username: Meteor.user().username,\n      todaySt: \"\",\n      timeSt: \"\",\n      isCategoryData: false,\n      qty: 0\n    };\n  },\n  mounted: function () {\n    var _this = this;\n\n    this.$jQuery('body').off();\n    var vm = this;\n    vm.options = {\n      disabledDate: function (time) {\n        var min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n        return time.getTime() < min;\n      }\n    };\n    var elem = this.$jQuery('.pos_SaleCoffee');\n\n    var checkEvent = $._data($('body').get(0), 'events');\n\n    if (checkEvent.keyup.length <= 1) {\n      this.$nextTick(function () {\n        _this.$jQuery('body').on('keydown', elem, _this.inputHandler);\n      });\n    }\n\n    this.$jQuery('body').on('focus', 'input[type=number]', function (e) {\n      $(this).on('wheel', function (e) {\n        e.preventDefault();\n      });\n    });\n    this.time();\n  },\n  watch: {\n    \"posSaleCoffeeForm.invoiceDate\": function (val) {\n      var vm = this;\n\n      if (vm.dialogUpdatePosSaleCoffee === false) {\n        vm.posSaleCoffeeForm.posSaleCoffeeDate = val;\n      }\n\n      if (vm.closeDate && vm.closeDate !== \"\" && vm.closeDate !== undefined) {\n        vm.options = {\n          disabledDate: function (time) {\n            var min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n            return time.getTime() < min;\n          }\n        };\n      } else {\n        vm.options = {\n          disabledDate: function (time) {\n            return false;\n          }\n        };\n      }\n\n      if (this.$refs[\"posSaleCoffeeFormAdd\"]) {\n        this.getVoucherByRoleAndDate(val);\n      }\n    },\n    dialogUpdatePosSaleCoffee: function (val) {\n      if (val) {\n        this._inputMaskPosSaleCoffee();\n      }\n    },\n    \"posSaleCoffeeForm.discount\": function (val) {\n      if (val || val === 0) {\n        this.posSaleCoffeeForm.discount = val; // this.posSaleCoffeeForm.discount = this.$_numeral(val).format(\"0,00\");\n\n        this.getTotal();\n      }\n    },\n    \"posSaleCoffeeForm.discountType\": function (val) {\n      if (val) {\n        this.posSaleCoffeeForm.discountType = val;\n        this.getTotal();\n      }\n    },\n    \"posSaleCoffeeForm.tableId\": function (val) {\n      this.findInvoiceActiveByTableId(val);\n    }\n  },\n  methods: {\n    clickTHB: function (val) {\n      this.posSaleCoffeeForm.paidTHB = this.$_numeral(val).value();\n      this.getTotal();\n    },\n    clickUSD: function (val) {\n      this.posSaleCoffeeForm.paidUSD = this.$_numeral(val).value();\n      this.getTotal();\n    },\n    clickKHR: function (val) {\n      this.posSaleCoffeeForm.paidKHR = this.$_numeral(val).value();\n      this.getTotal();\n    },\n    goToInvoice: function () {\n      FlowRouter.go(\"/pos-sale/posInvoice\");\n    },\n    time: function () {\n      var self = this;\n      this.todaySt = moment().format(\"DD/MM/YYYY\");\n      this.timeSt = moment().format(\"hh:mm:ss\");\n      setTimeout(self.time, 1000);\n    },\n    _inputMaskPosSaleCoffee: function () {\n      /*setTimeout(() => {\n          if ($(\".el-inputAmount\").length) {\n              new this.$_Cleave('.el-inputAmount', {\n                  numeral: true,\n                  numeralThousandsGroupStyle: 'thousand'\n              });\n          }\n           if ($(\".el-inputDR\").length) {\n              new this.$_Cleave('.el-inputDR', {\n                  numeral: true,\n                  numeralThousandsGroupStyle: 'thousand'\n              });\n          }\n           if ($(\".el-inputCR\").length) {\n              new this.$_Cleave('.el-inputCR', {\n                  numeral: true,\n                  numeralThousandsGroupStyle: 'thousand'\n              });\n          }\n        }, 200)*/\n    },\n    inputHandler: function (e) {\n      var vm = this;\n\n      if (e.data.init(0).selector === \".pos_SaleCoffee\") {\n        if (vm.dialogPayMoney === false) {\n          if (e.keyCode === 13 && e.ctrlKey) {\n            e.preventDefault();\n            vm.savePosSaleCoffee(false, e, false);\n          } else if (e.keyCode === 27 && !e.ctrlKey && !e.altKey) {\n            e.preventDefault();\n            vm.resetForm();\n          } else if (e.keyCode === 107 && !e.ctrlKey && !e.altKey) {\n            e.preventDefault();\n            vm.dialogPayMoney = true;\n          }\n        } else {\n          if (e.keyCode === 13) {\n            e.preventDefault();\n            vm.savePosSaleCoffee(false, e, true);\n          }\n        }\n      }\n    },\n\n    /* barcodeScanSaleCoffee(e) {\n         if (this.dialogAddPosSaleCoffee === true || this.dialogUpdatePosSaleCoffee === true) {\n             let scannerSensitivity = 100;\n             if (e.keyCode !== 13 && !isNaN(e.key)) {\n                 this.takeBarcode += e.key;\n             }\n             this.timeStamp.push(Date.now());\n             if (this.timeStamp.length > 1) {\n                 if (this.timeStamp[1] - this.timeStamp[0] >= scannerSensitivity) {\n                     this.takeBarcode = '';\n                     this.timeStamp = [];\n                 } else {\n                     if (e.keyCode === 13) {\n                         this.posSaleCoffeeForm.code = this.takeBarcode;\n                         this.addToPosSaleCoffeeData(null);\n                         this.timeStamp = [];\n                         this.takeBarcode = ''\n                     }\n                 }\n             }\n         }\n     },*/\n    itemOpt: function (query) {\n      var _this2 = this;\n\n      if (!!query) {\n        setTimeout(function () {\n          Meteor.call('queryItemOption', query, function (err, result) {\n            if (!err) {\n              _this2.itemOption = result;\n            } else {\n              console.log(err.message);\n            }\n          });\n        }, 200);\n      } else {\n        Meteor.call('queryItemOption', \"\", function (err, result) {\n          if (!err) {\n            _this2.itemOption = result;\n          } else {\n            console.log(err.message);\n          }\n        });\n      }\n    },\n    queryCategory: function () {\n      var _this3 = this;\n\n      var selector = {\n        q: \"\",\n        filter: \"\",\n        options: {\n          skip: 0,\n          limit: 100\n        }\n      };\n      Meteor.call('queryPosCategory', selector, function (err, result) {\n        _this3.categoryData = result.content;\n        _this3.isCategoryData = result.content.length > 0 ? true : false;\n      });\n    },\n    queryProduct: function () {\n      var _this4 = this;\n\n      Meteor.call('queryPosProductAll', function (err, result) {\n        _this4.productDataAll = result;\n      });\n    },\n    queryProductByCategoryId: function (categoryId) {\n      var findProduct = function (element) {\n        if (element.categoryId === categoryId) {\n          return element;\n        }\n      };\n\n      var pro = this.productDataAll.filter(findProduct);\n      this.productData = pro;\n    },\n    tableOpt: function () {\n      var _this5 = this;\n\n      Meteor.call('queryTableOption', Session.get(\"area\"), function (err, result) {\n        _this5.tableOption = result;\n      });\n    },\n    customerOpt: function (query) {\n      var _this6 = this;\n\n      if (!!query) {\n        setTimeout(function () {\n          var lists = [];\n          Meteor.call('queryPosCustomerOption', query, Session.get(\"area\"), function (err, result) {\n            if (!err) {\n              _this6.customerOption = result;\n            } else {\n              console.log(err.message);\n            }\n          });\n        }, 200);\n      } else {\n        Meteor.call('queryPosCustomerOption', \"\", Session.get(\"area\"), function (err, result) {\n          if (!err) {\n            _this6.customerOption = result;\n          } else {\n            console.log(err.message);\n          }\n        });\n      }\n    },\n    termOpt: function () {\n      var _this7 = this;\n\n      var selector = {};\n      Meteor.call('queryPosTermOption', selector, function (err, result) {\n        _this7.termOption = result;\n      });\n    },\n\n    /*checkValidatedNumber() {\n        let charCode = (val.which) ? val.which : val.keyCode;\n        if ($(val.currentTarget).val().indexOf('.') != -1) {\n            if (charCode == 46) {\n                return false;\n            }\n        }\n        return !(charCode != 46 && charCode > 31 && (charCode < 48 || charCode > 57));\n     },*/\n    savePosSaleCoffee: function (isCloseDialog, event, isPrint) {\n      var _this8 = this;\n\n      event.preventDefault();\n      var vm = this;\n      this.$refs[\"posSaleCoffeeFormAdd\"].validate(function (valid) {\n        if (valid) {\n          var posSaleCoffeeDoc = {\n            total: vm.$_numeral(vm.posSaleCoffeeForm.total).value(),\n            netTotal: vm.$_numeral(vm.posSaleCoffeeForm.netTotal).value(),\n            balanceUnPaid: vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value(),\n            paid: vm.$_numeral(vm.posSaleCoffeeForm.netTotal).value() - vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value(),\n            paidUSD: vm.$_numeral(vm.posSaleCoffeeForm.paidUSD).value(),\n            paidKHR: vm.$_numeral(vm.posSaleCoffeeForm.paidKHR).value(),\n            paidTHB: vm.$_numeral(vm.posSaleCoffeeForm.paidTHB).value(),\n            remainUSD: vm.$_numeral(vm.posSaleCoffeeForm.remainUSD).value(),\n            remainKHR: vm.$_numeral(vm.posSaleCoffeeForm.remainKHR).value(),\n            remainTHB: vm.$_numeral(vm.posSaleCoffeeForm.remainTHB).value(),\n            invoiceDate: moment(vm.posSaleCoffeeForm.invoiceDate).toDate(),\n            invoiceDateName: moment(vm.posSaleCoffeeForm.invoiceDate).format(\"DD/MM/YYYY\"),\n            dueDate: moment(vm.posSaleCoffeeForm.dueDate).toDate(),\n            invoiceNo: vm.posSaleCoffeeForm.invoiceNo,\n            note: vm.posSaleCoffeeForm.note,\n            discountType: vm.posSaleCoffeeForm.discountType,\n            discount: vm.$_numeral(vm.posSaleCoffeeForm.discount).value(),\n            discountValue: vm.$_numeral(vm.posSaleCoffeeForm.discountValue).value(),\n            termId: \"001\",\n            address: vm.posSaleCoffeeForm.address,\n            rolesArea: Session.get('area'),\n            paymentNumber: 1,\n            customerId: \"001\",\n            tableId: vm.posSaleCoffeeForm.tableId,\n            locationId: \"001\",\n            status: vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value() === 0 ? \"Complete\" : vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value() < vm.$_numeral(vm.posSaleCoffeeForm.netTotal).value() ? \"Partial\" : \"Active\"\n          };\n          posSaleCoffeeDoc.item = vm.posSaleCoffeeData;\n\n          if (vm.posInvoiceId === \"\") {\n            Meteor.call(\"insertPosInvoice\", posSaleCoffeeDoc, function (err, result) {\n              if (!err) {\n                if (isPrint) {\n                  FlowRouter.go('/pos-data/posInvoiceSmall/print?inv=' + result);\n                } else {\n                  vm.$message({\n                    duration: 1000,\n                    message: _this8.langConfig['saveSuccess'],\n                    type: 'success'\n                  });\n                }\n\n                vm.getVoucherByRoleAndDate(moment().toDate());\n                vm.queryProduct();\n                vm.queryProductByCategoryId();\n                Session.set(\"transactionActionNumber\", (Session.get(\"transactionActionNumber\") || 0) + 1);\n                vm.resetForm();\n                vm.dialogPayMoney = false;\n              } else {\n                vm.$notify.error({\n                  duration: 5000,\n                  title: 'Error',\n                  message: err.error\n                });\n                /*vm.$message({\n                    type: 'error',\n                    message: err.error\n                });*/\n              }\n            });\n          } else {\n            Meteor.call(\"updatePosInvoice\", posSaleCoffeeDoc, vm.posInvoiceId, function (err, result) {\n              if (!err) {\n                if (isPrint) {\n                  FlowRouter.go('/pos-data/posInvoiceSmall/print?inv=' + vm.posInvoiceId);\n                } else {\n                  vm.$message({\n                    duration: 1000,\n                    message: _this8.langConfig['saveSuccess'],\n                    type: 'success'\n                  });\n                }\n\n                vm.getVoucherByRoleAndDate(moment().toDate());\n                vm.queryProduct();\n                vm.queryProductByCategoryId();\n                Session.set(\"transactionActionNumber\", (Session.get(\"transactionActionNumber\") || 0) + 1);\n                vm.resetForm();\n                vm.dialogPayMoney = false;\n              } else {\n                vm.$notify.error({\n                  duration: 5000,\n                  title: 'Error',\n                  message: err.error\n                });\n              }\n            });\n          }\n        }\n      });\n    },\n    getVoucherByRoleAndDate: function (date) {\n      var vm = this;\n      Meteor.call(\"pos_getInvoiceNoByRoleAndDate\", Session.get(\"area\"), date, function (err, result) {\n        if (!err) {\n          vm.posSaleCoffeeForm.invoiceNo = result;\n        }\n      });\n    },\n    addToPosSaleCoffeeData: function (val, data) {\n      var vm = this;\n      var isFound = vm.posSaleCoffeeData.find(function (element) {\n        return element.itemId === data._id && element.type === data.type;\n      });\n      var indProduct = vm.productData.findIndex(function (k) {\n        return k._id === data._id;\n      });\n      var indProductAll = vm.productDataAll.findIndex(function (k) {\n        return k._id === data._id;\n      });\n\n      if (data.type === \"S\") {\n        if (indProduct !== -1) {\n          vm.productData[indProduct].smallQty = val;\n          vm.productData[indProduct].qty = val;\n        }\n\n        vm.productDataAll[indProductAll].smallQty = val;\n        vm.productDataAll[indProductAll].qty = val;\n        vm.productDataAll[indProductAll].type = \"S\";\n        vm.productDataAll[indProductAll].disableInputQty = false;\n      } else if (data.type === \"L\") {\n        if (indProduct !== -1) {\n          vm.productData[indProduct].largeQty = val;\n          vm.productData[indProduct].qty = val;\n        }\n\n        vm.productDataAll[indProductAll].largeQty = val;\n        vm.productDataAll[indProductAll].qty = val;\n        vm.productDataAll[indProductAll].type = \"L\";\n        vm.productDataAll[indProductAll].disableInputQty = false;\n      }\n\n      if (isFound !== undefined) {\n        this.$message({\n          type: 'warning',\n          message: 'កែប្រែចំនួន!'\n        });\n        var ind = vm.posSaleCoffeeData.findIndex(function (k) {\n          return k.itemId === data._id && k.type === data.type;\n        });\n        isFound.qty = val;\n        isFound.totalUnit = val;\n        isFound.amount = val * isFound.price;\n        vm.posSaleCoffeeData[ind] = isFound;\n\n        if (val === 0) {\n          vm.posSaleCoffeeData.splice(ind, 1);\n        }\n      } else {\n        vm.posSaleCoffeeData.push({\n          itemId: data._id,\n          itemName: data.name,\n          code: data.code,\n          unit1: 1,\n          unit2: 1,\n          totalUnit: val,\n          unitId: data.unitId,\n          unitName: data.unitName,\n          price: data.type === \"S\" ? vm.$_numeral(data.rePrice).value() : vm.$_numeral(data.whPrice).value(),\n          qty: val,\n          amount: data.type === \"S\" ? formatCurrency(data.rePrice * val) : formatCurrency(data.whPrice * val),\n          isRetail: true,\n          desc: \"\",\n          rawQty: 0,\n          type: data.type\n        });\n        vm.$message({\n          duration: 1000,\n          message: \"\\u1794\\u1793\\u17D2\\u1790\\u17C2\\u1798 \" + data.code + \" : \" + data.name + \" បានជោគជ័យ !\",\n          type: 'success'\n        });\n      }\n\n      this.getTotal();\n    },\n    updatePosSaleCoffeeDetail: function (row, index, val) {\n      var vm = this;\n      row.totalUnit = this.$_math.round(row.unit1 * row.unit2 * val, 2);\n      row.amount = formatCurrency(row.price * row.totalUnit);\n      row.qty = formatCurrency(val);\n      var indProduct = vm.productData.findIndex(function (k) {\n        return k._id === row.itemId;\n      });\n      var indProductAll = vm.productDataAll.findIndex(function (k) {\n        return k._id === row.itemId;\n      });\n\n      if (row.type === \"S\") {\n        if (indProduct !== -1) {\n          vm.productData[indProduct].smallQty = val;\n          vm.productData[indProduct].type = \"S\";\n        }\n\n        vm.productDataAll[indProductAll].smallQty = val;\n        vm.productDataAll[indProductAll].type = \"S\";\n      } else if (row.type === \"L\") {\n        if (indProduct !== -1) {\n          vm.productData[indProduct].largeQty = val;\n          vm.productData[indProduct].type = \"L\";\n        }\n\n        vm.productDataAll[indProductAll].largeQty = val;\n        vm.productDataAll[indProductAll].type = \"L\";\n      }\n\n      if (indProduct !== -1) {\n        vm.productData[indProduct].qty = val;\n      }\n\n      vm.productDataAll[indProductAll].qty = val;\n      vm.productDataAll[indProductAll].disableInputQty = row.type !== \"\" ? false : true;\n\n      if (indProduct !== -1) {\n        vm.productData[indProduct].disableInputQty = row.type !== \"\" ? false : true;\n      }\n\n      this.posSaleCoffeeData[index] = row;\n\n      if (val === 0) {\n        this.posSaleCoffeeData.splice(index, 1);\n      }\n\n      this.getTotal();\n    },\n    clearZero: function (event) {\n      /*debugger;\n      $(event.currentTarget).select();\n      console.log(event);*/\n    },\n    cancel: function () {\n      this.resetForm();\n      this.$message({\n        type: 'info',\n        message: this.langConfig['cancel']\n      });\n    },\n    resetForm: function () {\n      this.posSaleCoffeeData = [];\n      this.posSaleCoffeeForm.discountValue = 0;\n      this.posSaleCoffeeForm.code = \"\";\n      this.posSaleCoffeeForm.paidUSD = 0;\n      this.posSaleCoffeeForm.paidKHR = 0;\n      this.posSaleCoffeeForm.paidTHB = 0;\n      this.posSaleCoffeeForm.discount = 0;\n      this.posSaleCoffeeForm.customerId = \"\";\n      this.posSaleCoffeeForm.tableId = \"\";\n      this.posSaleCoffeeForm.balanceNotCut = 0;\n      this.posInvoiceId = \"\";\n\n      if (this.$refs[\"posSaleCoffeeFormAdd\"]) {\n        this.$refs[\"posSaleCoffeeFormAdd\"].resetFields();\n      }\n\n      this.queryProduct();\n      this.queryProductByCategoryId(\"\");\n      this.getTotal();\n    },\n    getTotal: function () {\n      var vm = this;\n      var total = 0;\n      vm.posSaleCoffeeData.forEach(function (obj) {\n        total += parseFloat(vm.$_numeral(obj.amount).value());\n      });\n\n      if (total >= vm.$_numeral(vm.posSaleCoffeeForm.balanceNotCutFull).value()) {\n        vm.posSaleCoffeeForm.balanceNotCut = vm.posSaleCoffeeForm.balanceNotCutFull;\n      } else {\n        vm.posSaleCoffeeForm.balanceNotCut = formatCurrency(total);\n      }\n\n      var companyDoc = WB_waterBillingSetup.findOne({});\n      vm.posSaleCoffeeForm.total = formatCurrencyLast(total, companyDoc.baseCurrency);\n\n      if (vm.posSaleCoffeeForm.discountType === \"Amount\") {\n        vm.posSaleCoffeeForm.netTotal = formatCurrencyLast(total - vm.posSaleCoffeeForm.discount, companyDoc.baseCurrency);\n        vm.posSaleCoffeeForm.balanceUnPaid = formatCurrencyLast(total - vm.posSaleCoffeeForm.discount - vm.$_numeral(vm.posSaleCoffeeForm.balanceNotCut).value() - GeneralFunction.exchange(\"USD\", companyDoc.baseCurrency, vm.posSaleCoffeeForm.paidUSD, Session.get(\"area\")) - GeneralFunction.exchange(\"KHR\", companyDoc.baseCurrency, vm.posSaleCoffeeForm.paidKHR, Session.get(\"area\")) - GeneralFunction.exchange(\"THB\", companyDoc.baseCurrency, vm.posSaleCoffeeForm.paidTHB, Session.get(\"area\")), companyDoc.baseCurrency);\n        vm.posSaleCoffeeForm.remainUSD = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"USD\", vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value(), Session.get(\"area\")), \"USD\");\n        vm.posSaleCoffeeForm.remainKHR = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"KHR\", vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value(), Session.get(\"area\")), \"KHR\");\n        vm.posSaleCoffeeForm.remainTHB = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"THB\", vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value(), Session.get(\"area\")), \"THB\");\n        vm.posSaleCoffeeForm.discountValue = formatCurrencyLast(vm.posSaleCoffeeForm.discount, companyDoc.baseCurrency);\n        vm.posSaleCoffeeForm.balanceUnPaid = vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value() <= 0 ? 0 : vm.posSaleCoffeeForm.balanceUnPaid;\n        this.typeDiscount = getCurrencySymbolById(companyDoc.baseCurrency);\n      } else {\n        vm.posSaleCoffeeForm.netTotal = formatCurrencyLast(total - total * vm.posSaleCoffeeForm.discount / 100, companyDoc.baseCurrency);\n        vm.posSaleCoffeeForm.balanceUnPaid = formatCurrencyLast(total - total * vm.posSaleCoffeeForm.discount / 100 - GeneralFunction.exchange(\"USD\", companyDoc.baseCurrency, vm.posSaleCoffeeForm.paidUSD, Session.get(\"area\")) - GeneralFunction.exchange(\"KHR\", companyDoc.baseCurrency, vm.posSaleCoffeeForm.paidKHR, Session.get(\"area\")) - GeneralFunction.exchange(\"THB\", companyDoc.baseCurrency, vm.posSaleCoffeeForm.paidTHB, Session.get(\"area\")), companyDoc.baseCurrency);\n        vm.posSaleCoffeeForm.remainUSD = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"USD\", vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value(), Session.get(\"area\")), \"USD\");\n        vm.posSaleCoffeeForm.remainKHR = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"KHR\", vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value(), Session.get(\"area\")), \"KHR\");\n        vm.posSaleCoffeeForm.remainTHB = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"THB\", vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value(), Session.get(\"area\")), \"THB\");\n        vm.posSaleCoffeeForm.discountValue = formatCurrencyLast(total * vm.posSaleCoffeeForm.discount / 100, companyDoc.baseCurrency);\n        vm.posSaleCoffeeForm.balanceUnPaid = vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value() <= 0 ? 0 : vm.posSaleCoffeeForm.balanceUnPaid;\n        this.typeDiscount = \"%\";\n      }\n    },\n    printSaleCoffee: function (data) {\n      if (data.transactionType === \"SaleCoffee Sale Order\") {\n        FlowRouter.go('/pos-data/posSaleCoffeeReceiveItem/print?inv=' + data._id);\n      } else {\n        FlowRouter.go('/pos-data/posSaleCoffee/print?inv=' + data._id);\n      }\n    },\n    handleChange: function (data, e) {\n      this.addToPosSaleCoffeeData(e, data);\n    },\n    handleClickBtn: function (data, btn, index) {\n      data.type = btn;\n      data.disableInputQty = data.type !== \"\" ? false : true;\n\n      if (data.type === \"S\") {\n        data.qty = data.smallQty === 0 ? 1 : data.smallQty;\n      } else if (data.type === \"L\") {\n        data.qty = data.largeQty === 0 ? 1 : data.largeQty;\n      }\n\n      this.addToPosSaleCoffeeData(data.qty, data);\n      this.productData[index] = data;\n    },\n    findInvoiceActiveByTableId: function (tableId) {\n      var _this9 = this;\n\n      var vm = this;\n      Meteor.call(\"queryInvoiceActiveByTableId\", tableId, function (err, result) {\n        if (result) {\n          vm.posSaleCoffeeData = [];\n          vm.posSaleCoffeeForm.discountValue = 0;\n          vm.posSaleCoffeeForm.paidUSD = 0;\n          vm.posSaleCoffeeForm.paidKHR = 0;\n          vm.posSaleCoffeeForm.paidTHB = 0;\n          vm.posSaleCoffeeForm.discount = 0;\n          vm.posSaleCoffeeForm.balanceNotCut = 0;\n          vm.posInvoiceId = result._id;\n          result.item.forEach(function (obj) {\n            if (obj) {\n              var data = vm.productDataAll.find(function (element) {\n                return element._id === obj.itemId;\n              });\n              data.type = obj.type;\n\n              if (data) {\n                vm.addToPosSaleCoffeeData(obj.qty, data);\n              }\n            }\n          });\n        } else if (tableId === \"\") {\n          _this9.posSaleCoffeeData = [];\n          _this9.posSaleCoffeeForm.discountValue = 0;\n          _this9.posSaleCoffeeForm.code = \"\";\n          _this9.posSaleCoffeeForm.paidUSD = 0;\n          _this9.posSaleCoffeeForm.paidKHR = 0;\n          _this9.posSaleCoffeeForm.paidTHB = 0;\n          _this9.posSaleCoffeeForm.discount = 0;\n          _this9.posSaleCoffeeForm.balanceNotCut = 0;\n          _this9.posInvoiceId = \"\";\n\n          _this9.queryProduct();\n\n          _this9.queryProductByCategoryId(\"\");\n\n          _this9.getTotal();\n        }\n      });\n    }\n  },\n  created: function () {\n    var _this10 = this;\n\n    this.isSearching = true;\n    this.getTotal();\n    this.queryCategory();\n    this.queryProduct();\n    this.tableOpt();\n    Meteor.subscribe('Pos_InvoiceReact');\n    this.getVoucherByRoleAndDate(moment().toDate());\n    Meteor.call('getWaterBillingSetup', Session.get('area'), function (err, result) {\n      if (result) {\n        _this10.waterBillingSetup = result;\n        _this10.currencySymbol = getCurrencySymbolById(result.baseCurrency);\n      }\n    });\n  },\n  computed: {\n    langConfig: function () {\n      var _this11 = this;\n\n      var data = compoLang.filter(function (config) {\n        return config.lang === _this11.langSession;\n      })[0]['saleCoffee'];\n      return data;\n    }\n  }\n});","map":{"version":3,"sources":["/home/snr/Desktop/Project/activity/imports/vue/ui/posSaleCoffee.vue"],"names":["draggable","module","link","v","formatCurrency","formatCurrencyLast","GeneralFunction","getCurrencySymbolById","WB_waterBillingSetup","compoLang","Pos_InvoiceReact","exportDefault","meteor","langSession","Session","get","disabledRemove","disabledUpdate","components","data","keyCode","refForm","multipleSelection","posInvoiceId","loading","searchData","isSearching","typeDiscount","categoryData","productData","productDataAll","currencySymbol","posSaleCoffeeData","dialogPayMoney","posSaleCoffeeForm","itemId","itemName","price","qty","amount","total","netTotal","balanceUnPaid","paid","invoiceDate","moment","toDate","dueDate","add","invoiceNo","note","discountType","discount","discountValue","termId","address","customerId","isRetail","paidUSD","paidKHR","paidTHB","remainUSD","remainKHR","remainTHB","unit1","unit2","totalUnit","desc","tableId","rawQty","isReceiveAll","balanceNotCut","balanceNotCutFull","code","rules","required","type","message","trigger","itemOption","customerOption","termOption","dialog","notifications","sound","widgets","labelPosition","options","disabledDate","time","closeDate","posSaleCoffeeDetail","discountTypeOption","label","value","tableOption","disabledItem","timeStamp","takeBarcode","skip","waterBillingSetup","username","Meteor","user","todaySt","timeSt","isCategoryData","mounted","$jQuery","off","vm","min","getTime","elem","checkEvent","$","_data","keyup","length","$nextTick","on","inputHandler","e","preventDefault","watch","val","dialogUpdatePosSaleCoffee","posSaleCoffeeDate","undefined","$refs","getVoucherByRoleAndDate","_inputMaskPosSaleCoffee","getTotal","findInvoiceActiveByTableId","methods","clickTHB","$_numeral","clickUSD","clickKHR","goToInvoice","FlowRouter","go","self","format","setTimeout","init","selector","ctrlKey","savePosSaleCoffee","altKey","resetForm","itemOpt","query","call","err","result","console","log","queryCategory","q","filter","limit","content","queryProduct","queryProductByCategoryId","categoryId","findProduct","element","pro","tableOpt","customerOpt","lists","termOpt","isCloseDialog","event","isPrint","validate","valid","posSaleCoffeeDoc","invoiceDateName","rolesArea","paymentNumber","locationId","status","item","$message","duration","langConfig","set","$notify","error","title","date","addToPosSaleCoffeeData","isFound","find","_id","indProduct","findIndex","k","indProductAll","smallQty","disableInputQty","largeQty","ind","splice","push","name","unitId","unitName","rePrice","whPrice","updatePosSaleCoffeeDetail","row","index","$_math","round","clearZero","cancel","resetFields","forEach","obj","parseFloat","companyDoc","findOne","baseCurrency","exchange","printSaleCoffee","transactionType","handleChange","handleClickBtn","btn","created","subscribe","computed","config","lang"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport draggable from 'vuedraggable';\nimport {formatCurrency} from \"../../../imports/api/methods/roundCurrency\";\nimport {formatCurrencyLast} from \"../../../imports/api/methods/roundCurrency\";\nimport {GeneralFunction} from \"../../../imports/api/methods/generalFunction\";\nimport {getCurrencySymbolById} from \"../../../imports/api/methods/roundCurrency\";\nimport {WB_waterBillingSetup} from \"../../collection/waterBillingSetup\";\n// require('cleave.js/dist/addons/cleave-phone.ac');\n// require('cleave.js/dist/addons/cleave-phone.{country}');\nimport compoLang from '../../../both/i18n/lang/elem-label'\nimport {Pos_InvoiceReact} from \"../../collection/posInvoice\";\n\nexport default {\n    meteor: {\n        langSession() {\n            return Session.get('lang') || \"en\";\n        },\n        disabledRemove() {\n            return Session.get(\"canRemove\");\n        },\n        disabledUpdate() {\n            return Session.get(\"canUpdate\");\n        }\n    },\n    components: {\n        draggable\n    },\n    data() {\n        return {\n            keyCode: [],\n            refForm: 'posSaleCoffeeFormAdd',\n            multipleSelection: [],\n            posInvoiceId: \"\",\n            loading: false,\n            searchData: '',\n            isSearching: false,\n            typeDiscount: \"\",\n            categoryData: [],\n            productData: [],\n            productDataAll: [],\n            currencySymbol: \"\",\n            posSaleCoffeeData: [],\n            dialogPayMoney: false,\n\n            posSaleCoffeeForm: {\n                itemId: \"\",\n                itemName: \"\",\n                price: 0,\n                qty: 0,\n                amount: 0,\n                total: 0,\n                netTotal: 0,\n                balanceUnPaid: 0,\n                paid: 0,\n                invoiceDate: moment().toDate(),\n                dueDate: moment().add(1, \"month\").toDate(),\n                invoiceNo: \"\",\n\n                note: \"\",\n\n                discountType: \"Amount\",\n                discount: 0,\n                discountValue: 0,\n                termId: \"\",\n                address: \"\",\n                customerId: \"\",\n\n                isRetail: true,\n                paidUSD: 0,\n                paidKHR: 0,\n                paidTHB: 0,\n\n                remainUSD: 0,\n                remainKHR: 0,\n                remainTHB: 0,\n                unit1: 1,\n                unit2: 1,\n                totalUnit: 1,\n                desc: \"\",\n                tableId: \"\",\n                rawQty: 0,\n                isReceiveAll: false,\n                balanceNotCut: 0,\n                balanceNotCutFull: 0,\n                code: \"\"\n\n            },\n            rules: {\n                tableId: [{\n                    required: true,\n                    type: 'string',\n                    message: 'Please choose Table',\n                    trigger: 'change'\n                }],\n            },\n\n            // Options\n            itemOption: [],\n            customerOption: [],\n            termOption: [],\n\n            dialog: true,\n            notifications: false,\n            sound: true,\n            widgets: false,\n            labelPosition: \"top\",\n            options: {\n                disabledDate(time) {\n                    return false;\n                }\n            },\n            disabledDate: false,\n            closeDate: \"\",\n            type: \"\",\n            posSaleCoffeeDetail: {},\n            discountTypeOption: [\n                {label: \"amountDiscount\", value: \"Amount\"},\n                {label: \"percent\", value: \"Percent\"}\n            ],\n            tableOption: [],\n            disabledItem: true,\n            timeStamp: [],\n            takeBarcode: '',\n            skip: 0,\n            waterBillingSetup: {},\n            username: Meteor.user().username,\n            todaySt: \"\",\n            timeSt: \"\",\n            isCategoryData: false,\n            qty: 0\n        }\n    },\n    mounted() {\n        this.$jQuery('body').off();\n        let vm = this;\n        vm.options = {\n            disabledDate(time) {\n                let min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n                return time.getTime() < min;\n            }\n        };\n\n\n        let elem = this.$jQuery('.pos_SaleCoffee');\n        let checkEvent = $._data($('body').get(0), 'events');\n        if (checkEvent.keyup.length <= 1) {\n            this.$nextTick(() => {\n                this.$jQuery('body').on('keydown', elem, this.inputHandler);\n            })\n        }\n        this.$jQuery('body').on('focus', 'input[type=number]', function(e) {\n            $(this).on('wheel', function(e) {\n                e.preventDefault();\n            });\n        });\n        this.time();\n    },\n    watch: {\n        \"posSaleCoffeeForm.invoiceDate\"(val) {\n            let vm = this;\n            if (vm.dialogUpdatePosSaleCoffee === false) {\n                vm.posSaleCoffeeForm.posSaleCoffeeDate = val;\n            }\n            if (vm.closeDate && vm.closeDate !== \"\" && vm.closeDate !== undefined) {\n                vm.options = {\n                    disabledDate(time) {\n                        let min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n                        return time.getTime() < min;\n                    }\n                }\n            } else {\n                vm.options = {\n                    disabledDate(time) {\n                        return false;\n                    }\n                }\n            }\n            if (this.$refs[\"posSaleCoffeeFormAdd\"]) {\n                this.getVoucherByRoleAndDate(val);\n            }\n        },\n        dialogUpdatePosSaleCoffee(val) {\n            if (val) {\n                this._inputMaskPosSaleCoffee();\n            }\n        },\n        \"posSaleCoffeeForm.discount\"(val) {\n            if (val || val === 0) {\n                this.posSaleCoffeeForm.discount = val;\n                // this.posSaleCoffeeForm.discount = this.$_numeral(val).format(\"0,00\");\n                this.getTotal();\n\n            }\n        },\n        \"posSaleCoffeeForm.discountType\"(val) {\n            if (val) {\n                this.posSaleCoffeeForm.discountType = val;\n                this.getTotal();\n            }\n        },\n        \"posSaleCoffeeForm.tableId\"(val) {\n            this.findInvoiceActiveByTableId(val);\n        }\n    },\n    methods: {\n        clickTHB(val) {\n            this.posSaleCoffeeForm.paidTHB = this.$_numeral(val).value();\n            this.getTotal();\n        },\n        clickUSD(val) {\n            this.posSaleCoffeeForm.paidUSD = this.$_numeral(val).value();\n            this.getTotal();\n        },\n        clickKHR(val) {\n            this.posSaleCoffeeForm.paidKHR = this.$_numeral(val).value();\n            this.getTotal();\n        },\n        goToInvoice() {\n            FlowRouter.go(\"/pos-sale/posInvoice\");\n        },\n        time() {\n            let self = this;\n            this.todaySt = moment().format(\"DD/MM/YYYY\");\n            this.timeSt = moment().format(\"hh:mm:ss\");\n            setTimeout(self.time, 1000);\n        },\n        _inputMaskPosSaleCoffee() {\n            /*setTimeout(() => {\n                if ($(\".el-inputAmount\").length) {\n                    new this.$_Cleave('.el-inputAmount', {\n                        numeral: true,\n                        numeralThousandsGroupStyle: 'thousand'\n                    });\n                }\n\n                if ($(\".el-inputDR\").length) {\n                    new this.$_Cleave('.el-inputDR', {\n                        numeral: true,\n                        numeralThousandsGroupStyle: 'thousand'\n                    });\n                }\n\n                if ($(\".el-inputCR\").length) {\n                    new this.$_Cleave('.el-inputCR', {\n                        numeral: true,\n                        numeralThousandsGroupStyle: 'thousand'\n                    });\n                }\n\n\n            }, 200)*/\n        },\n        inputHandler(e) {\n            let vm = this;\n            if (e.data.init(0).selector === \".pos_SaleCoffee\") {\n                if (vm.dialogPayMoney === false) {\n                    if (e.keyCode === 13 && e.ctrlKey) {\n                        e.preventDefault();\n                        vm.savePosSaleCoffee(false, e, false);\n                    } else if (e.keyCode === 27 && !e.ctrlKey && !e.altKey) {\n                        e.preventDefault();\n                        vm.resetForm();\n                    } else if (e.keyCode === 107 && !e.ctrlKey && !e.altKey) {\n                        e.preventDefault();\n                        vm.dialogPayMoney = true;\n                    }\n                } else {\n                    if (e.keyCode === 13) {\n                        e.preventDefault();\n                        vm.savePosSaleCoffee(false, e, true);\n                    }\n                }\n            }\n\n        },\n        /* barcodeScanSaleCoffee(e) {\n             if (this.dialogAddPosSaleCoffee === true || this.dialogUpdatePosSaleCoffee === true) {\n                 let scannerSensitivity = 100;\n                 if (e.keyCode !== 13 && !isNaN(e.key)) {\n                     this.takeBarcode += e.key;\n                 }\n                 this.timeStamp.push(Date.now());\n                 if (this.timeStamp.length > 1) {\n                     if (this.timeStamp[1] - this.timeStamp[0] >= scannerSensitivity) {\n                         this.takeBarcode = '';\n                         this.timeStamp = [];\n                     } else {\n                         if (e.keyCode === 13) {\n                             this.posSaleCoffeeForm.code = this.takeBarcode;\n                             this.addToPosSaleCoffeeData(null);\n                             this.timeStamp = [];\n                             this.takeBarcode = ''\n                         }\n                     }\n                 }\n             }\n         },*/\n        itemOpt(query) {\n            if (!!query) {\n                setTimeout(() => {\n                    Meteor.call('queryItemOption', query, (err, result) => {\n                        if (!err) {\n                            this.itemOption = result;\n                        } else {\n                            console.log(err.message);\n                        }\n                    })\n                }, 200);\n            } else {\n                Meteor.call('queryItemOption', \"\", (err, result) => {\n                    if (!err) {\n                        this.itemOption = result;\n                    } else {\n                        console.log(err.message);\n                    }\n                })\n            }\n        },\n        queryCategory() {\n            let selector = {\n                    q: \"\",\n                    filter: \"\",\n                    options: {\n                        skip: 0, limit: 100\n                    }\n                }\n            ;\n            Meteor.call('queryPosCategory', selector, (err, result) => {\n                this.categoryData = result.content;\n                this.isCategoryData = result.content.length > 0 ? true : false;\n            })\n        },\n        queryProduct() {\n            Meteor.call('queryPosProductAll', (err, result) => {\n                this.productDataAll = result;\n            })\n        },\n        queryProductByCategoryId(categoryId) {\n            let findProduct = function (element) {\n                if (element.categoryId === categoryId) {\n                    return element;\n                }\n            }\n            let pro = this.productDataAll.filter(findProduct);\n            this.productData = pro;\n        },\n        tableOpt() {\n            Meteor.call('queryTableOption',Session.get(\"area\"), (err, result) => {\n                this.tableOption = result;\n            })\n        },\n        customerOpt(query) {\n            if (!!query) {\n                setTimeout(() => {\n                    let lists = [];\n                    Meteor.call('queryPosCustomerOption', query,Session.get(\"area\"), (err, result) => {\n                        if (!err) {\n                            this.customerOption = result;\n                        } else {\n                            console.log(err.message);\n                        }\n                    })\n                }, 200);\n            } else {\n                Meteor.call('queryPosCustomerOption', \"\",Session.get(\"area\"), (err, result) => {\n                    if (!err) {\n                        this.customerOption = result;\n                    } else {\n                        console.log(err.message);\n                    }\n                })\n            }\n        },\n        termOpt() {\n            let selector = {};\n            Meteor.call('queryPosTermOption', selector, (err, result) => {\n                this.termOption = result;\n            })\n        },\n        /*checkValidatedNumber() {\n            let charCode = (val.which) ? val.which : val.keyCode;\n            if ($(val.currentTarget).val().indexOf('.') != -1) {\n                if (charCode == 46) {\n                    return false;\n                }\n            }\n            return !(charCode != 46 && charCode > 31 && (charCode < 48 || charCode > 57));\n\n        },*/\n        savePosSaleCoffee(isCloseDialog, event, isPrint) {\n            event.preventDefault();\n            let vm = this;\n            this.$refs[\"posSaleCoffeeFormAdd\"].validate((valid) => {\n                if (valid) {\n                    let posSaleCoffeeDoc = {\n                        total: vm.$_numeral(vm.posSaleCoffeeForm.total).value(),\n                        netTotal: vm.$_numeral(vm.posSaleCoffeeForm.netTotal).value(),\n                        balanceUnPaid: vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value(),\n                        paid: vm.$_numeral(vm.posSaleCoffeeForm.netTotal).value() - vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value(),\n\n                        paidUSD: vm.$_numeral(vm.posSaleCoffeeForm.paidUSD).value(),\n                        paidKHR: vm.$_numeral(vm.posSaleCoffeeForm.paidKHR).value(),\n                        paidTHB: vm.$_numeral(vm.posSaleCoffeeForm.paidTHB).value(),\n\n                        remainUSD: vm.$_numeral(vm.posSaleCoffeeForm.remainUSD).value(),\n                        remainKHR: vm.$_numeral(vm.posSaleCoffeeForm.remainKHR).value(),\n                        remainTHB: vm.$_numeral(vm.posSaleCoffeeForm.remainTHB).value(),\n\n                        invoiceDate: moment(vm.posSaleCoffeeForm.invoiceDate).toDate(),\n                        invoiceDateName: moment(vm.posSaleCoffeeForm.invoiceDate).format(\"DD/MM/YYYY\"),\n                        dueDate: moment(vm.posSaleCoffeeForm.dueDate).toDate(),\n                        invoiceNo: vm.posSaleCoffeeForm.invoiceNo,\n\n                        note: vm.posSaleCoffeeForm.note,\n\n                        discountType: vm.posSaleCoffeeForm.discountType,\n\n\n                        discount: vm.$_numeral(vm.posSaleCoffeeForm.discount).value(),\n                        discountValue: vm.$_numeral(vm.posSaleCoffeeForm.discountValue).value(),\n                        termId: \"001\",\n                        address: vm.posSaleCoffeeForm.address,\n\n                        rolesArea: Session.get('area'),\n                        paymentNumber: 1,\n                        customerId: \"001\",\n                        tableId: vm.posSaleCoffeeForm.tableId,\n                        locationId: \"001\",\n                        status: vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value() === 0 ? \"Complete\" : vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value() < vm.$_numeral(vm.posSaleCoffeeForm.netTotal).value() ? \"Partial\" : \"Active\"\n                    };\n                    posSaleCoffeeDoc.item = vm.posSaleCoffeeData;\n                    if (vm.posInvoiceId === \"\") {\n                        Meteor.call(\"insertPosInvoice\", posSaleCoffeeDoc, (err, result) => {\n                            if (!err) {\n                                if (isPrint) {\n                                    FlowRouter.go('/pos-data/posInvoiceSmall/print?inv=' + result);\n                                } else {\n                                    vm.$message({\n                                        duration: 1000,\n                                        message: this.langConfig['saveSuccess'],\n                                        type: 'success'\n                                    });\n                                }\n\n                                vm.getVoucherByRoleAndDate(moment().toDate());\n                                vm.queryProduct();\n                                vm.queryProductByCategoryId();\n\n                                Session.set(\"transactionActionNumber\", (Session.get(\"transactionActionNumber\") || 0) + 1);\n\n                                vm.resetForm();\n                                vm.dialogPayMoney = false;\n                            } else {\n                                vm.$notify.error({\n                                    duration: 5000,\n                                    title: 'Error',\n                                    message: err.error\n                                });\n                                /*vm.$message({\n                                    type: 'error',\n                                    message: err.error\n                                });*/\n                            }\n                        })\n                    } else {\n                        Meteor.call(\"updatePosInvoice\", posSaleCoffeeDoc, vm.posInvoiceId, (err, result) => {\n                            if (!err) {\n                                if (isPrint) {\n                                    FlowRouter.go('/pos-data/posInvoiceSmall/print?inv=' + vm.posInvoiceId);\n                                } else {\n                                    vm.$message({\n                                        duration: 1000,\n                                        message: this.langConfig['saveSuccess'],\n                                        type: 'success'\n                                    });\n                                }\n                                vm.getVoucherByRoleAndDate(moment().toDate());\n                                vm.queryProduct();\n                                vm.queryProductByCategoryId();\n\n                                Session.set(\"transactionActionNumber\", (Session.get(\"transactionActionNumber\") || 0) + 1);\n                                vm.resetForm();\n                                vm.dialogPayMoney = false;\n                            } else {\n                                vm.$notify.error({\n                                    duration: 5000,\n                                    title: 'Error',\n                                    message: err.error\n                                });\n                            }\n                        })\n                    }\n\n                }\n            })\n\n\n        },\n\n        getVoucherByRoleAndDate(date) {\n            let vm = this;\n            Meteor.call(\"pos_getInvoiceNoByRoleAndDate\", Session.get(\"area\"), date, (err, result) => {\n                if (!err) {\n                    vm.posSaleCoffeeForm.invoiceNo = result;\n                }\n            })\n        },\n\n\n        addToPosSaleCoffeeData(val, data) {\n            let vm = this;\n            let isFound = vm.posSaleCoffeeData.find(function (element) {\n                return element.itemId === data._id && element.type === data.type;\n            });\n            let indProduct = vm.productData.findIndex(k => k._id === data._id);\n            let indProductAll = vm.productDataAll.findIndex(k => k._id === data._id);\n            if (data.type === \"S\") {\n                if (indProduct !== -1) {\n                    vm.productData[indProduct].smallQty = val;\n                    vm.productData[indProduct].qty = val;\n                }\n                vm.productDataAll[indProductAll].smallQty = val;\n                vm.productDataAll[indProductAll].qty = val;\n                vm.productDataAll[indProductAll].type = \"S\";\n                vm.productDataAll[indProductAll].disableInputQty = false;\n\n            } else if (data.type === \"L\") {\n                if (indProduct !== -1) {\n                    vm.productData[indProduct].largeQty = val;\n                    vm.productData[indProduct].qty = val;\n                }\n                vm.productDataAll[indProductAll].largeQty = val;\n                vm.productDataAll[indProductAll].qty = val;\n                vm.productDataAll[indProductAll].type = \"L\";\n                vm.productDataAll[indProductAll].disableInputQty = false;\n\n            }\n\n            if (isFound !== undefined) {\n                this.$message({\n                    type: 'warning',\n                    message: 'កែប្រែចំនួន!'\n                });\n\n                let ind = vm.posSaleCoffeeData.findIndex(k => k.itemId === data._id && k.type === data.type);\n                isFound.qty = val;\n                isFound.totalUnit = val;\n                isFound.amount = val * isFound.price;\n\n                vm.posSaleCoffeeData[ind] = isFound;\n                if (val === 0) {\n                    vm.posSaleCoffeeData.splice(ind, 1);\n                }\n\n            } else {\n                vm.posSaleCoffeeData.push({\n                    itemId: data._id,\n                    itemName: data.name,\n                    code: data.code,\n                    unit1: 1,\n                    unit2: 1,\n                    totalUnit: val,\n                    unitId: data.unitId,\n                    unitName: data.unitName,\n                    price: data.type === \"S\" ? vm.$_numeral(data.rePrice).value() : vm.$_numeral(data.whPrice).value(),\n                    qty: val,\n                    amount: data.type === \"S\" ? formatCurrency(data.rePrice * val) : formatCurrency(data.whPrice * val),\n                    isRetail: true,\n                    desc: \"\",\n                    rawQty: 0,\n                    type: data.type\n                });\n                vm.$message({\n                    duration: 1000,\n                    message: `បន្ថែម ` + data.code + \" : \" + data.name + \" បានជោគជ័យ !\",\n                    type: 'success'\n                });\n            }\n\n\n            this.getTotal();\n\n\n        }\n        ,\n        updatePosSaleCoffeeDetail(row, index, val) {\n            let vm = this;\n            row.totalUnit = this.$_math.round(row.unit1 * row.unit2 * val, 2);\n            row.amount = formatCurrency(row.price * row.totalUnit);\n            row.qty = formatCurrency(val);\n\n            let indProduct = vm.productData.findIndex(k => k._id === row.itemId);\n            let indProductAll = vm.productDataAll.findIndex(k => k._id === row.itemId);\n            if (row.type === \"S\") {\n                if (indProduct !== -1) {\n                    vm.productData[indProduct].smallQty = val;\n                    vm.productData[indProduct].type = \"S\";\n                }\n                vm.productDataAll[indProductAll].smallQty = val;\n                vm.productDataAll[indProductAll].type = \"S\";\n\n\n            } else if (row.type === \"L\") {\n                if (indProduct !== -1) {\n                    vm.productData[indProduct].largeQty = val;\n                    vm.productData[indProduct].type = \"L\";\n                }\n                vm.productDataAll[indProductAll].largeQty = val;\n                vm.productDataAll[indProductAll].type = \"L\";\n            }\n            if (indProduct !== -1) {\n                vm.productData[indProduct].qty = val;\n            }\n            vm.productDataAll[indProductAll].qty = val;\n\n            vm.productDataAll[indProductAll].disableInputQty = row.type !== \"\" ? false : true;\n            if (indProduct !== -1) {\n                vm.productData[indProduct].disableInputQty = row.type !== \"\" ? false : true;\n            }\n\n            this.posSaleCoffeeData[index] = row;\n            if (val === 0) {\n                this.posSaleCoffeeData.splice(index, 1);\n            }\n            this.getTotal();\n        }\n        ,\n        clearZero(event) {\n            /*debugger;\n            $(event.currentTarget).select();\n            console.log(event);*/\n        }\n        ,\n        cancel() {\n            this.resetForm();\n            this.$message({\n                type: 'info',\n                message: this.langConfig['cancel']\n            });\n        }\n        ,\n        resetForm() {\n            this.posSaleCoffeeData = [];\n            this.posSaleCoffeeForm.discountValue = 0;\n            this.posSaleCoffeeForm.code = \"\";\n            this.posSaleCoffeeForm.paidUSD = 0;\n            this.posSaleCoffeeForm.paidKHR = 0;\n            this.posSaleCoffeeForm.paidTHB = 0;\n            this.posSaleCoffeeForm.discount = 0;\n            this.posSaleCoffeeForm.customerId = \"\";\n            this.posSaleCoffeeForm.tableId = \"\";\n            this.posSaleCoffeeForm.balanceNotCut = 0;\n\n            this.posInvoiceId = \"\";\n            if (this.$refs[\"posSaleCoffeeFormAdd\"]) {\n                this.$refs[\"posSaleCoffeeFormAdd\"].resetFields();\n            }\n            this.queryProduct();\n            this.queryProductByCategoryId(\"\");\n            this.getTotal();\n\n        }\n        ,\n        getTotal() {\n            let vm = this;\n            let total = 0;\n            vm.posSaleCoffeeData.forEach(function (obj) {\n                total += parseFloat(vm.$_numeral(obj.amount).value());\n\n            });\n            if (total >= vm.$_numeral(vm.posSaleCoffeeForm.balanceNotCutFull).value()) {\n                vm.posSaleCoffeeForm.balanceNotCut = vm.posSaleCoffeeForm.balanceNotCutFull;\n            } else {\n                vm.posSaleCoffeeForm.balanceNotCut = formatCurrency(total);\n            }\n            let companyDoc = WB_waterBillingSetup.findOne({});\n            vm.posSaleCoffeeForm.total = formatCurrencyLast(total, companyDoc.baseCurrency);\n\n            if (vm.posSaleCoffeeForm.discountType === \"Amount\") {\n                vm.posSaleCoffeeForm.netTotal = formatCurrencyLast(total - vm.posSaleCoffeeForm.discount, companyDoc.baseCurrency);\n                vm.posSaleCoffeeForm.balanceUnPaid = formatCurrencyLast(total - vm.posSaleCoffeeForm.discount - vm.$_numeral(vm.posSaleCoffeeForm.balanceNotCut).value() - GeneralFunction.exchange(\"USD\", companyDoc.baseCurrency, vm.posSaleCoffeeForm.paidUSD, Session.get(\"area\")) - GeneralFunction.exchange(\"KHR\", companyDoc.baseCurrency, vm.posSaleCoffeeForm.paidKHR, Session.get(\"area\")) - GeneralFunction.exchange(\"THB\", companyDoc.baseCurrency, vm.posSaleCoffeeForm.paidTHB, Session.get(\"area\")), companyDoc.baseCurrency);\n\n                vm.posSaleCoffeeForm.remainUSD = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"USD\", vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value(), Session.get(\"area\")), \"USD\");\n                vm.posSaleCoffeeForm.remainKHR = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"KHR\", vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value(), Session.get(\"area\")), \"KHR\");\n                vm.posSaleCoffeeForm.remainTHB = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"THB\", vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value(), Session.get(\"area\")), \"THB\");\n                vm.posSaleCoffeeForm.discountValue = formatCurrencyLast(vm.posSaleCoffeeForm.discount, companyDoc.baseCurrency);\n\n                vm.posSaleCoffeeForm.balanceUnPaid = vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value() <= 0 ? 0 : vm.posSaleCoffeeForm.balanceUnPaid;\n                this.typeDiscount = getCurrencySymbolById(companyDoc.baseCurrency);\n            } else {\n                vm.posSaleCoffeeForm.netTotal = formatCurrencyLast(total - (total * vm.posSaleCoffeeForm.discount / 100), companyDoc.baseCurrency);\n                vm.posSaleCoffeeForm.balanceUnPaid = formatCurrencyLast(total - (total * vm.posSaleCoffeeForm.discount / 100) - GeneralFunction.exchange(\"USD\", companyDoc.baseCurrency, vm.posSaleCoffeeForm.paidUSD, Session.get(\"area\")) - GeneralFunction.exchange(\"KHR\", companyDoc.baseCurrency, vm.posSaleCoffeeForm.paidKHR, Session.get(\"area\")) - GeneralFunction.exchange(\"THB\", companyDoc.baseCurrency, vm.posSaleCoffeeForm.paidTHB, Session.get(\"area\")), companyDoc.baseCurrency);\n\n                vm.posSaleCoffeeForm.remainUSD = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"USD\", vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value(), Session.get(\"area\")), \"USD\");\n                vm.posSaleCoffeeForm.remainKHR = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"KHR\", vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value(), Session.get(\"area\")), \"KHR\");\n                vm.posSaleCoffeeForm.remainTHB = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"THB\", vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value(), Session.get(\"area\")), \"THB\");\n                vm.posSaleCoffeeForm.discountValue = formatCurrencyLast((total * vm.posSaleCoffeeForm.discount / 100), companyDoc.baseCurrency);\n\n                vm.posSaleCoffeeForm.balanceUnPaid = vm.$_numeral(vm.posSaleCoffeeForm.balanceUnPaid).value() <= 0 ? 0 : vm.posSaleCoffeeForm.balanceUnPaid;\n                this.typeDiscount = \"%\";\n            }\n        },\n        printSaleCoffee(data) {\n            if (data.transactionType === \"SaleCoffee Sale Order\") {\n                FlowRouter.go('/pos-data/posSaleCoffeeReceiveItem/print?inv=' + data._id);\n            } else {\n                FlowRouter.go('/pos-data/posSaleCoffee/print?inv=' + data._id);\n            }\n\n        },\n        handleChange(data, e) {\n            this.addToPosSaleCoffeeData(e, data);\n        },\n        handleClickBtn(data, btn, index) {\n            data.type = btn;\n            data.disableInputQty = data.type !== \"\" ? false : true;\n\n            if (data.type === \"S\") {\n                data.qty = data.smallQty === 0 ? 1 : data.smallQty;\n            } else if (data.type === \"L\") {\n                data.qty = data.largeQty === 0 ? 1 : data.largeQty;\n            }\n            this.addToPosSaleCoffeeData(data.qty, data);\n            this.productData[index] = data;\n        },\n        findInvoiceActiveByTableId(tableId) {\n            let vm = this;\n            Meteor.call(\"queryInvoiceActiveByTableId\", tableId, (err, result) => {\n                if (result) {\n                    vm.posSaleCoffeeData = [];\n                    vm.posSaleCoffeeForm.discountValue = 0;\n                    vm.posSaleCoffeeForm.paidUSD = 0;\n                    vm.posSaleCoffeeForm.paidKHR = 0;\n                    vm.posSaleCoffeeForm.paidTHB = 0;\n                    vm.posSaleCoffeeForm.discount = 0;\n                    vm.posSaleCoffeeForm.balanceNotCut = 0;\n                    vm.posInvoiceId = result._id;\n                    result.item.forEach((obj) => {\n                        if (obj) {\n                            let data = vm.productDataAll.find(function (element) {\n                                return element._id === obj.itemId;\n                            });\n                            data.type = obj.type;\n                            if (data) {\n                                vm.addToPosSaleCoffeeData(obj.qty, data);\n                            }\n                        }\n                    })\n                }\n                else if (tableId === \"\") {\n                    this.posSaleCoffeeData = [];\n                    this.posSaleCoffeeForm.discountValue = 0;\n                    this.posSaleCoffeeForm.code = \"\";\n                    this.posSaleCoffeeForm.paidUSD = 0;\n                    this.posSaleCoffeeForm.paidKHR = 0;\n                    this.posSaleCoffeeForm.paidTHB = 0;\n                    this.posSaleCoffeeForm.discount = 0;\n                    this.posSaleCoffeeForm.balanceNotCut = 0;\n                    this.posInvoiceId = \"\";\n                    this.queryProduct();\n                    this.queryProductByCategoryId(\"\");\n                    this.getTotal();\n                }\n            })\n        }\n    },\n    created() {\n        this.isSearching = true;\n        this.getTotal();\n        this.queryCategory();\n        this.queryProduct();\n        this.tableOpt();\n        Meteor.subscribe('Pos_InvoiceReact');\n        this.getVoucherByRoleAndDate(moment().toDate());\n\n        Meteor.call('getWaterBillingSetup', Session.get('area'), (err, result) => {\n            if (result) {\n                this.waterBillingSetup = result;\n                this.currencySymbol = getCurrencySymbolById(result.baseCurrency);\n            }\n        })\n\n\n    },\n    computed: {\n        langConfig() {\n            let data = compoLang.filter(config => config.lang === this.langSession)[0]['saleCoffee'];\n            return data;\n        }\n    }\n}\n\n\n"]},"sourceType":"script","hash":"d8692b684d50ea440cb244b8b4dcca3ececa3013"}
