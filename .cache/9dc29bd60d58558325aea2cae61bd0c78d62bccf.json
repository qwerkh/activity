{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/snr/Desktop/Project/activity/imports/vue/ui/posSaleRestaurant.vue","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","dynamicImport",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"/home/snr/Desktop/Project/activity/imports/vue/ui/posSaleRestaurant.vue","filename":"/home/snr/Desktop/Project/activity/imports/vue/ui/posSaleRestaurant.vue","passPerPreset":false,"envName":"development","cwd":"/home/snr/Desktop/Project/activity","root":"/home/snr/Desktop/Project/activity","plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/snr/Desktop/Project/activity/imports/vue/ui/posSaleRestaurant.vue","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"/home/snr/Desktop/Project/activity/imports/vue/ui/posSaleRestaurant.vue"}},"code":"var draggable;\nmodule.link(\"vuedraggable\", {\n  \"default\": function (v) {\n    draggable = v;\n  }\n}, 0);\nvar formatCurrency;\nmodule.link(\"../../../imports/api/methods/roundCurrency\", {\n  formatCurrency: function (v) {\n    formatCurrency = v;\n  }\n}, 1);\nvar formatCurrencyLast;\nmodule.link(\"../../../imports/api/methods/roundCurrency\", {\n  formatCurrencyLast: function (v) {\n    formatCurrencyLast = v;\n  }\n}, 2);\nvar GeneralFunction;\nmodule.link(\"../../../imports/api/methods/generalFunction\", {\n  GeneralFunction: function (v) {\n    GeneralFunction = v;\n  }\n}, 3);\nvar getCurrencySymbolById;\nmodule.link(\"../../../imports/api/methods/roundCurrency\", {\n  getCurrencySymbolById: function (v) {\n    getCurrencySymbolById = v;\n  }\n}, 4);\nvar WB_waterBillingSetup;\nmodule.link(\"../../collection/waterBillingSetup\", {\n  WB_waterBillingSetup: function (v) {\n    WB_waterBillingSetup = v;\n  }\n}, 5);\nvar compoLang;\nmodule.link(\"../../../both/i18n/lang/elem-label\", {\n  \"default\": function (v) {\n    compoLang = v;\n  }\n}, 6);\nvar Pos_InvoiceReact;\nmodule.link(\"../../collection/posInvoice\", {\n  Pos_InvoiceReact: function (v) {\n    Pos_InvoiceReact = v;\n  }\n}, 7);\nmodule.exportDefault({\n  meteor: {\n    langSession: function () {\n      return Session.get('lang') || \"en\";\n    },\n    disabledRemove: function () {\n      return Session.get(\"canRemove\");\n    },\n    disabledUpdate: function () {\n      return Session.get(\"canUpdate\");\n    }\n  },\n  components: {\n    draggable: draggable\n  },\n  data: function () {\n    return {\n      keyCode: [],\n      refForm: 'posSaleRestaurantFormAdd',\n      multipleSelection: [],\n      posInvoiceId: \"\",\n      loading: false,\n      searchData: '',\n      isSearching: false,\n      typeDiscount: \"\",\n      categoryData: [],\n      productData: [],\n      productDataAll: [],\n      currencySymbol: \"\",\n      posSaleRestaurantData: [],\n      dialogPayMoney: false,\n      posSaleRestaurantForm: {\n        itemId: \"\",\n        itemName: \"\",\n        price: 0,\n        qty: 0,\n        amount: 0,\n        total: 0,\n        netTotal: 0,\n        balanceUnPaid: 0,\n        paid: 0,\n        invoiceDate: moment().toDate(),\n        dueDate: moment().add(1, \"month\").toDate(),\n        invoiceNo: \"\",\n        note: \"\",\n        discountType: \"Amount\",\n        discount: 0,\n        discountValue: 0,\n        termId: \"\",\n        address: \"\",\n        customerId: \"\",\n        isRetail: true,\n        paidUSD: 0,\n        paidKHR: 0,\n        paidTHB: 0,\n        remainUSD: 0,\n        remainKHR: 0,\n        remainTHB: 0,\n        unit1: 1,\n        unit2: 1,\n        totalUnit: 1,\n        desc: \"\",\n        tableId: \"\",\n        locationId: \"\",\n        rawQty: 0,\n        isReceiveAll: false,\n        balanceNotCut: 0,\n        balanceNotCutFull: 0,\n        code: \"\"\n      },\n      // Options\n      itemOption: [],\n      customerOption: [],\n      termOption: [],\n      dialog: true,\n      notifications: false,\n      sound: true,\n      widgets: false,\n      labelPosition: \"top\",\n      options: {\n        disabledDate: function (time) {\n          return false;\n        }\n      },\n      disabledDate: false,\n      closeDate: \"\",\n      type: \"\",\n      posSaleRestaurantDetail: {},\n      discountTypeOption: [{\n        label: \"amountDiscount\",\n        value: \"Amount\"\n      }, {\n        label: \"percent\",\n        value: \"Percent\"\n      }],\n      tableOption: [],\n      disabledItem: true,\n      timeStamp: [],\n      takeBarcode: '',\n      skip: 0,\n      waterBillingSetup: {},\n      username: Meteor.user().username,\n      todaySt: \"\",\n      timeSt: \"\",\n      isCategoryData: false,\n      qty: 0,\n      tableName: \"\"\n    };\n  },\n  mounted: function () {\n    var _this = this;\n\n    this.$jQuery('body').off();\n    var vm = this;\n    vm.options = {\n      disabledDate: function (time) {\n        var min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n        return time.getTime() < min;\n      }\n    };\n    var elem = this.$jQuery('.pos_SaleRestaurant');\n\n    var checkEvent = $._data($('body').get(0), 'events');\n\n    if (checkEvent.keyup.length <= 1) {\n      this.$nextTick(function () {\n        _this.$jQuery('body').on('keydown', elem, _this.inputHandler);\n      });\n    }\n\n    this.$jQuery('body').on('focus', 'input[type=number]', function (e) {\n      $(this).on('wheel', function (e) {\n        e.preventDefault();\n      });\n    });\n    this.time();\n  },\n  watch: {\n    \"posSaleRestaurantForm.invoiceDate\": function (val) {\n      var vm = this;\n\n      if (vm.dialogUpdatePosSaleRestaurant === false) {\n        vm.posSaleRestaurantForm.posSaleRestaurantDate = val;\n      }\n\n      if (vm.closeDate && vm.closeDate !== \"\" && vm.closeDate !== undefined) {\n        vm.options = {\n          disabledDate: function (time) {\n            var min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n            return time.getTime() < min;\n          }\n        };\n      } else {\n        vm.options = {\n          disabledDate: function (time) {\n            return false;\n          }\n        };\n      }\n\n      if (this.$refs[\"posSaleRestaurantFormAdd\"]) {\n        this.getVoucherByRoleAndDate(val);\n      }\n    },\n    dialogUpdatePosSaleRestaurant: function (val) {\n      if (val) {\n        this._inputMaskPosSaleRestaurant();\n      }\n    },\n    \"posSaleRestaurantForm.discount\": function (val) {\n      if (val || val === 0) {\n        this.posSaleRestaurantForm.discount = val; // this.posSaleRestaurantForm.discount = this.$_numeral(val).format(\"0,00\");\n\n        this.getTotal();\n      }\n    },\n    \"posSaleRestaurantForm.discountType\": function (val) {\n      if (val) {\n        this.posSaleRestaurantForm.discountType = val;\n        this.getTotal();\n      }\n    },\n    \"posSaleRestaurantForm.tableId\": function (val) {\n      this.findInvoiceActiveByTableId(val);\n    }\n  },\n  methods: {\n    clickTHB: function (val) {\n      this.posSaleRestaurantForm.paidTHB = this.$_numeral(val).value();\n      this.getTotal();\n    },\n    clickUSD: function (val) {\n      this.posSaleRestaurantForm.paidUSD = this.$_numeral(val).value();\n      this.getTotal();\n    },\n    clickKHR: function (val) {\n      this.posSaleRestaurantForm.paidKHR = this.$_numeral(val).value();\n      this.getTotal();\n    },\n    goToTableBoard: function () {\n      FlowRouter.go(\"/pos-sale/posTableBoard\");\n    },\n    time: function () {\n      var self = this;\n      this.todaySt = moment().format(\"DD/MM/YYYY\");\n      this.timeSt = moment().format(\"hh:mm:ss\");\n      setTimeout(self.time, 1000);\n    },\n    _inputMaskPosSaleRestaurant: function () {\n      /*setTimeout(() => {\n          if ($(\".el-inputAmount\").length) {\n              new this.$_Cleave('.el-inputAmount', {\n                  numeral: true,\n                  numeralThousandsGroupStyle: 'thousand'\n              });\n          }\n           if ($(\".el-inputDR\").length) {\n              new this.$_Cleave('.el-inputDR', {\n                  numeral: true,\n                  numeralThousandsGroupStyle: 'thousand'\n              });\n          }\n           if ($(\".el-inputCR\").length) {\n              new this.$_Cleave('.el-inputCR', {\n                  numeral: true,\n                  numeralThousandsGroupStyle: 'thousand'\n              });\n          }\n        }, 200)*/\n    },\n    inputHandler: function (e) {\n      var vm = this;\n\n      if (e.data.init(0).selector === \".pos_SaleRestaurant\") {\n        if (vm.dialogPayMoney === false) {\n          if (e.keyCode === 13 && e.ctrlKey) {\n            e.preventDefault();\n            vm.savePosSaleRestaurant(false, e, false);\n          } else if (e.keyCode === 27 && !e.ctrlKey && !e.altKey) {\n            e.preventDefault();\n            vm.resetForm();\n          } else if (e.keyCode === 107 && !e.ctrlKey && !e.altKey) {\n            e.preventDefault();\n            vm.dialogPayMoney = true;\n          }\n        } else {\n          if (e.keyCode === 13) {\n            e.preventDefault();\n            vm.savePosSaleRestaurant(false, e, true);\n          }\n        }\n      }\n    },\n\n    /* barcodeScanSaleRestaurant(e) {\n         if (this.dialogAddPosSaleRestaurant === true || this.dialogUpdatePosSaleRestaurant === true) {\n             let scannerSensitivity = 100;\n             if (e.keyCode !== 13 && !isNaN(e.key)) {\n                 this.takeBarcode += e.key;\n             }\n             this.timeStamp.push(Date.now());\n             if (this.timeStamp.length > 1) {\n                 if (this.timeStamp[1] - this.timeStamp[0] >= scannerSensitivity) {\n                     this.takeBarcode = '';\n                     this.timeStamp = [];\n                 } else {\n                     if (e.keyCode === 13) {\n                         this.posSaleRestaurantForm.code = this.takeBarcode;\n                         this.addToPosSaleRestaurantData(null);\n                         this.timeStamp = [];\n                         this.takeBarcode = ''\n                     }\n                 }\n             }\n         }\n     },*/\n    itemOpt: function (query) {\n      var _this2 = this;\n\n      if (!!query) {\n        setTimeout(function () {\n          Meteor.call('queryItemOption', query, function (err, result) {\n            if (!err) {\n              _this2.itemOption = result;\n            } else {\n              console.log(err.message);\n            }\n          });\n        }, 200);\n      } else {\n        Meteor.call('queryItemOption', \"\", function (err, result) {\n          if (!err) {\n            _this2.itemOption = result;\n          } else {\n            console.log(err.message);\n          }\n        });\n      }\n    },\n    queryCategory: function () {\n      var _this3 = this;\n\n      var selector = {\n        q: \"\",\n        filter: \"\",\n        options: {\n          skip: 0,\n          limit: 100\n        }\n      };\n      Meteor.call('queryPosCategory', selector, function (err, result) {\n        _this3.categoryData = result.content;\n        _this3.isCategoryData = result.content.length > 0 ? true : false;\n      });\n    },\n    queryProduct: function () {\n      var _this4 = this;\n\n      Meteor.call('queryPosProductAll', function (err, result) {\n        _this4.productDataAll = result;\n      });\n    },\n    queryProductByCategoryId: function (categoryId) {\n      var findProduct = function (element) {\n        if (element.categoryId === categoryId) {\n          return element;\n        }\n      };\n\n      var pro = this.productDataAll.filter(findProduct);\n      this.productData = pro;\n    },\n    tableOpt: function () {\n      var _this5 = this;\n\n      Meteor.call('queryTableOption', Session.get(\"area\"), function (err, result) {\n        _this5.tableOption = result;\n      });\n    },\n    customerOpt: function (query) {\n      var _this6 = this;\n\n      if (!!query) {\n        setTimeout(function () {\n          var lists = [];\n          Meteor.call('queryPosCustomerOption', query, Session.get(\"area\"), function (err, result) {\n            if (!err) {\n              _this6.customerOption = result;\n            } else {\n              console.log(err.message);\n            }\n          });\n        }, 200);\n      } else {\n        Meteor.call('queryPosCustomerOption', \"\", Session.get(\"area\"), function (err, result) {\n          if (!err) {\n            _this6.customerOption = result;\n          } else {\n            console.log(err.message);\n          }\n        });\n      }\n    },\n    termOpt: function () {\n      var _this7 = this;\n\n      var selector = {};\n      Meteor.call('queryPosTermOption', selector, function (err, result) {\n        _this7.termOption = result;\n      });\n    },\n\n    /*checkValidatedNumber() {\n        let charCode = (val.which) ? val.which : val.keyCode;\n        if ($(val.currentTarget).val().indexOf('.') != -1) {\n            if (charCode == 46) {\n                return false;\n            }\n        }\n        return !(charCode != 46 && charCode > 31 && (charCode < 48 || charCode > 57));\n     },*/\n    savePosSaleRestaurant: function (isCloseDialog, event, isPrint) {\n      var _this8 = this;\n\n      event.preventDefault();\n      var vm = this;\n      this.$refs[\"posSaleRestaurantFormAdd\"].validate(function (valid) {\n        if (valid) {\n          var posSaleRestaurantDoc = {\n            total: vm.$_numeral(vm.posSaleRestaurantForm.total).value(),\n            netTotal: vm.$_numeral(vm.posSaleRestaurantForm.netTotal).value(),\n            balanceUnPaid: vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value(),\n            paid: vm.$_numeral(vm.posSaleRestaurantForm.netTotal).value() - vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value(),\n            paidUSD: vm.$_numeral(vm.posSaleRestaurantForm.paidUSD).value(),\n            paidKHR: vm.$_numeral(vm.posSaleRestaurantForm.paidKHR).value(),\n            paidTHB: vm.$_numeral(vm.posSaleRestaurantForm.paidTHB).value(),\n            remainUSD: vm.$_numeral(vm.posSaleRestaurantForm.remainUSD).value(),\n            remainKHR: vm.$_numeral(vm.posSaleRestaurantForm.remainKHR).value(),\n            remainTHB: vm.$_numeral(vm.posSaleRestaurantForm.remainTHB).value(),\n            invoiceDate: moment(vm.posSaleRestaurantForm.invoiceDate).toDate(),\n            invoiceDateName: moment(vm.posSaleRestaurantForm.invoiceDate).format(\"DD/MM/YYYY\"),\n            dueDate: moment(vm.posSaleRestaurantForm.dueDate).toDate(),\n            invoiceNo: vm.posSaleRestaurantForm.invoiceNo,\n            note: vm.posSaleRestaurantForm.note,\n            discountType: vm.posSaleRestaurantForm.discountType,\n            discount: vm.$_numeral(vm.posSaleRestaurantForm.discount).value(),\n            discountValue: vm.$_numeral(vm.posSaleRestaurantForm.discountValue).value(),\n            termId: \"001\",\n            address: vm.posSaleRestaurantForm.address,\n            rolesArea: Session.get('area'),\n            paymentNumber: 1,\n            customerId: \"001\",\n            tableId: vm.posSaleRestaurantForm.tableId,\n            locationId: \"001\",\n            status: vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value() === 0 ? \"Complete\" : vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value() < vm.$_numeral(vm.posSaleRestaurantForm.netTotal).value() ? \"Partial\" : \"Active\"\n          };\n          posSaleRestaurantDoc.item = vm.posSaleRestaurantData;\n\n          if (vm.posSaleRestaurantData.length === 0) {\n            return false;\n          }\n\n          if (vm.posInvoiceId === \"\") {\n            Meteor.call(\"insertPosInvoice\", posSaleRestaurantDoc, function (err, result) {\n              if (!err) {\n                if (isPrint) {\n                  FlowRouter.go('/pos-data/posInvoiceSmallRestaurant/print?inv=' + result);\n                } else {\n                  vm.$message({\n                    duration: 1000,\n                    message: _this8.langConfig['saveSuccess'],\n                    type: 'success'\n                  });\n                  Meteor.call(\"updatePosTableStatus\", vm.posSaleRestaurantForm.tableId, true);\n                  FlowRouter.go(\"/pos-sale/posTableBoard\");\n                }\n\n                vm.getVoucherByRoleAndDate(moment().toDate());\n                vm.queryProduct();\n                vm.queryProductByCategoryId();\n                Session.set(\"transactionActionNumber\", (Session.get(\"transactionActionNumber\") || 0) + 1);\n                vm.resetForm();\n                vm.dialogPayMoney = false;\n              } else {\n                vm.$notify.error({\n                  duration: 5000,\n                  title: 'Error',\n                  message: err.error\n                });\n                /*vm.$message({\n                    type: 'error',\n                    message: err.error\n                });*/\n              }\n            });\n          } else {\n            Meteor.call(\"updatePosInvoice\", posSaleRestaurantDoc, vm.posInvoiceId, function (err, result) {\n              if (!err) {\n                if (isPrint) {\n                  FlowRouter.go('/pos-data/posInvoiceSmallRestaurant/print?inv=' + vm.posInvoiceId);\n                } else {\n                  vm.$message({\n                    duration: 1000,\n                    message: _this8.langConfig['saveSuccess'],\n                    type: 'success'\n                  });\n                  Meteor.call(\"updatePosTableStatus\", vm.posSaleRestaurantForm.tableId, true);\n                  FlowRouter.go(\"/pos-sale/posTableBoard\");\n                }\n\n                vm.getVoucherByRoleAndDate(moment().toDate());\n                vm.queryProduct();\n                vm.queryProductByCategoryId();\n                Session.set(\"transactionActionNumber\", (Session.get(\"transactionActionNumber\") || 0) + 1);\n                vm.resetForm();\n                vm.dialogPayMoney = false;\n              } else {\n                vm.$notify.error({\n                  duration: 5000,\n                  title: 'Error',\n                  message: err.error\n                });\n              }\n            });\n          }\n        }\n      });\n    },\n    getVoucherByRoleAndDate: function (date) {\n      var vm = this;\n      Meteor.call(\"pos_getInvoiceNoByRoleAndDate\", Session.get(\"area\"), date, function (err, result) {\n        if (!err) {\n          vm.posSaleRestaurantForm.invoiceNo = result;\n        }\n      });\n    },\n    addToPosSaleRestaurantData: function (val, data) {\n      var vm = this;\n      var isFound = vm.posSaleRestaurantData.find(function (element) {\n        return element.itemId === data._id && element.type === data.type;\n      });\n      var indProduct = vm.productData.findIndex(function (k) {\n        return k._id === data._id;\n      });\n      var indProductAll = vm.productDataAll.findIndex(function (k) {\n        return k._id === data._id;\n      });\n\n      if (data.type === \"S\") {\n        if (indProduct !== -1) {\n          vm.productData[indProduct].smallQty = val;\n          vm.productData[indProduct].qty = val;\n        }\n\n        vm.productDataAll[indProductAll].smallQty = val;\n        vm.productDataAll[indProductAll].qty = val;\n        vm.productDataAll[indProductAll].type = \"S\";\n        vm.productDataAll[indProductAll].disableInputQty = false;\n      } else if (data.type === \"L\") {\n        if (indProduct !== -1) {\n          vm.productData[indProduct].largeQty = val;\n          vm.productData[indProduct].qty = val;\n        }\n\n        vm.productDataAll[indProductAll].largeQty = val;\n        vm.productDataAll[indProductAll].qty = val;\n        vm.productDataAll[indProductAll].type = \"L\";\n        vm.productDataAll[indProductAll].disableInputQty = false;\n      }\n\n      if (isFound !== undefined) {\n        this.$message({\n          type: 'warning',\n          message: 'កែប្រែចំនួន!'\n        });\n        var ind = vm.posSaleRestaurantData.findIndex(function (k) {\n          return k.itemId === data._id && k.type === data.type;\n        });\n        isFound.qty = val;\n        isFound.totalUnit = val;\n        isFound.amount = val * isFound.price;\n        vm.posSaleRestaurantData[ind] = isFound;\n\n        if (val === 0) {\n          vm.posSaleRestaurantData.splice(ind, 1);\n        }\n      } else {\n        vm.posSaleRestaurantData.push({\n          itemId: data._id,\n          itemName: data.name,\n          code: data.code,\n          unit1: 1,\n          unit2: 1,\n          totalUnit: val,\n          unitId: data.unitId,\n          unitName: data.unitName,\n          price: data.type === \"S\" ? vm.$_numeral(data.rePrice).value() : vm.$_numeral(data.whPrice).value(),\n          qty: val,\n          amount: data.type === \"S\" ? formatCurrency(data.rePrice * val) : formatCurrency(data.whPrice * val),\n          isRetail: true,\n          desc: \"\",\n          rawQty: 0,\n          type: data.type\n        });\n        vm.$message({\n          duration: 1000,\n          message: \"\\u1794\\u1793\\u17D2\\u1790\\u17C2\\u1798 \" + data.code + \" : \" + data.name + \" បានជោគជ័យ !\",\n          type: 'success'\n        });\n      }\n\n      this.getTotal();\n    },\n    updatePosSaleRestaurantDetail: function (row, index, val) {\n      var vm = this;\n      row.totalUnit = this.$_math.round(row.unit1 * row.unit2 * val, 2);\n      row.amount = formatCurrency(row.price * row.totalUnit);\n      row.qty = formatCurrency(val);\n      var indProduct = vm.productData.findIndex(function (k) {\n        return k._id === row.itemId;\n      });\n      var indProductAll = vm.productDataAll.findIndex(function (k) {\n        return k._id === row.itemId;\n      });\n\n      if (row.type === \"S\") {\n        if (indProduct !== -1) {\n          vm.productData[indProduct].smallQty = val;\n          vm.productData[indProduct].type = \"S\";\n        }\n\n        vm.productDataAll[indProductAll].smallQty = val;\n        vm.productDataAll[indProductAll].type = \"S\";\n      } else if (row.type === \"L\") {\n        if (indProduct !== -1) {\n          vm.productData[indProduct].largeQty = val;\n          vm.productData[indProduct].type = \"L\";\n        }\n\n        vm.productDataAll[indProductAll].largeQty = val;\n        vm.productDataAll[indProductAll].type = \"L\";\n      }\n\n      if (indProduct !== -1) {\n        vm.productData[indProduct].qty = val;\n      }\n\n      vm.productDataAll[indProductAll].qty = val;\n      vm.productDataAll[indProductAll].disableInputQty = row.type !== \"\" ? false : true;\n\n      if (indProduct !== -1) {\n        vm.productData[indProduct].disableInputQty = row.type !== \"\" ? false : true;\n      }\n\n      this.posSaleRestaurantData[index] = row;\n\n      if (val === 0) {\n        this.posSaleRestaurantData.splice(index, 1);\n      }\n\n      this.getTotal();\n    },\n    clearZero: function (event) {\n      /*debugger;\n      $(event.currentTarget).select();\n      console.log(event);*/\n    },\n    cancel: function () {\n      this.resetForm();\n      this.$message({\n        type: 'info',\n        message: this.langConfig['cancel']\n      });\n    },\n    resetForm: function () {\n      this.posSaleRestaurantData = [];\n      this.posSaleRestaurantForm.discountValue = 0;\n      this.posSaleRestaurantForm.code = \"\";\n      this.posSaleRestaurantForm.paidUSD = 0;\n      this.posSaleRestaurantForm.paidKHR = 0;\n      this.posSaleRestaurantForm.paidTHB = 0;\n      this.posSaleRestaurantForm.discount = 0;\n      this.posSaleRestaurantForm.customerId = \"\";\n      this.posSaleRestaurantForm.tableId = \"\";\n      this.posSaleRestaurantForm.balanceNotCut = 0;\n      this.posInvoiceId = \"\";\n\n      if (this.$refs[\"posSaleRestaurantFormAdd\"]) {\n        this.$refs[\"posSaleRestaurantFormAdd\"].resetFields();\n      }\n\n      this.queryProduct();\n      this.queryProductByCategoryId(\"\");\n      this.getTotal();\n    },\n    getTotal: function () {\n      var vm = this;\n      var total = 0;\n      vm.posSaleRestaurantData.forEach(function (obj) {\n        total += parseFloat(vm.$_numeral(obj.amount).value());\n      });\n\n      if (total >= vm.$_numeral(vm.posSaleRestaurantForm.balanceNotCutFull).value()) {\n        vm.posSaleRestaurantForm.balanceNotCut = vm.posSaleRestaurantForm.balanceNotCutFull;\n      } else {\n        vm.posSaleRestaurantForm.balanceNotCut = formatCurrency(total);\n      }\n\n      var companyDoc = WB_waterBillingSetup.findOne({});\n      vm.posSaleRestaurantForm.total = formatCurrencyLast(total, companyDoc.baseCurrency);\n\n      if (vm.posSaleRestaurantForm.discountType === \"Amount\") {\n        vm.posSaleRestaurantForm.netTotal = formatCurrencyLast(total - vm.posSaleRestaurantForm.discount, companyDoc.baseCurrency);\n        vm.posSaleRestaurantForm.balanceUnPaid = formatCurrencyLast(total - vm.posSaleRestaurantForm.discount - vm.$_numeral(vm.posSaleRestaurantForm.balanceNotCut).value() - GeneralFunction.exchange(\"USD\", companyDoc.baseCurrency, vm.posSaleRestaurantForm.paidUSD, Session.get(\"area\")) - GeneralFunction.exchange(\"KHR\", companyDoc.baseCurrency, vm.posSaleRestaurantForm.paidKHR, Session.get(\"area\")) - GeneralFunction.exchange(\"THB\", companyDoc.baseCurrency, vm.posSaleRestaurantForm.paidTHB, Session.get(\"area\")), companyDoc.baseCurrency);\n        vm.posSaleRestaurantForm.remainUSD = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"USD\", vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value(), Session.get(\"area\")), \"USD\");\n        vm.posSaleRestaurantForm.remainKHR = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"KHR\", vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value(), Session.get(\"area\")), \"KHR\");\n        vm.posSaleRestaurantForm.remainTHB = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"THB\", vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value(), Session.get(\"area\")), \"THB\");\n        vm.posSaleRestaurantForm.discountValue = formatCurrencyLast(vm.posSaleRestaurantForm.discount, companyDoc.baseCurrency);\n        vm.posSaleRestaurantForm.balanceUnPaid = vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value() <= 0 ? 0 : vm.posSaleRestaurantForm.balanceUnPaid;\n        this.typeDiscount = getCurrencySymbolById(companyDoc.baseCurrency);\n      } else {\n        vm.posSaleRestaurantForm.netTotal = formatCurrencyLast(total - total * vm.posSaleRestaurantForm.discount / 100, companyDoc.baseCurrency);\n        vm.posSaleRestaurantForm.balanceUnPaid = formatCurrencyLast(total - total * vm.posSaleRestaurantForm.discount / 100 - GeneralFunction.exchange(\"USD\", companyDoc.baseCurrency, vm.posSaleRestaurantForm.paidUSD, Session.get(\"area\")) - GeneralFunction.exchange(\"KHR\", companyDoc.baseCurrency, vm.posSaleRestaurantForm.paidKHR, Session.get(\"area\")) - GeneralFunction.exchange(\"THB\", companyDoc.baseCurrency, vm.posSaleRestaurantForm.paidTHB, Session.get(\"area\")), companyDoc.baseCurrency);\n        vm.posSaleRestaurantForm.remainUSD = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"USD\", vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value(), Session.get(\"area\")), \"USD\");\n        vm.posSaleRestaurantForm.remainKHR = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"KHR\", vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value(), Session.get(\"area\")), \"KHR\");\n        vm.posSaleRestaurantForm.remainTHB = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"THB\", vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value(), Session.get(\"area\")), \"THB\");\n        vm.posSaleRestaurantForm.discountValue = formatCurrencyLast(total * vm.posSaleRestaurantForm.discount / 100, companyDoc.baseCurrency);\n        vm.posSaleRestaurantForm.balanceUnPaid = vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value() <= 0 ? 0 : vm.posSaleRestaurantForm.balanceUnPaid;\n        this.typeDiscount = \"%\";\n      }\n    },\n    printSaleRestaurant: function (data) {\n      if (data.transactionType === \"SaleRestaurant Sale Order\") {\n        FlowRouter.go('/pos-data/posSaleRestaurantReceiveItem/print?inv=' + data._id);\n      } else {\n        FlowRouter.go('/pos-data/posSaleRestaurant/print?inv=' + data._id);\n      }\n    },\n    handleChange: function (data, e) {\n      this.addToPosSaleRestaurantData(e, data);\n    },\n    handleClickBtn: function (data, btn, index) {\n      data.type = btn;\n      data.disableInputQty = data.type !== \"\" ? false : true;\n\n      if (data.type === \"S\") {\n        data.qty = data.smallQty === 0 ? 1 : data.smallQty;\n      } else if (data.type === \"L\") {\n        data.qty = data.largeQty === 0 ? 1 : data.largeQty;\n      }\n\n      this.addToPosSaleRestaurantData(data.qty, data);\n      this.productData[index] = data;\n    },\n    findInvoiceActiveByTableId: function (tableId) {\n      var _this9 = this;\n\n      var vm = this;\n      Meteor.call(\"queryInvoiceActiveByTableId\", tableId, function (err, result) {\n        if (result) {\n          vm.posSaleRestaurantData = [];\n          vm.posSaleRestaurantForm.discountValue = 0;\n          vm.posSaleRestaurantForm.paidUSD = 0;\n          vm.posSaleRestaurantForm.paidKHR = 0;\n          vm.posSaleRestaurantForm.paidTHB = 0;\n          vm.posSaleRestaurantForm.discount = 0;\n          vm.posSaleRestaurantForm.balanceNotCut = 0;\n          vm.posInvoiceId = result._id;\n          result.item.forEach(function (obj) {\n            if (obj) {\n              var data = vm.productDataAll.find(function (element) {\n                return element._id === obj.itemId;\n              });\n              data.type = obj.type;\n\n              if (data) {\n                vm.addToPosSaleRestaurantData(obj.qty, data);\n              }\n            }\n          });\n        } else if (tableId === \"\") {\n          _this9.posSaleRestaurantData = [];\n          _this9.posSaleRestaurantForm.discountValue = 0;\n          _this9.posSaleRestaurantForm.code = \"\";\n          _this9.posSaleRestaurantForm.paidUSD = 0;\n          _this9.posSaleRestaurantForm.paidKHR = 0;\n          _this9.posSaleRestaurantForm.paidTHB = 0;\n          _this9.posSaleRestaurantForm.discount = 0;\n          _this9.posSaleRestaurantForm.balanceNotCut = 0;\n          _this9.posInvoiceId = \"\";\n\n          _this9.queryProduct();\n\n          _this9.queryProductByCategoryId(\"\");\n\n          _this9.getTotal();\n        }\n      });\n    }\n  },\n  created: function () {\n    var _this10 = this;\n\n    this.isSearching = true;\n    this.getTotal();\n    this.queryCategory();\n    this.queryProduct();\n    this.tableOpt();\n    Meteor.subscribe('Pos_InvoiceReact');\n    this.getVoucherByRoleAndDate(moment().toDate());\n    this.posSaleRestaurantForm.tableId = FlowRouter.query.get('tableId');\n    Meteor.call(\"queryPosTableById\", this.posSaleRestaurantForm.tableId, function (err, result) {\n      if (result) {\n        _this10.tableName = result.name;\n      }\n    });\n    Meteor.call('getWaterBillingSetup', Session.get('area'), function (err, result) {\n      if (result) {\n        _this10.waterBillingSetup = result;\n        _this10.currencySymbol = getCurrencySymbolById(result.baseCurrency);\n      }\n    });\n  },\n  computed: {\n    langConfig: function () {\n      var _this11 = this;\n\n      var data = compoLang.filter(function (config) {\n        return config.lang === _this11.langSession;\n      })[0]['saleCoffee'];\n      return data;\n    }\n  }\n});","map":{"version":3,"sources":["/home/snr/Desktop/Project/activity/imports/vue/ui/posSaleRestaurant.vue"],"names":["draggable","module","link","v","formatCurrency","formatCurrencyLast","GeneralFunction","getCurrencySymbolById","WB_waterBillingSetup","compoLang","Pos_InvoiceReact","exportDefault","meteor","langSession","Session","get","disabledRemove","disabledUpdate","components","data","keyCode","refForm","multipleSelection","posInvoiceId","loading","searchData","isSearching","typeDiscount","categoryData","productData","productDataAll","currencySymbol","posSaleRestaurantData","dialogPayMoney","posSaleRestaurantForm","itemId","itemName","price","qty","amount","total","netTotal","balanceUnPaid","paid","invoiceDate","moment","toDate","dueDate","add","invoiceNo","note","discountType","discount","discountValue","termId","address","customerId","isRetail","paidUSD","paidKHR","paidTHB","remainUSD","remainKHR","remainTHB","unit1","unit2","totalUnit","desc","tableId","locationId","rawQty","isReceiveAll","balanceNotCut","balanceNotCutFull","code","itemOption","customerOption","termOption","dialog","notifications","sound","widgets","labelPosition","options","disabledDate","time","closeDate","type","posSaleRestaurantDetail","discountTypeOption","label","value","tableOption","disabledItem","timeStamp","takeBarcode","skip","waterBillingSetup","username","Meteor","user","todaySt","timeSt","isCategoryData","tableName","mounted","$jQuery","off","vm","min","getTime","elem","checkEvent","$","_data","keyup","length","$nextTick","on","inputHandler","e","preventDefault","watch","val","dialogUpdatePosSaleRestaurant","posSaleRestaurantDate","undefined","$refs","getVoucherByRoleAndDate","_inputMaskPosSaleRestaurant","getTotal","findInvoiceActiveByTableId","methods","clickTHB","$_numeral","clickUSD","clickKHR","goToTableBoard","FlowRouter","go","self","format","setTimeout","init","selector","ctrlKey","savePosSaleRestaurant","altKey","resetForm","itemOpt","query","call","err","result","console","log","message","queryCategory","q","filter","limit","content","queryProduct","queryProductByCategoryId","categoryId","findProduct","element","pro","tableOpt","customerOpt","lists","termOpt","isCloseDialog","event","isPrint","validate","valid","posSaleRestaurantDoc","invoiceDateName","rolesArea","paymentNumber","status","item","$message","duration","langConfig","set","$notify","error","title","date","addToPosSaleRestaurantData","isFound","find","_id","indProduct","findIndex","k","indProductAll","smallQty","disableInputQty","largeQty","ind","splice","push","name","unitId","unitName","rePrice","whPrice","updatePosSaleRestaurantDetail","row","index","$_math","round","clearZero","cancel","resetFields","forEach","obj","parseFloat","companyDoc","findOne","baseCurrency","exchange","printSaleRestaurant","transactionType","handleChange","handleClickBtn","btn","created","subscribe","computed","config","lang"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport draggable from 'vuedraggable';\nimport {formatCurrency} from \"../../../imports/api/methods/roundCurrency\";\nimport {formatCurrencyLast} from \"../../../imports/api/methods/roundCurrency\";\nimport {GeneralFunction} from \"../../../imports/api/methods/generalFunction\";\nimport {getCurrencySymbolById} from \"../../../imports/api/methods/roundCurrency\";\nimport {WB_waterBillingSetup} from \"../../collection/waterBillingSetup\";\n// require('cleave.js/dist/addons/cleave-phone.ac');\n// require('cleave.js/dist/addons/cleave-phone.{country}');\nimport compoLang from '../../../both/i18n/lang/elem-label'\nimport {Pos_InvoiceReact} from \"../../collection/posInvoice\";\n\nexport default {\n    meteor: {\n        langSession() {\n            return Session.get('lang') || \"en\";\n        },\n        disabledRemove() {\n            return Session.get(\"canRemove\");\n        },\n        disabledUpdate() {\n            return Session.get(\"canUpdate\");\n        }\n    },\n    components: {\n        draggable\n    },\n    data() {\n        return {\n            keyCode: [],\n            refForm: 'posSaleRestaurantFormAdd',\n            multipleSelection: [],\n            posInvoiceId: \"\",\n            loading: false,\n            searchData: '',\n            isSearching: false,\n            typeDiscount: \"\",\n            categoryData: [],\n            productData: [],\n            productDataAll: [],\n            currencySymbol: \"\",\n            posSaleRestaurantData: [],\n            dialogPayMoney: false,\n\n            posSaleRestaurantForm: {\n                itemId: \"\",\n                itemName: \"\",\n                price: 0,\n                qty: 0,\n                amount: 0,\n                total: 0,\n                netTotal: 0,\n                balanceUnPaid: 0,\n                paid: 0,\n                invoiceDate: moment().toDate(),\n                dueDate: moment().add(1, \"month\").toDate(),\n                invoiceNo: \"\",\n\n                note: \"\",\n\n                discountType: \"Amount\",\n                discount: 0,\n                discountValue: 0,\n                termId: \"\",\n                address: \"\",\n                customerId: \"\",\n\n                isRetail: true,\n                paidUSD: 0,\n                paidKHR: 0,\n                paidTHB: 0,\n\n                remainUSD: 0,\n                remainKHR: 0,\n                remainTHB: 0,\n                unit1: 1,\n                unit2: 1,\n                totalUnit: 1,\n                desc: \"\",\n                tableId: \"\",\n                locationId: \"\",\n                rawQty: 0,\n                isReceiveAll: false,\n                balanceNotCut: 0,\n                balanceNotCutFull: 0,\n                code: \"\"\n\n            },\n\n            // Options\n            itemOption: [],\n            customerOption: [],\n            termOption: [],\n\n            dialog: true,\n            notifications: false,\n            sound: true,\n            widgets: false,\n            labelPosition: \"top\",\n            options: {\n                disabledDate(time) {\n                    return false;\n                }\n            },\n            disabledDate: false,\n            closeDate: \"\",\n            type: \"\",\n            posSaleRestaurantDetail: {},\n            discountTypeOption: [\n                {label: \"amountDiscount\", value: \"Amount\"},\n                {label: \"percent\", value: \"Percent\"}\n            ],\n            tableOption: [],\n            disabledItem: true,\n            timeStamp: [],\n            takeBarcode: '',\n            skip: 0,\n            waterBillingSetup: {},\n            username: Meteor.user().username,\n            todaySt: \"\",\n            timeSt: \"\",\n            isCategoryData: false,\n            qty: 0,\n            tableName: \"\"\n        }\n    },\n    mounted() {\n        this.$jQuery('body').off();\n        let vm = this;\n        vm.options = {\n            disabledDate(time) {\n                let min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n                return time.getTime() < min;\n            }\n        };\n\n\n        let elem = this.$jQuery('.pos_SaleRestaurant');\n        let checkEvent = $._data($('body').get(0), 'events');\n        if (checkEvent.keyup.length <= 1) {\n            this.$nextTick(() => {\n                this.$jQuery('body').on('keydown', elem, this.inputHandler);\n            })\n        }\n        this.$jQuery('body').on('focus', 'input[type=number]', function(e) {\n            $(this).on('wheel', function(e) {\n                e.preventDefault();\n            });\n        });\n        this.time();\n    },\n    watch: {\n        \"posSaleRestaurantForm.invoiceDate\"(val) {\n            let vm = this;\n            if (vm.dialogUpdatePosSaleRestaurant === false) {\n                vm.posSaleRestaurantForm.posSaleRestaurantDate = val;\n            }\n            if (vm.closeDate && vm.closeDate !== \"\" && vm.closeDate !== undefined) {\n                vm.options = {\n                    disabledDate(time) {\n                        let min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n                        return time.getTime() < min;\n                    }\n                }\n            } else {\n                vm.options = {\n                    disabledDate(time) {\n                        return false;\n                    }\n                }\n            }\n            if (this.$refs[\"posSaleRestaurantFormAdd\"]) {\n                this.getVoucherByRoleAndDate(val);\n            }\n        },\n        dialogUpdatePosSaleRestaurant(val) {\n            if (val) {\n                this._inputMaskPosSaleRestaurant();\n            }\n        },\n        \"posSaleRestaurantForm.discount\"(val) {\n            if (val || val === 0) {\n                this.posSaleRestaurantForm.discount = val;\n                // this.posSaleRestaurantForm.discount = this.$_numeral(val).format(\"0,00\");\n                this.getTotal();\n\n            }\n        },\n        \"posSaleRestaurantForm.discountType\"(val) {\n            if (val) {\n                this.posSaleRestaurantForm.discountType = val;\n                this.getTotal();\n            }\n        },\n        \"posSaleRestaurantForm.tableId\"(val) {\n            this.findInvoiceActiveByTableId(val);\n        }\n    },\n    methods: {\n        clickTHB(val) {\n            this.posSaleRestaurantForm.paidTHB = this.$_numeral(val).value();\n            this.getTotal();\n        },\n        clickUSD(val) {\n            this.posSaleRestaurantForm.paidUSD = this.$_numeral(val).value();\n            this.getTotal();\n        },\n        clickKHR(val) {\n            this.posSaleRestaurantForm.paidKHR = this.$_numeral(val).value();\n            this.getTotal();\n        },\n        goToTableBoard() {\n            FlowRouter.go(\"/pos-sale/posTableBoard\");\n        },\n        time() {\n            let self = this;\n            this.todaySt = moment().format(\"DD/MM/YYYY\");\n            this.timeSt = moment().format(\"hh:mm:ss\");\n            setTimeout(self.time, 1000);\n        },\n        _inputMaskPosSaleRestaurant() {\n            /*setTimeout(() => {\n                if ($(\".el-inputAmount\").length) {\n                    new this.$_Cleave('.el-inputAmount', {\n                        numeral: true,\n                        numeralThousandsGroupStyle: 'thousand'\n                    });\n                }\n\n                if ($(\".el-inputDR\").length) {\n                    new this.$_Cleave('.el-inputDR', {\n                        numeral: true,\n                        numeralThousandsGroupStyle: 'thousand'\n                    });\n                }\n\n                if ($(\".el-inputCR\").length) {\n                    new this.$_Cleave('.el-inputCR', {\n                        numeral: true,\n                        numeralThousandsGroupStyle: 'thousand'\n                    });\n                }\n\n\n            }, 200)*/\n        },\n        inputHandler(e) {\n            let vm = this;\n            if (e.data.init(0).selector === \".pos_SaleRestaurant\") {\n                if (vm.dialogPayMoney === false) {\n                    if (e.keyCode === 13 && e.ctrlKey) {\n                        e.preventDefault();\n                        vm.savePosSaleRestaurant(false, e, false);\n                    } else if (e.keyCode === 27 && !e.ctrlKey && !e.altKey) {\n                        e.preventDefault();\n                        vm.resetForm();\n                    } else if (e.keyCode === 107 && !e.ctrlKey && !e.altKey) {\n                        e.preventDefault();\n                        vm.dialogPayMoney = true;\n                    }\n                } else {\n                    if (e.keyCode === 13) {\n                        e.preventDefault();\n                        vm.savePosSaleRestaurant(false, e, true);\n                    }\n                }\n            }\n\n        },\n        /* barcodeScanSaleRestaurant(e) {\n             if (this.dialogAddPosSaleRestaurant === true || this.dialogUpdatePosSaleRestaurant === true) {\n                 let scannerSensitivity = 100;\n                 if (e.keyCode !== 13 && !isNaN(e.key)) {\n                     this.takeBarcode += e.key;\n                 }\n                 this.timeStamp.push(Date.now());\n                 if (this.timeStamp.length > 1) {\n                     if (this.timeStamp[1] - this.timeStamp[0] >= scannerSensitivity) {\n                         this.takeBarcode = '';\n                         this.timeStamp = [];\n                     } else {\n                         if (e.keyCode === 13) {\n                             this.posSaleRestaurantForm.code = this.takeBarcode;\n                             this.addToPosSaleRestaurantData(null);\n                             this.timeStamp = [];\n                             this.takeBarcode = ''\n                         }\n                     }\n                 }\n             }\n         },*/\n        itemOpt(query) {\n            if (!!query) {\n                setTimeout(() => {\n                    Meteor.call('queryItemOption', query, (err, result) => {\n                        if (!err) {\n                            this.itemOption = result;\n                        } else {\n                            console.log(err.message);\n                        }\n                    })\n                }, 200);\n            } else {\n                Meteor.call('queryItemOption', \"\", (err, result) => {\n                    if (!err) {\n                        this.itemOption = result;\n                    } else {\n                        console.log(err.message);\n                    }\n                })\n            }\n        },\n        queryCategory() {\n            let selector = {\n                    q: \"\",\n                    filter: \"\",\n                    options: {\n                        skip: 0, limit: 100\n                    }\n                }\n            ;\n            Meteor.call('queryPosCategory', selector, (err, result) => {\n                this.categoryData = result.content;\n                this.isCategoryData = result.content.length > 0 ? true : false;\n            })\n        },\n        queryProduct() {\n            Meteor.call('queryPosProductAll', (err, result) => {\n                this.productDataAll = result;\n            })\n        },\n        queryProductByCategoryId(categoryId) {\n            let findProduct = function (element) {\n                if (element.categoryId === categoryId) {\n                    return element;\n                }\n            }\n            let pro = this.productDataAll.filter(findProduct);\n            this.productData = pro;\n        },\n        tableOpt() {\n            Meteor.call('queryTableOption',Session.get(\"area\"), (err, result) => {\n                this.tableOption = result;\n            })\n        },\n        customerOpt(query) {\n            if (!!query) {\n                setTimeout(() => {\n                    let lists = [];\n                    Meteor.call('queryPosCustomerOption', query,Session.get(\"area\"), (err, result) => {\n                        if (!err) {\n                            this.customerOption = result;\n                        } else {\n                            console.log(err.message);\n                        }\n                    })\n                }, 200);\n            } else {\n                Meteor.call('queryPosCustomerOption', \"\",Session.get(\"area\"), (err, result) => {\n                    if (!err) {\n                        this.customerOption = result;\n                    } else {\n                        console.log(err.message);\n                    }\n                })\n            }\n        },\n        termOpt() {\n            let selector = {};\n            Meteor.call('queryPosTermOption', selector, (err, result) => {\n                this.termOption = result;\n            })\n        },\n        /*checkValidatedNumber() {\n            let charCode = (val.which) ? val.which : val.keyCode;\n            if ($(val.currentTarget).val().indexOf('.') != -1) {\n                if (charCode == 46) {\n                    return false;\n                }\n            }\n            return !(charCode != 46 && charCode > 31 && (charCode < 48 || charCode > 57));\n\n        },*/\n        savePosSaleRestaurant(isCloseDialog, event, isPrint) {\n            event.preventDefault();\n            let vm = this;\n            this.$refs[\"posSaleRestaurantFormAdd\"].validate((valid) => {\n                if (valid) {\n                    let posSaleRestaurantDoc = {\n                        total: vm.$_numeral(vm.posSaleRestaurantForm.total).value(),\n                        netTotal: vm.$_numeral(vm.posSaleRestaurantForm.netTotal).value(),\n                        balanceUnPaid: vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value(),\n                        paid: vm.$_numeral(vm.posSaleRestaurantForm.netTotal).value() - vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value(),\n\n                        paidUSD: vm.$_numeral(vm.posSaleRestaurantForm.paidUSD).value(),\n                        paidKHR: vm.$_numeral(vm.posSaleRestaurantForm.paidKHR).value(),\n                        paidTHB: vm.$_numeral(vm.posSaleRestaurantForm.paidTHB).value(),\n\n                        remainUSD: vm.$_numeral(vm.posSaleRestaurantForm.remainUSD).value(),\n                        remainKHR: vm.$_numeral(vm.posSaleRestaurantForm.remainKHR).value(),\n                        remainTHB: vm.$_numeral(vm.posSaleRestaurantForm.remainTHB).value(),\n\n                        invoiceDate: moment(vm.posSaleRestaurantForm.invoiceDate).toDate(),\n                        invoiceDateName: moment(vm.posSaleRestaurantForm.invoiceDate).format(\"DD/MM/YYYY\"),\n                        dueDate: moment(vm.posSaleRestaurantForm.dueDate).toDate(),\n                        invoiceNo: vm.posSaleRestaurantForm.invoiceNo,\n\n                        note: vm.posSaleRestaurantForm.note,\n\n                        discountType: vm.posSaleRestaurantForm.discountType,\n\n\n                        discount: vm.$_numeral(vm.posSaleRestaurantForm.discount).value(),\n                        discountValue: vm.$_numeral(vm.posSaleRestaurantForm.discountValue).value(),\n                        termId: \"001\",\n                        address: vm.posSaleRestaurantForm.address,\n\n                        rolesArea: Session.get('area'),\n                        paymentNumber: 1,\n                        customerId: \"001\",\n                        tableId: vm.posSaleRestaurantForm.tableId,\n                        locationId: \"001\",\n                        status: vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value() === 0 ? \"Complete\" : vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value() < vm.$_numeral(vm.posSaleRestaurantForm.netTotal).value() ? \"Partial\" : \"Active\"\n                    };\n                    posSaleRestaurantDoc.item = vm.posSaleRestaurantData;\n                    if (vm.posSaleRestaurantData.length === 0) {\n                        return false;\n                    }\n                    if (vm.posInvoiceId === \"\") {\n                        Meteor.call(\"insertPosInvoice\", posSaleRestaurantDoc, (err, result) => {\n                            if (!err) {\n                                if (isPrint) {\n                                    FlowRouter.go('/pos-data/posInvoiceSmallRestaurant/print?inv=' + result);\n                                } else {\n                                    vm.$message({\n                                        duration: 1000,\n                                        message: this.langConfig['saveSuccess'],\n                                        type: 'success'\n                                    });\n                                    Meteor.call(\"updatePosTableStatus\", vm.posSaleRestaurantForm.tableId, true);\n                                    FlowRouter.go(\"/pos-sale/posTableBoard\");\n\n                                }\n\n                                vm.getVoucherByRoleAndDate(moment().toDate());\n                                vm.queryProduct();\n                                vm.queryProductByCategoryId();\n\n                                Session.set(\"transactionActionNumber\", (Session.get(\"transactionActionNumber\") || 0) + 1);\n\n                                vm.resetForm();\n                                vm.dialogPayMoney = false;\n\n\n                            } else {\n                                vm.$notify.error({\n                                    duration: 5000,\n                                    title: 'Error',\n                                    message: err.error\n                                });\n                                /*vm.$message({\n                                    type: 'error',\n                                    message: err.error\n                                });*/\n                            }\n                        })\n                    } else {\n                        Meteor.call(\"updatePosInvoice\", posSaleRestaurantDoc, vm.posInvoiceId, (err, result) => {\n                            if (!err) {\n                                if (isPrint) {\n                                    FlowRouter.go('/pos-data/posInvoiceSmallRestaurant/print?inv=' + vm.posInvoiceId);\n                                } else {\n                                    vm.$message({\n                                        duration: 1000,\n                                        message: this.langConfig['saveSuccess'],\n                                        type: 'success'\n                                    });\n                                    Meteor.call(\"updatePosTableStatus\", vm.posSaleRestaurantForm.tableId, true);\n                                    FlowRouter.go(\"/pos-sale/posTableBoard\");\n                                }\n                                vm.getVoucherByRoleAndDate(moment().toDate());\n                                vm.queryProduct();\n                                vm.queryProductByCategoryId();\n\n                                Session.set(\"transactionActionNumber\", (Session.get(\"transactionActionNumber\") || 0) + 1);\n                                vm.resetForm();\n                                vm.dialogPayMoney = false;\n\n\n                            } else {\n                                vm.$notify.error({\n                                    duration: 5000,\n                                    title: 'Error',\n                                    message: err.error\n                                });\n                            }\n                        })\n                    }\n\n                }\n            })\n\n\n        },\n\n        getVoucherByRoleAndDate(date) {\n            let vm = this;\n            Meteor.call(\"pos_getInvoiceNoByRoleAndDate\", Session.get(\"area\"), date, (err, result) => {\n                if (!err) {\n                    vm.posSaleRestaurantForm.invoiceNo = result;\n                }\n            })\n        },\n\n\n        addToPosSaleRestaurantData(val, data) {\n            let vm = this;\n            let isFound = vm.posSaleRestaurantData.find(function (element) {\n                return element.itemId === data._id && element.type === data.type;\n            });\n            let indProduct = vm.productData.findIndex(k => k._id === data._id);\n            let indProductAll = vm.productDataAll.findIndex(k => k._id === data._id);\n            if (data.type === \"S\") {\n                if (indProduct !== -1) {\n                    vm.productData[indProduct].smallQty = val;\n                    vm.productData[indProduct].qty = val;\n                }\n                vm.productDataAll[indProductAll].smallQty = val;\n                vm.productDataAll[indProductAll].qty = val;\n                vm.productDataAll[indProductAll].type = \"S\";\n                vm.productDataAll[indProductAll].disableInputQty = false;\n\n            } else if (data.type === \"L\") {\n                if (indProduct !== -1) {\n                    vm.productData[indProduct].largeQty = val;\n                    vm.productData[indProduct].qty = val;\n                }\n                vm.productDataAll[indProductAll].largeQty = val;\n                vm.productDataAll[indProductAll].qty = val;\n                vm.productDataAll[indProductAll].type = \"L\";\n                vm.productDataAll[indProductAll].disableInputQty = false;\n\n            }\n\n            if (isFound !== undefined) {\n                this.$message({\n                    type: 'warning',\n                    message: 'កែប្រែចំនួន!'\n                });\n\n                let ind = vm.posSaleRestaurantData.findIndex(k => k.itemId === data._id && k.type === data.type);\n                isFound.qty = val;\n                isFound.totalUnit = val;\n                isFound.amount = val * isFound.price;\n\n                vm.posSaleRestaurantData[ind] = isFound;\n                if (val === 0) {\n                    vm.posSaleRestaurantData.splice(ind, 1);\n                }\n\n            } else {\n                vm.posSaleRestaurantData.push({\n                    itemId: data._id,\n                    itemName: data.name,\n                    code: data.code,\n                    unit1: 1,\n                    unit2: 1,\n                    totalUnit: val,\n                    unitId: data.unitId,\n                    unitName: data.unitName,\n                    price: data.type === \"S\" ? vm.$_numeral(data.rePrice).value() : vm.$_numeral(data.whPrice).value(),\n                    qty: val,\n                    amount: data.type === \"S\" ? formatCurrency(data.rePrice * val) : formatCurrency(data.whPrice * val),\n                    isRetail: true,\n                    desc: \"\",\n                    rawQty: 0,\n                    type: data.type\n                });\n                vm.$message({\n                    duration: 1000,\n                    message: `បន្ថែម ` + data.code + \" : \" + data.name + \" បានជោគជ័យ !\",\n                    type: 'success'\n                });\n            }\n\n\n            this.getTotal();\n\n\n        }\n        ,\n        updatePosSaleRestaurantDetail(row, index, val) {\n            let vm = this;\n            row.totalUnit = this.$_math.round(row.unit1 * row.unit2 * val, 2);\n            row.amount = formatCurrency(row.price * row.totalUnit);\n            row.qty = formatCurrency(val);\n\n            let indProduct = vm.productData.findIndex(k => k._id === row.itemId);\n            let indProductAll = vm.productDataAll.findIndex(k => k._id === row.itemId);\n            if (row.type === \"S\") {\n                if (indProduct !== -1) {\n                    vm.productData[indProduct].smallQty = val;\n                    vm.productData[indProduct].type = \"S\";\n                }\n                vm.productDataAll[indProductAll].smallQty = val;\n                vm.productDataAll[indProductAll].type = \"S\";\n\n\n            } else if (row.type === \"L\") {\n                if (indProduct !== -1) {\n                    vm.productData[indProduct].largeQty = val;\n                    vm.productData[indProduct].type = \"L\";\n                }\n                vm.productDataAll[indProductAll].largeQty = val;\n                vm.productDataAll[indProductAll].type = \"L\";\n            }\n            if (indProduct !== -1) {\n                vm.productData[indProduct].qty = val;\n            }\n            vm.productDataAll[indProductAll].qty = val;\n\n            vm.productDataAll[indProductAll].disableInputQty = row.type !== \"\" ? false : true;\n            if (indProduct !== -1) {\n                vm.productData[indProduct].disableInputQty = row.type !== \"\" ? false : true;\n            }\n\n            this.posSaleRestaurantData[index] = row;\n            if (val === 0) {\n                this.posSaleRestaurantData.splice(index, 1);\n            }\n            this.getTotal();\n        }\n        ,\n        clearZero(event) {\n            /*debugger;\n            $(event.currentTarget).select();\n            console.log(event);*/\n        }\n        ,\n        cancel() {\n            this.resetForm();\n            this.$message({\n                type: 'info',\n                message: this.langConfig['cancel']\n            });\n        }\n        ,\n        resetForm() {\n            this.posSaleRestaurantData = [];\n            this.posSaleRestaurantForm.discountValue = 0;\n            this.posSaleRestaurantForm.code = \"\";\n            this.posSaleRestaurantForm.paidUSD = 0;\n            this.posSaleRestaurantForm.paidKHR = 0;\n            this.posSaleRestaurantForm.paidTHB = 0;\n            this.posSaleRestaurantForm.discount = 0;\n            this.posSaleRestaurantForm.customerId = \"\";\n            this.posSaleRestaurantForm.tableId = \"\";\n            this.posSaleRestaurantForm.balanceNotCut = 0;\n\n            this.posInvoiceId = \"\";\n            if (this.$refs[\"posSaleRestaurantFormAdd\"]) {\n                this.$refs[\"posSaleRestaurantFormAdd\"].resetFields();\n            }\n            this.queryProduct();\n            this.queryProductByCategoryId(\"\");\n            this.getTotal();\n\n        }\n        ,\n        getTotal() {\n            let vm = this;\n            let total = 0;\n            vm.posSaleRestaurantData.forEach(function (obj) {\n                total += parseFloat(vm.$_numeral(obj.amount).value());\n\n            });\n            if (total >= vm.$_numeral(vm.posSaleRestaurantForm.balanceNotCutFull).value()) {\n                vm.posSaleRestaurantForm.balanceNotCut = vm.posSaleRestaurantForm.balanceNotCutFull;\n            } else {\n                vm.posSaleRestaurantForm.balanceNotCut = formatCurrency(total);\n            }\n            let companyDoc = WB_waterBillingSetup.findOne({});\n            vm.posSaleRestaurantForm.total = formatCurrencyLast(total, companyDoc.baseCurrency);\n\n            if (vm.posSaleRestaurantForm.discountType === \"Amount\") {\n                vm.posSaleRestaurantForm.netTotal = formatCurrencyLast(total - vm.posSaleRestaurantForm.discount, companyDoc.baseCurrency);\n                vm.posSaleRestaurantForm.balanceUnPaid = formatCurrencyLast(total - vm.posSaleRestaurantForm.discount - vm.$_numeral(vm.posSaleRestaurantForm.balanceNotCut).value() - GeneralFunction.exchange(\"USD\", companyDoc.baseCurrency, vm.posSaleRestaurantForm.paidUSD, Session.get(\"area\")) - GeneralFunction.exchange(\"KHR\", companyDoc.baseCurrency, vm.posSaleRestaurantForm.paidKHR, Session.get(\"area\")) - GeneralFunction.exchange(\"THB\", companyDoc.baseCurrency, vm.posSaleRestaurantForm.paidTHB, Session.get(\"area\")), companyDoc.baseCurrency);\n\n                vm.posSaleRestaurantForm.remainUSD = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"USD\", vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value(), Session.get(\"area\")), \"USD\");\n                vm.posSaleRestaurantForm.remainKHR = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"KHR\", vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value(), Session.get(\"area\")), \"KHR\");\n                vm.posSaleRestaurantForm.remainTHB = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"THB\", vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value(), Session.get(\"area\")), \"THB\");\n                vm.posSaleRestaurantForm.discountValue = formatCurrencyLast(vm.posSaleRestaurantForm.discount, companyDoc.baseCurrency);\n\n                vm.posSaleRestaurantForm.balanceUnPaid = vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value() <= 0 ? 0 : vm.posSaleRestaurantForm.balanceUnPaid;\n                this.typeDiscount = getCurrencySymbolById(companyDoc.baseCurrency);\n            } else {\n                vm.posSaleRestaurantForm.netTotal = formatCurrencyLast(total - (total * vm.posSaleRestaurantForm.discount / 100), companyDoc.baseCurrency);\n                vm.posSaleRestaurantForm.balanceUnPaid = formatCurrencyLast(total - (total * vm.posSaleRestaurantForm.discount / 100) - GeneralFunction.exchange(\"USD\", companyDoc.baseCurrency, vm.posSaleRestaurantForm.paidUSD, Session.get(\"area\")) - GeneralFunction.exchange(\"KHR\", companyDoc.baseCurrency, vm.posSaleRestaurantForm.paidKHR, Session.get(\"area\")) - GeneralFunction.exchange(\"THB\", companyDoc.baseCurrency, vm.posSaleRestaurantForm.paidTHB, Session.get(\"area\")), companyDoc.baseCurrency);\n\n                vm.posSaleRestaurantForm.remainUSD = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"USD\", vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value(), Session.get(\"area\")), \"USD\");\n                vm.posSaleRestaurantForm.remainKHR = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"KHR\", vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value(), Session.get(\"area\")), \"KHR\");\n                vm.posSaleRestaurantForm.remainTHB = formatCurrencyLast(GeneralFunction.exchange(companyDoc.baseCurrency, \"THB\", vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value(), Session.get(\"area\")), \"THB\");\n                vm.posSaleRestaurantForm.discountValue = formatCurrencyLast((total * vm.posSaleRestaurantForm.discount / 100), companyDoc.baseCurrency);\n\n                vm.posSaleRestaurantForm.balanceUnPaid = vm.$_numeral(vm.posSaleRestaurantForm.balanceUnPaid).value() <= 0 ? 0 : vm.posSaleRestaurantForm.balanceUnPaid;\n                this.typeDiscount = \"%\";\n            }\n        },\n        printSaleRestaurant(data) {\n            if (data.transactionType === \"SaleRestaurant Sale Order\") {\n                FlowRouter.go('/pos-data/posSaleRestaurantReceiveItem/print?inv=' + data._id);\n            } else {\n                FlowRouter.go('/pos-data/posSaleRestaurant/print?inv=' + data._id);\n            }\n\n        },\n        handleChange(data, e) {\n            this.addToPosSaleRestaurantData(e, data);\n        },\n        handleClickBtn(data, btn, index) {\n            data.type = btn;\n            data.disableInputQty = data.type !== \"\" ? false : true;\n\n            if (data.type === \"S\") {\n                data.qty = data.smallQty === 0 ? 1 : data.smallQty;\n            } else if (data.type === \"L\") {\n                data.qty = data.largeQty === 0 ? 1 : data.largeQty;\n            }\n            this.addToPosSaleRestaurantData(data.qty, data);\n            this.productData[index] = data;\n        },\n        findInvoiceActiveByTableId(tableId) {\n            let vm = this;\n            Meteor.call(\"queryInvoiceActiveByTableId\", tableId, (err, result) => {\n                if (result) {\n                    vm.posSaleRestaurantData = [];\n                    vm.posSaleRestaurantForm.discountValue = 0;\n                    vm.posSaleRestaurantForm.paidUSD = 0;\n                    vm.posSaleRestaurantForm.paidKHR = 0;\n                    vm.posSaleRestaurantForm.paidTHB = 0;\n                    vm.posSaleRestaurantForm.discount = 0;\n                    vm.posSaleRestaurantForm.balanceNotCut = 0;\n                    vm.posInvoiceId = result._id;\n                    result.item.forEach((obj) => {\n                        if (obj) {\n                            let data = vm.productDataAll.find(function (element) {\n                                return element._id === obj.itemId;\n                            });\n                            data.type = obj.type;\n                            if (data) {\n                                vm.addToPosSaleRestaurantData(obj.qty, data);\n                            }\n                        }\n                    })\n                }\n                else if (tableId === \"\") {\n                    this.posSaleRestaurantData = [];\n                    this.posSaleRestaurantForm.discountValue = 0;\n                    this.posSaleRestaurantForm.code = \"\";\n                    this.posSaleRestaurantForm.paidUSD = 0;\n                    this.posSaleRestaurantForm.paidKHR = 0;\n                    this.posSaleRestaurantForm.paidTHB = 0;\n                    this.posSaleRestaurantForm.discount = 0;\n                    this.posSaleRestaurantForm.balanceNotCut = 0;\n                    this.posInvoiceId = \"\";\n                    this.queryProduct();\n                    this.queryProductByCategoryId(\"\");\n                    this.getTotal();\n                }\n            })\n        }\n    },\n    created() {\n        this.isSearching = true;\n        this.getTotal();\n        this.queryCategory();\n        this.queryProduct();\n        this.tableOpt();\n        Meteor.subscribe('Pos_InvoiceReact');\n        this.getVoucherByRoleAndDate(moment().toDate());\n        this.posSaleRestaurantForm.tableId = FlowRouter.query.get('tableId');\n        Meteor.call(\"queryPosTableById\", this.posSaleRestaurantForm.tableId, (err, result) => {\n            if (result) {\n                this.tableName = result.name;\n            }\n        });\n\n        Meteor.call('getWaterBillingSetup', Session.get('area'), (err, result) => {\n            if (result) {\n                this.waterBillingSetup = result;\n                this.currencySymbol = getCurrencySymbolById(result.baseCurrency);\n            }\n        })\n\n\n    },\n    computed: {\n        langConfig() {\n            let data = compoLang.filter(config => config.lang === this.langSession)[0]['saleCoffee'];\n            return data;\n        }\n    }\n}\n\n\n"]},"sourceType":"script","hash":"9dc29bd60d58558325aea2cae61bd0c78d62bccf"}
