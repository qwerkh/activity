{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/snr/Desktop/Project/activity/imports/vue/ui/accJournal.vue","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","dynamicImport",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"/home/snr/Desktop/Project/activity/imports/vue/ui/accJournal.vue","filename":"/home/snr/Desktop/Project/activity/imports/vue/ui/accJournal.vue","passPerPreset":false,"envName":"development","cwd":"/home/snr/Desktop/Project/activity","root":"/home/snr/Desktop/Project/activity","plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/snr/Desktop/Project/activity/imports/vue/ui/accJournal.vue","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"/home/snr/Desktop/Project/activity/imports/vue/ui/accJournal.vue"}},"code":"var draggable;\nmodule.link(\"vuedraggable\", {\n  \"default\": function (v) {\n    draggable = v;\n  }\n}, 0);\nvar compoLang;\nmodule.link(\"../../../both/i18n/lang/elem-label-acc\", {\n  \"default\": function (v) {\n    compoLang = v;\n  }\n}, 1);\nvar Acc_JournalReact;\nmodule.link(\"../../collection/accJournal\", {\n  Acc_JournalReact: function (v) {\n    Acc_JournalReact = v;\n  }\n}, 2);\nmodule.exportDefault({\n  meteor: {\n    langSession: function () {\n      return Session.get('lang') || \"en\";\n    },\n    disabledRemove: function () {\n      return Session.get(\"canRemove\");\n    },\n    disabledUpdate: function () {\n      return Session.get(\"canUpdate\");\n    },\n    newRe: function () {\n      var vm = this;\n      Acc_JournalReact.find({}).fetch();\n      vm.queryData(vm.searchData, vm.skip, vm.currentSize + vm.skip);\n    }\n  },\n  components: {\n    draggable: draggable\n  },\n  data: function () {\n    return {\n      newLoading: true,\n      fullscreen: true,\n      journalData: [],\n      journalDataDisplay: [],\n      multipleSelection: [],\n      journalId: \"\",\n      loading: false,\n      searchData: '',\n      isSearching: false,\n      currentPage: 1,\n      currentSize: 10,\n      count: 0,\n      dialogAddJournal: false,\n      dialogUpdateJournal: false,\n      dialogShowJournal: false,\n      dialogPaid: false,\n      journalForm: {\n        account: \"\",\n        dr: 0,\n        cr: 0,\n        journalDate: moment().toDate(),\n        currencyId: \"KHR\",\n        voucherId: \"\",\n        name: \"\",\n        memo: \"\",\n        totalDr: 0,\n        totalCr: 0,\n        totalAmount: 0,\n        amount: 0,\n        method: \"\"\n      },\n      rules: {\n        journalDate: [{\n          type: 'date',\n          required: true,\n          message: 'Please input Journal Date',\n          trigger: 'blur'\n        }],\n        currencyId: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Currency',\n          trigger: 'blur'\n        }],\n        voucherId: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Journal No',\n          trigger: 'blur'\n        }],\n        memo: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Memo',\n          trigger: 'blur'\n        }]\n      },\n      rulesPayment: {\n        journalDate: [{\n          type: 'date',\n          required: true,\n          message: 'Please input Journal Date',\n          trigger: 'blur'\n        }],\n        currencyId: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Currency',\n          trigger: 'blur'\n        }],\n        method: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Cash Method',\n          trigger: 'blur'\n        }],\n        voucherId: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Journal No',\n          trigger: 'blur'\n        }],\n        memo: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Memo',\n          trigger: 'blur'\n        }]\n      },\n      // Options\n      chartAccountDataOption: [],\n      dialog: true,\n      notifications: false,\n      sound: true,\n      widgets: false,\n      labelPosition: \"top\",\n      options: {\n        disabledDate: function (time) {\n          return false;\n        }\n      },\n      disabledDate: false,\n      closeDate: \"\",\n      methodOption: [],\n      type: \"\",\n      journalDetail: {},\n      skip: 0\n    };\n  },\n  mounted: function () {\n    var _this = this;\n\n    this.$jQuery('body').off();\n    var vm = this;\n    vm.options = {\n      disabledDate: function (time) {\n        var min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n        return time.getTime() < min;\n      }\n    };\n    var elem = this.$jQuery('el-dialog.dialogJournal');\n\n    var checkEvent = $._data($('body').get(0), 'events');\n\n    if (checkEvent.keyup.length <= 1) {\n      this.$nextTick(function () {\n        _this.$jQuery('body').on('keydown', elem, _this.inputHandler);\n      });\n    }\n\n    this.$jQuery('body').on('focus', 'input[type=number]', function (e) {\n      $(this).on('wheel', function (e) {\n        e.preventDefault();\n      });\n    });\n  },\n  watch: {\n    currentSize: function (val) {\n      this.isSearching = true;\n      this.skip = (this.currentPage - 1) * val;\n      this.queryData(this.searchData, this.skip, val + this.skip);\n    },\n    currentPage: function (val) {\n      this.isSearching = true;\n      this.skip = (val - 1) * this.currentSize;\n      this.queryData(this.searchData, this.skip, this.currentSize + this.skip);\n    },\n    searchData: function (val) {\n      this.isSearching = true;\n      this.skip = (this.currentPage - 1) * this.currentSize;\n      this.queryData(val, this.skip, this.currentSize + this.skip);\n    },\n    \"journalForm.journalDate\": function (val) {\n      var vm = this;\n\n      if (vm.dialogUpdateJournal == false) {\n        vm.journalForm.journalDate = val;\n        vm.autoIncreseVouchers(val);\n      }\n\n      if (vm.closeDate && vm.closeDate != \"\" && vm.closeDate != undefined) {\n        vm.options = {\n          disabledDate: function (time) {\n            var min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n            return time.getTime() < min;\n          }\n        };\n      } else {\n        vm.options = {\n          disabledDate: function (time) {\n            return false;\n          }\n        };\n      }\n    },\n    \"journalForm.currencyId\": function (val) {\n      if (this.dialogUpdateJournal == false) {\n        this.journalForm.currencyId = val;\n        this.autoIncreseVouchers();\n      }\n    },\n    dialogAddJournal: function (val) {\n      if (val) {\n        this._inputMaskJournal();\n      }\n    },\n    dialogUpdateJournal: function (val) {\n      if (val) {\n        this._inputMaskJournal();\n      }\n    },\n    \"journalForm.account\": function (val) {\n      if (val) {\n        this._inputMaskJournal();\n      }\n    },\n    \"journalForm.dr\": function (val) {\n      if (val) {\n        this.journalForm.cr = 0;\n      }\n    },\n    \"journalForm.cr\": function (val) {\n      if (val) {\n        this.journalForm.dr = 0;\n      }\n    },\n    \"journalForm.method\": function (val) {\n      if (val) {}\n    }\n  },\n  methods: {\n    handleSizeChange: function (val) {\n      this.currentSize = val;\n    },\n    handleCurrentChange: function (val) {\n      this.currentPage = val;\n    },\n    _inputMaskJournal: function () {\n      var _this2 = this;\n\n      setTimeout(function () {\n        if ($(\".el-inputAmount\").length) {\n          new _this2.$_Cleave('.el-inputAmount', {\n            numeral: true,\n            numeralThousandsGroupStyle: 'thousand'\n          });\n        }\n\n        if ($(\".el-inputDR\").length) {\n          new _this2.$_Cleave('.el-inputDR', {\n            numeral: true,\n            numeralThousandsGroupStyle: 'thousand'\n          });\n        }\n\n        if ($(\".el-inputCR\").length) {\n          new _this2.$_Cleave('.el-inputCR', {\n            numeral: true,\n            numeralThousandsGroupStyle: 'thousand'\n          });\n        }\n      }, 200);\n    },\n    queryData: _.debounce(function (val, skip, limit) {\n      var _this3 = this;\n\n      this.newLoading = true;\n      Meteor.call('queryJournal', {\n        q: val,\n        filter: this.filter,\n        rolesArea: Session.get('area'),\n        options: {\n          skip: skip || 0,\n          limit: limit || 10\n        }\n      }, function (err, result) {\n        if (!err) {\n          _this3.journalDataDisplay = result.content;\n          _this3.count = result.countJournal;\n        }\n\n        _this3.isSearching = false;\n        _this3.newLoading = false;\n      });\n    }, 300),\n    inputHandler: function (e) {\n      if (e.data.init(0).selector === \"el-dialog.dialogJournal\") {\n        var vm = this;\n\n        if (vm.dialogAddJournal === true) {\n          if (e.keyCode === 13 && e.ctrlKey && !e.altKey) {\n            e.preventDefault();\n            vm.saveJournal(true, e);\n          } else if (e.keyCode === 13 && e.ctrlKey && e.altKey) {\n            e.preventDefault();\n            vm.saveJournal(false, e);\n          }\n        } else if (vm.dialogPaid === true) {\n          if (e.keyCode === 13 && e.ctrlKey && !e.altKey) {\n            e.preventDefault();\n            vm.saveJournalPaid(true, e, vm.type);\n          } else if (e.keyCode === 13 && e.ctrlKey && e.altKey) {\n            e.preventDefault();\n            vm.saveJournalPaid(false, e, vm.type);\n          }\n        }\n\n        if (vm.dialogAddJournal === false && vm.dialogUpdateJournal === false && vm.dialogPaid === false) {\n          if (e.keyCode === 107 && !e.ctrlKey && !e.altKey) {\n            e.preventDefault();\n            vm.popupJournalAdd();\n            vm.dialogAddJournal = true;\n            vm.autoIncreseVouchers();\n            vm.resetForm();\n          }\n        }\n\n        if (e.keyCode === 27 && !e.ctrlKey && !e.altKey) {\n          e.preventDefault();\n          vm.dialogAddJournal = false;\n        }\n      }\n    },\n    chartAccountOption: function () {\n      var _this4 = this;\n\n      var selector = {};\n\n      if (this.accountTypeId !== \"\" && this.accountTypeId !== undefined) {\n        selector.accountTypeId = this.accountTypeId;\n      }\n\n      Meteor.call('queryChartAccountOption', selector, function (err, result) {\n        _this4.chartAccountDataOption = result;\n      });\n    },\n    chartAccountMethodOption: function () {\n      var _this5 = this;\n\n      var selector = {};\n\n      if (this.accountTypeId !== \"\" && this.accountTypeId !== undefined) {\n        selector.accountTypeId = this.accountTypeId;\n      }\n\n      Meteor.call('queryChartAccountMethodOption', selector, function (err, result) {\n        _this5.methodOption = result;\n      });\n    },\n    saveJournal: function (isCloseDialog, event) {\n      var _this6 = this;\n\n      event.preventDefault();\n      var vm = this;\n      var checkSubmit = this.checkDrCr();\n\n      if (checkSubmit === false || vm.journalData.length === 0) {\n        vm.$notify.error({\n          title: 'Error',\n          message: 'Dr and Cr is not balance!'\n        });\n        return false;\n      } else {\n        this.$refs[\"journalFormAdd\"].validate(function (valid) {\n          if (valid) {\n            var journalDoc = {\n              journalDate: vm.journalForm.journalDate,\n              journalDateName: moment(vm.journalForm.journalDate).format(\"DD/MM/YYYY\"),\n              voucherId: vm.journalForm.voucherId,\n              currencyId: vm.journalForm.currencyId,\n              name: vm.journalForm.name,\n              memo: vm.journalForm.memo,\n              total: vm.$_numeral(vm.journalForm.totalDr).value(),\n              rolesArea: Session.get('area')\n            };\n            journalDoc.transaction = vm.journalData;\n            Meteor.call(\"insertJournal\", journalDoc, function (err, result) {\n              if (!err) {\n                vm.$message({\n                  duration: 1000,\n                  message: \"Save Successfully!\",\n                  type: 'success'\n                });\n\n                if (isCloseDialog) {\n                  _this6.dialogAddJournal = false;\n                }\n\n                vm.resetForm();\n              }\n            });\n          }\n        });\n      }\n    },\n    saveJournalPaid: function (isCloseDialog, event, type, isPrint) {\n      var _this7 = this;\n\n      event.preventDefault();\n      var vm = this;\n      this.$refs[\"journalFormPayment\"].validate(function (valid) {\n        if (valid) {\n          var journalDoc = {\n            journalDate: vm.journalForm.journalDate,\n            journalDateName: moment(vm.journalForm.journalDate).format(\"DD/MM/YYYY\"),\n            voucherId: vm.journalForm.voucherId,\n            currencyId: vm.journalForm.currencyId,\n            name: vm.journalForm.name,\n            memo: vm.journalForm.memo,\n            total: vm.$_numeral(vm.journalForm.totalAmount).value(),\n            rolesArea: Session.get('area'),\n            method: vm.journalForm.method\n          };\n          journalDoc.transaction = vm.journalData;\n\n          if (journalDoc.transaction.length <= 0) {\n            vm.$message({\n              duration: 1000,\n              message: \"Add Payment Account!\",\n              type: 'error'\n            });\n            return false;\n          }\n\n          Meteor.call(\"insertJournalPaid\", journalDoc, type, function (err, result) {\n            if (!err) {\n              if (isPrint === true) {\n                FlowRouter.go('/acc-data/accPayment/print?inv=' + result);\n              } else {\n                vm.$message({\n                  duration: 1000,\n                  message: \"Save Successfully!\",\n                  type: 'success'\n                });\n              }\n\n              if (isCloseDialog) {\n                _this7.dialogPaid = false;\n              }\n\n              vm.resetForm();\n            }\n          });\n        }\n      });\n    },\n    printPaymentInvoice: function (journalId) {\n      FlowRouter.go('/acc-data/accPayment/print?inv=' + journalId);\n    },\n    updateJournal: function (id) {\n      event.preventDefault();\n      var vm = this;\n      var checkSubmit = vm.checkDrCr();\n\n      if (checkSubmit === false || vm.journalData.length === 0) {\n        vm.$notify.error({\n          title: 'Error',\n          message: 'Dr and Cr is not balance!'\n        });\n        return false;\n      } else {\n        vm.$refs[\"journalFormUpdate\"].validate(function (valid) {\n          if (valid) {\n            var journalDoc = {\n              journalDate: vm.journalForm.journalDate,\n              journalDateName: moment(vm.journalForm.journalDate).format(\"DD/MM/YYYY\"),\n              voucherId: vm.journalForm.voucherId,\n              currencyId: vm.journalForm.currencyId,\n              name: vm.journalForm.name,\n              memo: vm.journalForm.memo,\n              total: vm.$_numeral(vm.journalForm.totalDr).value(),\n              rolesArea: Session.get('area')\n            };\n            journalDoc.transaction = vm.journalData;\n            Meteor.call(\"updateJournal\", journalDoc, id, function (err, result) {\n              if (!err) {\n                vm.$message({\n                  duration: 1000,\n                  message: \"Save Successfully!\",\n                  type: 'success'\n                });\n                vm.dialogUpdateJournal = false;\n                vm.resetForm();\n              }\n            });\n          }\n        });\n      }\n    },\n    removeJournal: function (index, row, rows) {\n      var vm = this;\n\n      if (row.status == \"Normal\") {\n        Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n          if (re == undefined || re.closeDate.getTime() < row.journalDate.getTime()) {\n            vm.$confirm('This will permanently delete the Item. Continue?', 'Warning', {\n              confirmButtonText: 'OK',\n              cancelButtonText: 'Cancel',\n              type: 'warning'\n            }).then(function () {\n              Meteor.call(\"removeJournal\", row._id, function (err, result) {\n                if (!err) {\n                  rows.splice(index, 1);\n                  vm.$message({\n                    message: \"\\u179B\\u17BB\\u1794 \" + row.journalDateName + \"\\u200B : \" + row.voucherId + \" \\u1794\\u17B6\\u1793\\u1787\\u17C4\\u1782\\u1787\\u17D0\\u1799\",\n                    type: 'success'\n                  });\n                } else {\n                  vm.$message({\n                    type: 'error',\n                    message: 'Delete Fialed'\n                  });\n                }\n              });\n            }).catch(function () {\n              vm.$message({\n                type: 'info',\n                message: 'Delete canceled'\n              });\n            });\n          } else {\n            vm.$message({\n              duration: 1000,\n              message: \"You already Closing Entry!!\",\n              type: 'error'\n            });\n          }\n        });\n      } else {\n        vm.$message({\n          duration: 1000,\n          message: \"Not Normal State!!\",\n          type: 'error'\n        });\n      }\n    },\n    popupJournalAdd: function () {\n      var vm = this;\n      $(\".el-dialog__title\").text(\"Add Journal Entry\");\n      Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n        if (re != undefined) {\n          vm.closeDate = re.closeDate;\n        } else {\n          vm.closeDate = \"\";\n        }\n      });\n    },\n    popupJournalPayment: function () {\n      var vm = this;\n      vm.type = \"Payment\"; // $('#dialog').attr('title', 'New Title').dialog();\n\n      $(\".el-dialog__title\").text(\"Payment (Account)\");\n      vm.journalForm.method = \"\";\n      Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n        if (re != undefined) {\n          vm.closeDate = re.closeDate;\n        } else {\n          vm.closeDate = \"\";\n        }\n      });\n    },\n    popupJournalReceive: function () {\n      var vm = this;\n      vm.type = \"Receive\";\n      vm.journalForm.method = \"\"; // $('#dialog').attr('title', 'New Title').dialog();\n\n      $(\".el-dialog__title\").text(\"Receive (Account)\");\n      Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n        if (re !== undefined) {\n          vm.closeDate = re.closeDate;\n        } else {\n          vm.closeDate = \"\";\n        }\n      });\n    },\n    popupJournalUpdate: function (index, row, scope) {\n      var vm = this;\n      $(\".el-dialog__title\").text(\"Update Journal Entry\");\n\n      if (row.status === \"Normal\") {\n        Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n          if (re === undefined || re.closeDate.getTime() < row.journalDate.getTime()) {\n            vm.dialogUpdateJournal = true;\n            vm.findJournalById(scope);\n\n            if (re !== undefined) {\n              vm.closeDate = re.closeDate;\n            } else {\n              vm.closeDate = \"\";\n            }\n          } else {\n            vm.$message({\n              duration: 1000,\n              message: \"You already Closing Entry!!\",\n              type: 'error'\n            });\n            vm.dialogUpdateJournal = false;\n            vm.closeDate = \"\";\n          }\n        });\n      } else {\n        vm.closeDate = \"\";\n        this.$message({\n          duration: 1000,\n          message: \"Not Normal State!!\",\n          type: 'error'\n        });\n      }\n    },\n    popupJournalShow: function (row) {\n      var vm = this;\n      this.dialogShowJournal = true;\n      $(\".el-dialog__title\").text(\"Show Journal Entry\");\n      Meteor.call(\"queryJournalByIdShow\", row._id, function (err, result) {\n        if (result) {\n          vm.journalDetail = result;\n        } else {\n          console.log(err.message);\n        }\n      });\n    },\n    findJournalById: function (doc) {\n      var vm = this;\n      this.journalId = doc.row._id;\n      Meteor.call(\"queryJournalById\", doc.row._id, function (err, result) {\n        vm.journalData = [];\n\n        if (result) {\n          result.transaction.forEach(function (obj) {\n            Meteor.call(\"queryChartAccountById\", obj.account, function (err, data) {\n              vm.journalData.push({\n                account: obj.account,\n                accountName: data.code + \" : \" + data.name,\n                dr: obj.dr,\n                cr: obj.cr\n              });\n              vm.getTotalDrCr();\n            });\n          });\n          vm.journalForm.journalDate = result.journalDate;\n          vm.journalForm.currencyId = result.currencyId;\n          vm.journalForm.memo = result.memo;\n          vm.journalForm.name = result.name;\n          vm.journalForm.voucherId = result.voucherId.substr(8, 20);\n        }\n      });\n    },\n    addToJournalData: function () {\n      var vm = this;\n\n      if (vm.journalForm.account == \"\" || vm.journalForm.account == undefined) {\n        this.$message({\n          duration: 1000,\n          message: \"Account Can't Empty!!\",\n          type: 'error'\n        });\n        return false;\n      }\n\n      Meteor.call(\"queryChartAccountById\", vm.journalForm.account, function (err, data) {\n        if (data) {\n          vm.journalData.push({\n            account: vm.journalForm.account,\n            accountName: data.code + \" : \" + data.name,\n            dr: vm.$_numeral(vm.journalForm.dr).value(),\n            cr: vm.$_numeral(vm.journalForm.cr).value()\n          });\n          vm.journalForm.account = \"\";\n          vm.$message({\n            duration: 1000,\n            message: \"\\u1794\\u1793\\u17D2\\u1790\\u17C2\\u1798 \" + data.code + \" : \" + data.name + \" បានជោគជ័យ !\",\n            type: 'success'\n          });\n          vm.getTotalDrCr();\n        } else {\n          vm.$message({\n            duration: 1000,\n            message: \"មិនមានឈ្មេាះគណនីនេះឡើយ!!\",\n            type: 'error'\n          });\n        }\n      });\n    },\n    addToJournalPaymentReceiveData: function () {\n      var vm = this;\n\n      if (vm.journalForm.account == \"\" || vm.journalForm.account == undefined) {\n        this.$message({\n          duration: 1000,\n          message: \"Account Can't Empty!!\",\n          type: 'error'\n        });\n        return false;\n      }\n\n      Meteor.call(\"queryChartAccountById\", vm.journalForm.account, function (err, data) {\n        if (data) {\n          vm.journalData.push({\n            account: vm.journalForm.account,\n            accountName: data.code + \" : \" + data.name,\n            amount: vm.$_numeral(vm.journalForm.amount).value()\n          });\n          vm.journalForm.account = \"\";\n          vm.$message({\n            duration: 1000,\n            message: \"\\u1794\\u1793\\u17D2\\u1790\\u17C2\\u1798 \" + data.code + \" : \" + data.name + \" បានជោគជ័យ !\",\n            type: 'success'\n          });\n          vm.getTotalAmount();\n        } else {\n          vm.$message({\n            duration: 1000,\n            message: \"មិនមានឈ្មេាះគណនីនេះឡើយ!!\",\n            type: 'error'\n          });\n        }\n      });\n    },\n    removeJournalDetailByIndex: function (index, row) {\n      var _this8 = this;\n\n      this.$confirm('This will permanently delete the Item. Continue?', 'Warning', {\n        confirmButtonText: 'OK',\n        cancelButtonText: 'Cancel',\n        type: 'warning'\n      }).then(function () {\n        _this8.journalData.splice(index, 1);\n\n        _this8.$message({\n          message: \"\\u179B\\u17BB\\u1794 \" + row.accountName + \" \\u1794\\u17B6\\u1793\\u1787\\u17C4\\u1782\\u1787\\u17D0\\u1799\",\n          type: 'success'\n        });\n\n        _this8.getTotalDrCr();\n      }).catch(function () {\n        _this8.$message({\n          type: 'info',\n          message: 'Delete canceled'\n        });\n      });\n    },\n    updateJournalDetail: function (row, index) {\n      this.journalData[index] = row;\n      var newIndex = index + 1;\n      /*this.$message({\n          duration: 1000,\n          message: `Update Row Number ` + newIndex + \" Successfully !\",\n          type: 'success'\n      });*/\n\n      this.getTotalDrCr();\n    },\n    updateJournalDetailPaymentReceive: function (row, index) {\n      this.journalData[index] = row;\n      var newIndex = index + 1;\n      /*this.$message({\n          duration: 1000,\n          message: `Update Row Number ` + newIndex + \" Successfully !\",\n          type: 'success'\n      });*/\n\n      this.getTotalAmount();\n    },\n    cancel: function () {\n      this.$message({\n        type: 'info',\n        message: 'Canceled'\n      });\n    },\n    resetForm: function () {\n      this.journalData = [];\n      this.journalForm.method = \"\";\n\n      if (this.$refs[\"journalFormAdd\"]) {\n        this.$refs[\"journalFormAdd\"].resetFields();\n        this.getTotalDrCr();\n      }\n\n      if (this.$refs[\"journalFormUpdate\"]) {\n        this.$refs[\"journalFormUpdate\"].resetFields();\n        this.getTotalDrCr();\n      }\n\n      if (this.$refs[\"journalFormPayment\"]) {\n        this.$refs[\"journalFormPayment\"].resetFields();\n        this.getTotalAmount();\n      }\n\n      this.journalForm.name = \"\";\n      this.autoIncreseVouchers();\n    },\n    getTotalDrCr: function () {\n      var vm = this;\n      var totalDr = 0;\n      var totalCr = 0;\n      vm.journalData.forEach(function (obj) {\n        totalDr += parseFloat(obj.dr);\n        totalCr += parseFloat(obj.cr);\n      });\n      vm.journalForm.totalDr = this.$_numeral(totalDr).format(\"0,00.000\");\n      vm.journalForm.totalCr = this.$_numeral(totalCr).format(\"0,00.000\");\n      vm.setFormInputDrCr();\n    },\n    getTotalAmount: function () {\n      var vm = this;\n      var totalAmount = 0;\n      vm.journalData.forEach(function (obj) {\n        totalAmount += parseFloat(obj.amount);\n      });\n      vm.journalForm.totalAmount = this.$_numeral(totalAmount).format(\"0,00.000\");\n      vm.setFormInputAmount();\n    },\n    setFormInputDrCr: function () {\n      this.journalForm.dr = parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()) > 0 ? 0 : -(parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()));\n      this.journalForm.cr = parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()) > 0 ? parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()) : 0;\n\n      this._inputMaskJournal();\n    },\n    setFormInputAmount: function () {\n      var vm = this;\n      vm.journalForm.amount = 0;\n\n      vm._inputMaskJournal();\n    },\n    checkDrCr: function () {\n      var vm = this;\n\n      if (vm.$_numeral(vm.journalForm.totalDr).value() === vm.$_numeral(vm.journalForm.totalCr).value()) {\n        return true;\n      }\n\n      return false;\n    },\n    autoIncreseVouchers: function (val) {\n      var vm = this;\n\n      if (val) {\n        vm.journalForm.journalDate = val;\n      }\n\n      Meteor.call(\"autoIncreseVoucher\", Session.get('area'), vm.journalForm.journalDate, vm.journalForm.currencyId, function (err, result) {\n        if (!err) {\n          vm.journalForm.voucherId = (parseInt(result) + 1).toString();\n        }\n      });\n    }\n  },\n  created: function () {\n    this.isSearching = true;\n    this.chartAccountOption();\n    this.chartAccountMethodOption();\n    var q = FlowRouter.current().queryParams;\n\n    if (q && q._id) {\n      this.searchData = q._id;\n      this.queryData(q._id, this.skip, this.currentSize + this.skip);\n    } else {\n      this.queryData();\n    }\n\n    Meteor.subscribe('Acc_JournalReact');\n  },\n  computed: {\n    langConfig: function () {\n      var _this9 = this;\n\n      var data = compoLang.filter(function (config) {\n        return config.lang === _this9.langSession;\n      })[0]['journal'];\n      return data;\n    }\n  }\n});","map":{"version":3,"sources":["/home/snr/Desktop/Project/activity/imports/vue/ui/accJournal.vue"],"names":["draggable","module","link","v","compoLang","Acc_JournalReact","exportDefault","meteor","langSession","Session","get","disabledRemove","disabledUpdate","newRe","vm","find","fetch","queryData","searchData","skip","currentSize","components","data","newLoading","fullscreen","journalData","journalDataDisplay","multipleSelection","journalId","loading","isSearching","currentPage","count","dialogAddJournal","dialogUpdateJournal","dialogShowJournal","dialogPaid","journalForm","account","dr","cr","journalDate","moment","toDate","currencyId","voucherId","name","memo","totalDr","totalCr","totalAmount","amount","method","rules","type","required","message","trigger","rulesPayment","chartAccountDataOption","dialog","notifications","sound","widgets","labelPosition","options","disabledDate","time","closeDate","methodOption","journalDetail","mounted","$jQuery","off","min","add","getTime","elem","checkEvent","$","_data","keyup","length","$nextTick","on","inputHandler","e","preventDefault","watch","val","autoIncreseVouchers","undefined","_inputMaskJournal","methods","handleSizeChange","handleCurrentChange","setTimeout","$_Cleave","numeral","numeralThousandsGroupStyle","_","debounce","limit","Meteor","call","q","filter","rolesArea","err","result","content","countJournal","init","selector","keyCode","ctrlKey","altKey","saveJournal","saveJournalPaid","popupJournalAdd","resetForm","chartAccountOption","accountTypeId","chartAccountMethodOption","isCloseDialog","event","checkSubmit","checkDrCr","$notify","error","title","$refs","validate","valid","journalDoc","journalDateName","format","total","$_numeral","value","transaction","$message","duration","isPrint","FlowRouter","go","printPaymentInvoice","updateJournal","id","removeJournal","index","row","rows","status","re","$confirm","confirmButtonText","cancelButtonText","then","_id","splice","catch","text","popupJournalPayment","popupJournalReceive","popupJournalUpdate","scope","findJournalById","popupJournalShow","console","log","doc","forEach","obj","push","accountName","code","getTotalDrCr","substr","addToJournalData","addToJournalPaymentReceiveData","getTotalAmount","removeJournalDetailByIndex","updateJournalDetail","newIndex","updateJournalDetailPaymentReceive","cancel","resetFields","parseFloat","setFormInputDrCr","setFormInputAmount","parseInt","toString","created","current","queryParams","subscribe","computed","langConfig","config","lang"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport draggable from 'vuedraggable';\nimport compoLang from '../../../both/i18n/lang/elem-label-acc'\nimport {Acc_JournalReact} from \"../../collection/accJournal\";\n\n// require('cleave.js/dist/addons/cleave-phone.ac');\n// require('cleave.js/dist/addons/cleave-phone.{country}');\n\nexport default {\n    meteor: {\n        langSession() {\n            return Session.get('lang') || \"en\";\n        },\n        disabledRemove() {\n            return Session.get(\"canRemove\");\n        },\n        disabledUpdate() {\n            return Session.get(\"canUpdate\");\n        },\n        newRe() {\n            let vm = this;\n            Acc_JournalReact.find({}).fetch();\n            vm.queryData(vm.searchData, vm.skip, vm.currentSize + vm.skip);\n        }\n    },\n\n    components: {\n        draggable\n    },\n    data() {\n        return {\n            newLoading: true,\n            fullscreen: true,\n            journalData: [],\n            journalDataDisplay: [],\n            multipleSelection: [],\n            journalId: \"\",\n            loading: false,\n            searchData: '',\n            isSearching: false,\n            currentPage: 1,\n            currentSize: 10,\n            count: 0,\n            dialogAddJournal: false,\n            dialogUpdateJournal: false,\n            dialogShowJournal: false,\n            dialogPaid: false,\n\n\n            journalForm: {\n                account: \"\",\n                dr: 0,\n                cr: 0,\n                journalDate: moment().toDate(),\n                currencyId: \"KHR\",\n                voucherId: \"\",\n                name: \"\",\n                memo: \"\",\n                totalDr: 0,\n                totalCr: 0,\n                totalAmount: 0,\n                amount: 0,\n                method: \"\"\n\n            },\n            rules: {\n                journalDate: [{\n                    type: 'date',\n                    required: true,\n                    message: 'Please input Journal Date',\n                    trigger: 'blur'\n                }],\n                currencyId: [{required: true, type: 'string', message: 'Please input Currency', trigger: 'blur'}],\n                voucherId: [{required: true, type: 'string', message: 'Please input Journal No', trigger: 'blur'}],\n                memo: [{required: true, type: 'string', message: 'Please input Memo', trigger: 'blur'}],\n            },\n            rulesPayment: {\n                journalDate: [{\n                    type: 'date',\n                    required: true,\n                    message: 'Please input Journal Date',\n                    trigger: 'blur'\n                }],\n                currencyId: [{required: true, type: 'string', message: 'Please input Currency', trigger: 'blur'}],\n                method: [{required: true, type: 'string', message: 'Please input Cash Method', trigger: 'blur'}],\n                voucherId: [{required: true, type: 'string', message: 'Please input Journal No', trigger: 'blur'}],\n                memo: [{required: true, type: 'string', message: 'Please input Memo', trigger: 'blur'}],\n            },\n\n            // Options\n            chartAccountDataOption: [],\n\n            dialog: true,\n            notifications: false,\n            sound: true,\n            widgets: false,\n            labelPosition: \"top\",\n            options: {\n                disabledDate(time) {\n                    return false;\n                }\n            },\n            disabledDate: false,\n            closeDate: \"\",\n            methodOption: [],\n            type: \"\",\n            journalDetail: {},\n            skip: 0\n        }\n    },\n    mounted() {\n        this.$jQuery('body').off();\n        let vm = this;\n        vm.options = {\n            disabledDate(time) {\n                let min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n                return time.getTime() < min;\n            }\n        }\n\n\n        let elem = this.$jQuery('el-dialog.dialogJournal');\n        let checkEvent = $._data($('body').get(0), 'events');\n        if (checkEvent.keyup.length <= 1) {\n            this.$nextTick(() => {\n                this.$jQuery('body').on('keydown', elem, this.inputHandler);\n\n            })\n        }\n        this.$jQuery('body').on('focus', 'input[type=number]', function(e) {\n            $(this).on('wheel', function(e) {\n                e.preventDefault();\n            });\n        });\n    },\n    watch: {\n        currentSize(val) {\n            this.isSearching = true;\n            this.skip = (this.currentPage - 1) * val;\n            this.queryData(this.searchData, this.skip, val + this.skip);\n        },\n        currentPage(val) {\n            this.isSearching = true;\n            this.skip = (val - 1) * this.currentSize;\n            this.queryData(this.searchData, this.skip, this.currentSize + this.skip);\n        },\n        searchData(val) {\n            this.isSearching = true;\n            this.skip = (this.currentPage - 1) * this.currentSize;\n            this.queryData(val, this.skip, this.currentSize + this.skip);\n        },\n        \"journalForm.journalDate\"(val) {\n            let vm = this;\n            if (vm.dialogUpdateJournal == false) {\n                vm.journalForm.journalDate = val;\n                vm.autoIncreseVouchers(val);\n            }\n            if (vm.closeDate && vm.closeDate != \"\" && vm.closeDate != undefined) {\n                vm.options = {\n                    disabledDate(time) {\n                        let min = moment(vm.closeDate).add(1, \"days\").toDate().getTime();\n                        return time.getTime() < min;\n                    }\n                }\n            } else {\n                vm.options = {\n                    disabledDate(time) {\n                        return false;\n                    }\n                }\n            }\n        },\n        \"journalForm.currencyId\"(val) {\n            if (this.dialogUpdateJournal == false) {\n                this.journalForm.currencyId = val;\n                this.autoIncreseVouchers();\n            }\n        },\n        dialogAddJournal(val) {\n            if (val) {\n                this._inputMaskJournal();\n            }\n        },\n        dialogUpdateJournal(val) {\n            if (val) {\n                this._inputMaskJournal();\n            }\n        },\n        \"journalForm.account\"(val) {\n            if (val) {\n                this._inputMaskJournal();\n            }\n        },\n        \"journalForm.dr\"(val) {\n            if (val) {\n                this.journalForm.cr = 0;\n            }\n        },\n        \"journalForm.cr\"(val) {\n            if (val) {\n                this.journalForm.dr = 0;\n            }\n        },\n        \"journalForm.method\"(val) {\n            if (val) {\n            }\n        }\n    },\n    methods: {\n        handleSizeChange(val) {\n            this.currentSize = val;\n        },\n        handleCurrentChange(val) {\n            this.currentPage = val;\n        },\n        _inputMaskJournal() {\n            setTimeout(() => {\n                if ($(\".el-inputAmount\").length) {\n                    new this.$_Cleave('.el-inputAmount', {\n                        numeral: true,\n                        numeralThousandsGroupStyle: 'thousand'\n                    });\n                }\n\n                if ($(\".el-inputDR\").length) {\n                    new this.$_Cleave('.el-inputDR', {\n                        numeral: true,\n                        numeralThousandsGroupStyle: 'thousand'\n                    });\n                }\n\n                if ($(\".el-inputCR\").length) {\n                    new this.$_Cleave('.el-inputCR', {\n                        numeral: true,\n                        numeralThousandsGroupStyle: 'thousand'\n                    });\n                }\n\n\n            }, 200)\n        },\n        queryData: _.debounce(function (val, skip, limit) {\n            this.newLoading = true;\n            Meteor.call('queryJournal', {\n                q: val,\n                filter: this.filter,\n                rolesArea: Session.get('area'),\n                options: {skip: skip || 0, limit: limit || 10}\n            }, (err, result) => {\n                if (!err) {\n                    this.journalDataDisplay = result.content;\n                    this.count = result.countJournal;\n                }\n                this.isSearching = false;\n                this.newLoading = false;\n            });\n        }, 300),\n\n        inputHandler(e) {\n            if (e.data.init(0).selector === \"el-dialog.dialogJournal\") {\n                let vm = this;\n                if (vm.dialogAddJournal === true) {\n                    if (e.keyCode === 13 && e.ctrlKey && !e.altKey) {\n                        e.preventDefault();\n                        vm.saveJournal(true, e);\n                    } else if (e.keyCode === 13 && e.ctrlKey && e.altKey) {\n                        e.preventDefault();\n                        vm.saveJournal(false, e);\n                    }\n                } else if (vm.dialogPaid === true) {\n                    if (e.keyCode === 13 && e.ctrlKey && !e.altKey) {\n                        e.preventDefault();\n                        vm.saveJournalPaid(true, e, vm.type);\n                    } else if (e.keyCode === 13 && e.ctrlKey && e.altKey) {\n                        e.preventDefault();\n                        vm.saveJournalPaid(false, e, vm.type);\n\n                    }\n                }\n\n                if (vm.dialogAddJournal === false && vm.dialogUpdateJournal === false && vm.dialogPaid === false) {\n                    if (e.keyCode === 107 && !e.ctrlKey && !e.altKey) {\n                        e.preventDefault();\n                        vm.popupJournalAdd();\n                        vm.dialogAddJournal = true;\n                        vm.autoIncreseVouchers();\n                        vm.resetForm();\n                    }\n                }\n                if (e.keyCode === 27 && !e.ctrlKey && !e.altKey) {\n                    e.preventDefault();\n                    vm.dialogAddJournal = false;\n                }\n            }\n\n\n        },\n        chartAccountOption() {\n            let selector = {};\n            if (this.accountTypeId !== \"\" && this.accountTypeId !== undefined) {\n                selector.accountTypeId = this.accountTypeId;\n            }\n\n            Meteor.call('queryChartAccountOption', selector, (err, result) => {\n                this.chartAccountDataOption = result;\n            })\n        },\n        chartAccountMethodOption() {\n            let selector = {};\n            if (this.accountTypeId !== \"\" && this.accountTypeId !== undefined) {\n                selector.accountTypeId = this.accountTypeId;\n            }\n            Meteor.call('queryChartAccountMethodOption', selector, (err, result) => {\n                this.methodOption = result;\n            })\n        },\n        saveJournal(isCloseDialog, event) {\n            event.preventDefault();\n            let vm = this;\n            let checkSubmit = this.checkDrCr();\n            if (checkSubmit === false || vm.journalData.length === 0) {\n                vm.$notify.error({\n                    title: 'Error',\n                    message: 'Dr and Cr is not balance!'\n\n                });\n\n                return false;\n            } else {\n                this.$refs[\"journalFormAdd\"].validate((valid) => {\n                    if (valid) {\n                        let journalDoc = {\n                            journalDate: vm.journalForm.journalDate,\n                            journalDateName: moment(vm.journalForm.journalDate).format(\"DD/MM/YYYY\"),\n                            voucherId: vm.journalForm.voucherId,\n                            currencyId: vm.journalForm.currencyId,\n                            name: vm.journalForm.name,\n                            memo: vm.journalForm.memo,\n                            total: vm.$_numeral(vm.journalForm.totalDr).value(),\n                            rolesArea: Session.get('area')\n                        };\n                        journalDoc.transaction = vm.journalData;\n                        Meteor.call(\"insertJournal\", journalDoc, (err, result) => {\n                            if (!err) {\n                                vm.$message({\n                                    duration: 1000,\n                                    message: `Save Successfully!`,\n                                    type: 'success'\n                                });\n\n                                if (isCloseDialog) {\n                                    this.dialogAddJournal = false;\n                                }\n                                vm.resetForm();\n                            }\n                        })\n                    }\n                })\n            }\n\n\n        },\n        saveJournalPaid(isCloseDialog, event, type, isPrint) {\n            event.preventDefault();\n            let vm = this;\n            this.$refs[\"journalFormPayment\"].validate((valid) => {\n                if (valid) {\n                    let journalDoc = {\n                        journalDate: vm.journalForm.journalDate,\n                        journalDateName: moment(vm.journalForm.journalDate).format(\"DD/MM/YYYY\"),\n                        voucherId: vm.journalForm.voucherId,\n                        currencyId: vm.journalForm.currencyId,\n                        name: vm.journalForm.name,\n                        memo: vm.journalForm.memo,\n                        total: vm.$_numeral(vm.journalForm.totalAmount).value(),\n                        rolesArea: Session.get('area'),\n                        method: vm.journalForm.method\n                    };\n                    journalDoc.transaction = vm.journalData;\n                    if (journalDoc.transaction.length <= 0) {\n                        vm.$message({\n                            duration: 1000,\n                            message: `Add Payment Account!`,\n                            type: 'error'\n                        });\n                        return false;\n                    }\n\n                    Meteor.call(\"insertJournalPaid\", journalDoc, type, (err, result) => {\n                        if (!err) {\n                            if (isPrint === true) {\n                                FlowRouter.go('/acc-data/accPayment/print?inv=' + result);\n\n                            } else {\n                                vm.$message({\n                                    duration: 1000,\n                                    message: `Save Successfully!`,\n                                    type: 'success'\n                                });\n\n                            }\n\n                            if (isCloseDialog) {\n                                this.dialogPaid = false;\n                            }\n                            vm.resetForm();\n                        }\n                    })\n                }\n            })\n\n\n        },\n        printPaymentInvoice(journalId) {\n            FlowRouter.go('/acc-data/accPayment/print?inv=' + journalId);\n        },\n        updateJournal(id) {\n            event.preventDefault();\n            let vm = this;\n            let checkSubmit = vm.checkDrCr();\n            if (checkSubmit === false || vm.journalData.length === 0) {\n                vm.$notify.error({\n                    title: 'Error',\n                    message: 'Dr and Cr is not balance!'\n                });\n                return false;\n            } else {\n                vm.$refs[\"journalFormUpdate\"].validate((valid) => {\n                    if (valid) {\n                        let journalDoc = {\n                            journalDate: vm.journalForm.journalDate,\n                            journalDateName: moment(vm.journalForm.journalDate).format(\"DD/MM/YYYY\"),\n                            voucherId: vm.journalForm.voucherId,\n                            currencyId: vm.journalForm.currencyId,\n                            name: vm.journalForm.name,\n                            memo: vm.journalForm.memo,\n                            total: vm.$_numeral(vm.journalForm.totalDr).value(),\n                            rolesArea: Session.get('area')\n                        };\n                        journalDoc.transaction = vm.journalData;\n                        Meteor.call(\"updateJournal\", journalDoc, id, (err, result) => {\n                            if (!err) {\n                                vm.$message({\n                                    duration: 1000,\n                                    message: `Save Successfully!`,\n                                    type: 'success'\n                                });\n\n                                vm.dialogUpdateJournal = false;\n\n                                vm.resetForm();\n                            }\n                        })\n                    }\n                })\n            }\n\n        },\n        removeJournal(index, row, rows) {\n            let vm = this;\n            if (row.status == \"Normal\") {\n                Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n                    if (re == undefined || re.closeDate.getTime() < row.journalDate.getTime()) {\n                        vm.$confirm('This will permanently delete the Item. Continue?', 'Warning', {\n                            confirmButtonText: 'OK',\n                            cancelButtonText: 'Cancel',\n                            type: 'warning'\n                        }).then(() => {\n\n\n                            Meteor.call(\"removeJournal\", row._id, (err, result) => {\n                                if (!err) {\n                                    rows.splice(index, 1);\n                                    vm.$message({\n                                        message: `លុប ${row.journalDateName}​ : ${row.voucherId} បានជោគជ័យ`,\n                                        type: 'success'\n                                    });\n                                } else {\n                                    vm.$message({\n                                        type: 'error',\n                                        message: 'Delete Fialed'\n                                    });\n                                }\n\n                            })\n\n\n                        }).catch(() => {\n                            vm.$message({\n                                type: 'info',\n                                message: 'Delete canceled'\n                            });\n                        });\n                    } else {\n                        vm.$message({\n                            duration: 1000,\n                            message: \"You already Closing Entry!!\",\n                            type: 'error'\n                        });\n                    }\n                })\n            } else {\n                vm.$message({\n                    duration: 1000,\n                    message: \"Not Normal State!!\",\n                    type: 'error'\n                });\n            }\n\n\n        },\n        popupJournalAdd() {\n            let vm = this;\n            $(\".el-dialog__title\").text(\"Add Journal Entry\");\n            Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n                if (re != undefined) {\n                    vm.closeDate = re.closeDate;\n                } else {\n                    vm.closeDate = \"\";\n                }\n            })\n        },\n        popupJournalPayment() {\n            let vm = this;\n            vm.type = \"Payment\";\n            // $('#dialog').attr('title', 'New Title').dialog();\n\n            $(\".el-dialog__title\").text(\"Payment (Account)\");\n            vm.journalForm.method = \"\";\n\n            Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n                if (re != undefined) {\n                    vm.closeDate = re.closeDate;\n                } else {\n                    vm.closeDate = \"\";\n                }\n            })\n        },\n        popupJournalReceive() {\n            let vm = this;\n            vm.type = \"Receive\";\n            vm.journalForm.method = \"\";\n\n            // $('#dialog').attr('title', 'New Title').dialog();\n            $(\".el-dialog__title\").text(\"Receive (Account)\");\n\n            Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n                if (re !== undefined) {\n                    vm.closeDate = re.closeDate;\n                } else {\n                    vm.closeDate = \"\";\n                }\n            })\n        },\n        popupJournalUpdate(index, row, scope) {\n            let vm = this;\n            $(\".el-dialog__title\").text(\"Update Journal Entry\");\n            if (row.status === \"Normal\") {\n                Meteor.call(\"queryLastClosingEntry\", Session.get(\"area\"), function (err, re) {\n                    if (re === undefined || re.closeDate.getTime() < row.journalDate.getTime()) {\n                        vm.dialogUpdateJournal = true;\n                        vm.findJournalById(scope);\n                        if (re !== undefined) {\n                            vm.closeDate = re.closeDate;\n                        } else {\n                            vm.closeDate = \"\";\n                        }\n\n                    } else {\n                        vm.$message({\n                            duration: 1000,\n                            message: \"You already Closing Entry!!\",\n                            type: 'error'\n                        });\n                        vm.dialogUpdateJournal = false;\n                        vm.closeDate = \"\";\n                    }\n                })\n            } else {\n                vm.closeDate = \"\";\n                this.$message({\n                    duration: 1000,\n                    message: \"Not Normal State!!\",\n                    type: 'error'\n                });\n            }\n        },\n        popupJournalShow(row) {\n            let vm = this;\n            this.dialogShowJournal = true;\n            $(\".el-dialog__title\").text(\"Show Journal Entry\");\n            Meteor.call(\"queryJournalByIdShow\", row._id, (err, result) => {\n                if (result) {\n                    vm.journalDetail = result;\n                } else {\n                    console.log(err.message);\n                }\n            })\n        },\n        findJournalById(doc) {\n            let vm = this;\n            this.journalId = doc.row._id;\n\n            Meteor.call(\"queryJournalById\", doc.row._id, (err, result) => {\n                vm.journalData = [];\n                if (result) {\n                    result.transaction.forEach(function (obj) {\n                        Meteor.call(\"queryChartAccountById\", obj.account, (err, data) => {\n                            vm.journalData.push({\n                                account: obj.account,\n                                accountName: data.code + \" : \" + data.name,\n                                dr: obj.dr,\n                                cr: obj.cr\n                            })\n\n                            vm.getTotalDrCr();\n                        })\n                    });\n                    vm.journalForm.journalDate = result.journalDate;\n                    vm.journalForm.currencyId = result.currencyId;\n                    vm.journalForm.memo = result.memo;\n                    vm.journalForm.name = result.name;\n                    vm.journalForm.voucherId = result.voucherId.substr(8, 20);\n                }\n            })\n\n        },\n        addToJournalData() {\n            let vm = this;\n            if (vm.journalForm.account == \"\" || vm.journalForm.account == undefined) {\n                this.$message({\n                    duration: 1000,\n                    message: \"Account Can't Empty!!\",\n                    type: 'error'\n                });\n                return false;\n            }\n\n            Meteor.call(\"queryChartAccountById\", vm.journalForm.account, (err, data) => {\n                if (data) {\n                    vm.journalData.push({\n                        account: vm.journalForm.account,\n                        accountName: data.code + \" : \" + data.name,\n                        dr: vm.$_numeral(vm.journalForm.dr).value(),\n                        cr: vm.$_numeral(vm.journalForm.cr).value()\n                    })\n                    vm.journalForm.account = \"\";\n\n                    vm.$message({\n                        duration: 1000,\n                        message: `បន្ថែម ` + data.code + \" : \" + data.name + \" បានជោគជ័យ !\",\n                        type: 'success'\n                    });\n                    vm.getTotalDrCr();\n                } else {\n                    vm.$message({\n                        duration: 1000,\n                        message: \"មិនមានឈ្មេាះគណនីនេះឡើយ!!\",\n                        type: 'error'\n                    });\n                }\n            })\n\n\n        },\n        addToJournalPaymentReceiveData() {\n\n            let vm = this;\n            if (vm.journalForm.account == \"\" || vm.journalForm.account == undefined) {\n                this.$message({\n                    duration: 1000,\n                    message: \"Account Can't Empty!!\",\n                    type: 'error'\n                });\n                return false;\n            }\n            Meteor.call(\"queryChartAccountById\", vm.journalForm.account, (err, data) => {\n                if (data) {\n                    vm.journalData.push({\n                        account: vm.journalForm.account,\n                        accountName: data.code + \" : \" + data.name,\n                        amount: vm.$_numeral(vm.journalForm.amount).value(),\n                    })\n                    vm.journalForm.account = \"\";\n\n                    vm.$message({\n                        duration: 1000,\n                        message: `បន្ថែម ` + data.code + \" : \" + data.name + \" បានជោគជ័យ !\",\n                        type: 'success'\n                    });\n                    vm.getTotalAmount();\n                } else {\n                    vm.$message({\n                        duration: 1000,\n                        message: \"មិនមានឈ្មេាះគណនីនេះឡើយ!!\",\n                        type: 'error'\n                    });\n                }\n\n\n            })\n        },\n        removeJournalDetailByIndex(index, row) {\n            this.$confirm('This will permanently delete the Item. Continue?', 'Warning', {\n                confirmButtonText: 'OK',\n                cancelButtonText: 'Cancel',\n                type: 'warning'\n            }).then(() => {\n\n                this.journalData.splice(index, 1);\n                this.$message({\n                    message: `លុប ${row.accountName} បានជោគជ័យ`,\n                    type: 'success'\n                });\n                this.getTotalDrCr();\n\n            }).catch(() => {\n                this.$message({\n                    type: 'info',\n                    message: 'Delete canceled'\n                });\n            });\n        },\n        updateJournalDetail(row, index) {\n            this.journalData[index] = row;\n            let newIndex = index + 1;\n            /*this.$message({\n                duration: 1000,\n                message: `Update Row Number ` + newIndex + \" Successfully !\",\n                type: 'success'\n            });*/\n            this.getTotalDrCr();\n\n        },\n        updateJournalDetailPaymentReceive(row, index) {\n            this.journalData[index] = row;\n            let newIndex = index + 1;\n            /*this.$message({\n                duration: 1000,\n                message: `Update Row Number ` + newIndex + \" Successfully !\",\n                type: 'success'\n            });*/\n            this.getTotalAmount();\n\n        },\n        cancel() {\n            this.$message({\n                type: 'info',\n                message: 'Canceled'\n            });\n        },\n        resetForm() {\n            this.journalData = [];\n            this.journalForm.method = \"\";\n            if (this.$refs[\"journalFormAdd\"]) {\n                this.$refs[\"journalFormAdd\"].resetFields();\n                this.getTotalDrCr();\n\n            }\n            if (this.$refs[\"journalFormUpdate\"]) {\n                this.$refs[\"journalFormUpdate\"].resetFields();\n                this.getTotalDrCr();\n            }\n            if (this.$refs[\"journalFormPayment\"]) {\n                this.$refs[\"journalFormPayment\"].resetFields();\n                this.getTotalAmount();\n            }\n            this.journalForm.name = \"\";\n            this.autoIncreseVouchers();\n        },\n        getTotalDrCr() {\n            let vm = this;\n            let totalDr = 0;\n            let totalCr = 0;\n            vm.journalData.forEach(function (obj) {\n                totalDr += parseFloat(obj.dr);\n                totalCr += parseFloat(obj.cr);\n            });\n            vm.journalForm.totalDr = this.$_numeral(totalDr).format(\"0,00.000\");\n            vm.journalForm.totalCr = this.$_numeral(totalCr).format(\"0,00.000\");\n            vm.setFormInputDrCr();\n        },\n        getTotalAmount() {\n            let vm = this;\n            let totalAmount = 0;\n\n            vm.journalData.forEach(function (obj) {\n                totalAmount += parseFloat(obj.amount);\n            });\n\n            vm.journalForm.totalAmount = this.$_numeral(totalAmount).format(\"0,00.000\");\n            vm.setFormInputAmount();\n        },\n        setFormInputDrCr() {\n            this.journalForm.dr = parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()) > 0 ? 0 : -(parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()));\n            this.journalForm.cr = parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value()) > 0 ? (parseFloat(this.$_numeral(this.journalForm.totalDr).value()) - parseFloat(this.$_numeral(this.journalForm.totalCr).value())) : 0;\n            this._inputMaskJournal();\n        },\n        setFormInputAmount() {\n            let vm = this;\n            vm.journalForm.amount = 0;\n            vm._inputMaskJournal();\n        },\n        checkDrCr() {\n            let vm = this;\n            if (vm.$_numeral(vm.journalForm.totalDr).value() === vm.$_numeral(vm.journalForm.totalCr).value()) {\n                return true;\n            }\n            return false;\n        },\n        autoIncreseVouchers(val) {\n            let vm = this;\n            if (val) {\n                vm.journalForm.journalDate = val;\n            }\n            Meteor.call(\"autoIncreseVoucher\", Session.get('area'), vm.journalForm.journalDate, vm.journalForm.currencyId, (err, result) => {\n                if (!err) {\n                    vm.journalForm.voucherId = (parseInt(result) + 1).toString();\n                }\n            })\n        }\n    },\n    created() {\n        this.isSearching = true;\n        this.chartAccountOption();\n        this.chartAccountMethodOption();\n\n\n        let q = FlowRouter.current().queryParams;\n        if (q && q._id) {\n            this.searchData = q._id;\n            this.queryData(q._id, this.skip, this.currentSize + this.skip);\n        } else {\n            this.queryData();\n        }\n\n\n        Meteor.subscribe('Acc_JournalReact');\n\n    },\n    computed: {\n        langConfig() {\n            let data = compoLang.filter(config => config.lang === this.langSession)[0]['journal'];\n            return data;\n        }\n    }\n}\n\n\n"]},"sourceType":"script","hash":"852dc44a4d783d682eb65cee3cf14ddb79ab6bee"}
