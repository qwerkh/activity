{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/snr/Desktop/Project/activity/imports/vue/ui/posStockAdjustment.vue","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","dynamicImport",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"/home/snr/Desktop/Project/activity/imports/vue/ui/posStockAdjustment.vue","filename":"/home/snr/Desktop/Project/activity/imports/vue/ui/posStockAdjustment.vue","passPerPreset":false,"envName":"development","cwd":"/home/snr/Desktop/Project/activity","root":"/home/snr/Desktop/Project/activity","plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"transform-modules-commonjs","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"syntax-flow","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-flow-strip-types","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/snr/Desktop/Project/activity/imports/vue/ui/posStockAdjustment.vue","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"/home/snr/Desktop/Project/activity/imports/vue/ui/posStockAdjustment.vue"}},"code":"var compoLang;\nmodule.link(\"../../../both/i18n/lang/elem-label\", {\n  \"default\": function (v) {\n    compoLang = v;\n  }\n}, 0);\nvar Pos_StockAdjustmentReact;\nmodule.link(\"../../collection/posStockAdjustment\", {\n  Pos_StockAdjustmentReact: function (v) {\n    Pos_StockAdjustmentReact = v;\n  }\n}, 1);\nvar Manage_Module;\nmodule.link(\"../../collection/manageModule\", {\n  Manage_Module: function (v) {\n    Manage_Module = v;\n  }\n}, 2);\nvar formatNumber;\nmodule.link(\"../../api/methods/roundCurrency\", {\n  formatNumber: function (v) {\n    formatNumber = v;\n  }\n}, 3);\nmodule.exportDefault({\n  meteor: {\n    langSession: function () {\n      return Session.get('lang') || \"en\";\n    },\n    disabledRemove: function () {\n      return Session.get(\"canRemove\");\n    },\n    disabledUpdate: function () {\n      return Session.get(\"canUpdate\");\n    },\n    newRe: function () {\n      var vm = this;\n      Pos_StockAdjustmentReact.find({}).fetch();\n      vm.queryData(vm.searchData, vm.skip, vm.currentSize + vm.skip);\n    },\n    isCoffee: function () {\n      var ma = Manage_Module.findOne();\n\n      if (ma && ma.feature) {\n        return ma.feature.indexOf(\"Coffee\") > -1 ? true : false;\n      }\n\n      return false;\n    }\n  },\n  mounted: function () {\n    this.$jQuery('body').off();\n    this.$jQuery('body').on('focus', 'input[type=number]', function (e) {\n      $(this).on('wheel', function (e) {\n        e.preventDefault();\n      });\n    });\n  },\n  data: function () {\n    return {\n      newLoading: true,\n      dialogImageUrl: \"\",\n      dialogVisible: false,\n      posStockAdjustmentData: [],\n      loading: false,\n      searchData: '',\n      isSearching: false,\n      currentPage: 1,\n      currentSize: 10,\n      count: 0,\n      dialogAddPosStockAdjustment: false,\n      isDisabledTrue: true,\n      isDisabledProduct: true,\n      adjustment: [{\n        productId: \"\",\n        qty: 0,\n        cost: 0,\n        qtyChange: 0,\n        costChange: 0,\n        qtyAfter: 0,\n        costAfter: 0\n      }],\n      posStockAdjustmentForm: {\n        locationId: \"\",\n        reason: \"\",\n        adjustmentDate: moment().toDate(),\n        description: \"\",\n        adjustment: [],\n        _id: \"\"\n      },\n      rules: {\n        locationId: [{\n          required: true,\n          type: 'string',\n          message: 'Please input Location',\n          trigger: 'change'\n        }],\n        reason: [{\n          required: true,\n          type: 'string',\n          message: 'Please input reason',\n          trigger: 'change'\n        }],\n        adjustmentDate: [{\n          type: 'date',\n          required: true,\n          message: 'Please input Date',\n          trigger: 'blur'\n        }]\n      },\n      // Options\n      subStockAdjustmentDataOption: [],\n      skip: 0,\n      productOption: [],\n      locationOption: [],\n      reasonOption: [{\n        label: \"Increase\",\n        value: \"Increase\"\n      }, {\n        label: \"Loss\",\n        value: \"Loss\"\n      }, {\n        label: \"Damage\",\n        value: \"Damage\"\n      }, {\n        label: \"Taste\",\n        value: \"Taste\"\n      }, {\n        label: \"Gift\",\n        value: \"Gift\"\n      }]\n    };\n  },\n  watch: {\n    currentSize: function (val) {\n      this.isSearching = true;\n      this.skip = (this.currentPage - 1) * val;\n      this.queryData(this.searchData, this.skip, val + this.skip);\n    },\n    currentPage: function (val) {\n      this.isSearching = true;\n      this.skip = (val - 1) * this.currentSize;\n      this.queryData(this.searchData, this.skip, this.currentSize + this.skip);\n    },\n    searchData: function (val) {\n      this.isSearching = true;\n      this.skip = (this.currentPage - 1) * this.currentSize;\n      this.queryData(val, this.skip, this.currentSize + this.skip);\n    },\n    \"posStockAdjustmentForm.locationId\": function (val) {\n      if (val && val != \"\") {\n        this.isDisabledProduct = false;\n      } else {\n        this.isDisabledProduct = true;\n      }\n\n      this.adjustment = [{\n        productId: \"\",\n        qty: 0,\n        cost: 0,\n        qtyChange: 0,\n        costChange: 0,\n        qtyAfter: 0,\n        costAfter: 0\n      }];\n    }\n  },\n  methods: {\n    handleSizeChange: function (val) {\n      this.currentSize = val;\n    },\n    handleCurrentChange: function (val) {\n      this.currentPage = val;\n    },\n    indexMethod: function (index) {\n      return index + 1;\n    },\n    queryData: _.debounce(function (val, skip, limit) {\n      var _this = this;\n\n      this.newLoading = true;\n      Meteor.call('queryPosStockAdjustment', {\n        q: val,\n        filter: this.filter,\n        options: {\n          skip: skip || 0,\n          limit: limit || 10\n        }\n      }, function (err, result) {\n        if (!err) {\n          _this.posStockAdjustmentData = result.content;\n          _this.count = result.countPosStockAdjustment;\n        }\n\n        _this.isSearching = false;\n        _this.newLoading = false;\n      });\n    }, 300),\n    productOpt: function (query) {\n      var _this2 = this;\n\n      if (!!query) {\n        setTimeout(function () {\n          Meteor.call('queryItemOption', query, function (err, result) {\n            if (!err) {\n              _this2.productOption = result;\n            } else {\n              console.log(err.message);\n            }\n          });\n        }, 200);\n      } else {\n        Meteor.call('queryItemOption', \"\", function (err, result) {\n          if (!err) {\n            _this2.productOption = result;\n          } else {\n            console.log(err.message);\n          }\n        });\n      }\n    },\n    locationOpt: function () {\n      var _this3 = this;\n\n      var selector = {};\n      Meteor.call('queryLocationOption', selector, function (err, result) {\n        _this3.locationOption = result;\n      });\n    },\n    savePosStockAdjustment: function (event) {\n      event.preventDefault();\n      var vm = this;\n      this.$refs[\"posStockAdjustmentFormAdd\"].validate(function (valid) {\n        if (valid) {\n          var adjustmentDoc = {\n            locationId: vm.posStockAdjustmentForm.locationId,\n            reason: vm.posStockAdjustmentForm.reason,\n            adjustmentDate: vm.posStockAdjustmentForm.adjustmentDate,\n            description: vm.posStockAdjustmentForm.description,\n            rolesArea: Session.get('area')\n          };\n          adjustmentDoc.adjustment = vm.adjustment;\n          Meteor.call(\"insertPosStockAdjustment\", adjustmentDoc, function (err, result) {\n            if (!err) {\n              vm.$message({\n                duration: 1000,\n                message: \"Save Successfully!\",\n                type: 'success'\n              });\n              vm.dialogAddPosStockAdjustment = false;\n              vm.resetForm();\n            }\n          });\n        }\n      });\n    },\n    removePosStockAdjustment: function (index, row, rows) {\n      var _this4 = this;\n\n      var vm = this;\n      this.$confirm('This will permanently delete the Item. Continue?', 'Warning', {\n        confirmButtonText: 'OK',\n        cancelButtonText: 'Cancel',\n        type: 'warning'\n      }).then(function () {\n        Meteor.call(\"removePosStockAdjustment\", row._id, function (err, result) {\n          if (result === true || result === 1) {\n            rows.splice(index, 1);\n            vm.$message({\n              message: \"\\n                    \\u179B\\u17BB\\u1794 \" + row._id + \" : \" + (row.memo || \"\") + \" \\u1794\\u17B6\\u1793\\u1787\\u17C4\\u1782\\u1787\\u17D0\\u1799\",\n              type: 'success'\n            });\n          } else {\n            vm.$message({\n              type: 'error',\n              message: 'មានប្រតិបត្តិការថ្មីកើតឡើង ,មិនអាចលុបបានទេ!!'\n            });\n          }\n        });\n      }).catch(function () {\n        _this4.$message({\n          type: 'info',\n          message: 'Delete canceled'\n        });\n      });\n    },\n    findPosStockAdjustmentById: function (doc) {\n      var vm = this;\n      vm.posStockAdjustmentForm = {};\n      Meteor.call(\"queryPosStockAdjustmentById\", doc.row._id, function (err, result) {\n        if (result) {\n          vm.posStockAdjustmentForm._id = result._id;\n          vm.posStockAdjustmentForm = result;\n          vm.adjustment = result.adjustment;\n        }\n      });\n    },\n    cancel: function () {\n      this.$message({\n        type: 'info',\n        message: 'Canceled'\n      });\n    },\n    resetForm: function () {\n      this.adjustment = [{\n        productId: \"\",\n        qty: 0,\n        cost: 0,\n        qtyChange: 0,\n        costChange: 0,\n        qtyAfter: 0,\n        costAfter: 0\n      }];\n      this.locationId = \"\";\n      this.reason = \"\";\n      this.adjustmentDate = moment().toDate();\n      this.description = \"\";\n      this.posStockAdjustmentForm._id = \"\";\n\n      if (this.$refs[\"posStockAdjustmentFormAdd\"]) {\n        this.$refs[\"posStockAdjustmentFormAdd\"].resetFields();\n      }\n\n      if (this.$refs[\"posStockAdjustmentFormUpdate\"]) {\n        this.$refs[\"posStockAdjustmentFormUpdate\"].resetFields();\n      }\n    },\n    handleAddAdjustment: function () {\n      this.adjustment.push({\n        productId: \"\",\n        qty: 0,\n        qtyChange: 0,\n        qtyAfter: 0,\n        cost: 0,\n        costChange: 0,\n        costAfter: 0\n      });\n    },\n    handleEditAdjustmentQtyChange: function (index, row) {\n      row.qtyAfter = this.$_numeral(row.qty).value() + this.$_numeral(row.qtyChange).value();\n      this.adjustment[index] = row;\n    },\n    handleEditAdjustmentCostChange: function (index, row) {\n      row.costAfter = this.$_numeral(formatNumber(row.cost)).value() + this.$_numeral(row.costChange).value();\n      this.adjustment[index] = row;\n    },\n    handleEditAdjustmentQtyAfter: function (index, row) {\n      row.qtyChange = this.$_numeral(formatNumber(this.$_numeral(row.qtyAfter).value() - this.$_numeral(row.qty).value())).value();\n      this.adjustment[index] = row;\n    },\n    handleEditAdjustmentCostAfter: function (index, row) {\n      row.costChange = this.$_numeral(formatNumber(this.$_numeral(row.costAfter).value() - this.$_numeral(formatNumber(row.cost)).value())).value();\n      this.adjustment[index] = row;\n    },\n    handleEditAdjustmentProductId: function (index, row) {\n      var _this5 = this;\n\n      Meteor.call(\"queryPosAverageCostByIdAdjustment\", row.productId, Session.get(\"area\"), this.posStockAdjustmentForm.locationId, function (err, dataStock) {\n        row.qty = _this5.$_numeral(dataStock.qtyEnding || 0).value();\n        row.qtyAfter = _this5.$_numeral(dataStock.qtyEnding || 0).value();\n        row.cost = _this5.$_numeral(formatNumber(dataStock.averageCost) || 0).value();\n        row.costAfter = _this5.$_numeral(formatNumber(dataStock.averageCost) || 0).value();\n        _this5.adjustment[index] = row;\n      });\n    },\n    removeAdjustmentData: function (index, row) {\n      if (this.adjustment.length > 1) {\n        this.adjustment.splice(index, 1);\n        this.$message({\n          message: \"\\u179B\\u17BB\\u1794 \" + row.productId + \" \\u1794\\u17B6\\u1793\\u1787\\u17C4\\u1782\\u1787\\u17D0\\u1799\",\n          type: 'success'\n        });\n      } else {\n        this.adjustment = [{\n          productId: \"\",\n          qty: 0,\n          qtyChange: 0,\n          qtyAfter: 0,\n          cost: 0,\n          costChange: 0,\n          costAfter: 0\n        }];\n      }\n    }\n  },\n  created: function () {\n    this.isSearching = true;\n    this.queryData();\n    this.productOpt();\n    this.locationOpt();\n    Meteor.subscribe('Pos_StockAdjustmentReact');\n  },\n  computed: {\n    langConfig: function () {\n      var _this6 = this;\n\n      var data = compoLang.filter(function (config) {\n        return config.lang === _this6.langSession;\n      })[0]['stockAdjustment'];\n      return data;\n    }\n  }\n});","map":{"version":3,"sources":["/home/snr/Desktop/Project/activity/imports/vue/ui/posStockAdjustment.vue"],"names":["compoLang","module","link","v","Pos_StockAdjustmentReact","Manage_Module","formatNumber","exportDefault","meteor","langSession","Session","get","disabledRemove","disabledUpdate","newRe","vm","find","fetch","queryData","searchData","skip","currentSize","isCoffee","ma","findOne","feature","indexOf","mounted","$jQuery","off","on","e","$","preventDefault","data","newLoading","dialogImageUrl","dialogVisible","posStockAdjustmentData","loading","isSearching","currentPage","count","dialogAddPosStockAdjustment","isDisabledTrue","isDisabledProduct","adjustment","productId","qty","cost","qtyChange","costChange","qtyAfter","costAfter","posStockAdjustmentForm","locationId","reason","adjustmentDate","moment","toDate","description","_id","rules","required","type","message","trigger","subStockAdjustmentDataOption","productOption","locationOption","reasonOption","label","value","watch","val","methods","handleSizeChange","handleCurrentChange","indexMethod","index","_","debounce","limit","Meteor","call","q","filter","options","err","result","content","countPosStockAdjustment","productOpt","query","setTimeout","console","log","locationOpt","selector","savePosStockAdjustment","event","$refs","validate","valid","adjustmentDoc","rolesArea","$message","duration","resetForm","removePosStockAdjustment","row","rows","$confirm","confirmButtonText","cancelButtonText","then","splice","memo","catch","findPosStockAdjustmentById","doc","cancel","resetFields","handleAddAdjustment","push","handleEditAdjustmentQtyChange","$_numeral","handleEditAdjustmentCostChange","handleEditAdjustmentQtyAfter","handleEditAdjustmentCostAfter","handleEditAdjustmentProductId","dataStock","qtyEnding","averageCost","removeAdjustmentData","length","created","subscribe","computed","langConfig","config","lang"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport compoLang from '../../../both/i18n/lang/elem-label'\nimport {Pos_StockAdjustmentReact} from \"../../collection/posStockAdjustment\";\nimport {Manage_Module} from \"../../collection/manageModule\";\nimport {formatNumber} from \"../../api/methods/roundCurrency\";\n\n\nexport default {\n    meteor: {\n        langSession() {\n            return Session.get('lang') || \"en\";\n        },\n        disabledRemove() {\n            return Session.get(\"canRemove\");\n        },\n        disabledUpdate() {\n            return Session.get(\"canUpdate\");\n        },\n        newRe() {\n            let vm = this;\n            Pos_StockAdjustmentReact.find({}).fetch();\n            vm.queryData(vm.searchData, vm.skip, vm.currentSize + vm.skip);\n        },\n        isCoffee() {\n            let ma = Manage_Module.findOne();\n            if (ma && ma.feature) {\n                return (ma.feature.indexOf(\"Coffee\") > -1 ? true : false);\n            }\n\n            return false;\n        }\n\n    },\n    mounted() {\n        this.$jQuery('body').off();\n        this.$jQuery('body').on('focus', 'input[type=number]', function (e) {\n            $(this).on('wheel', function (e) {\n                e.preventDefault();\n            });\n        });\n    },\n    data() {\n        return {\n            newLoading: true,\n            dialogImageUrl: \"\",\n            dialogVisible: false,\n            posStockAdjustmentData: [],\n            loading: false,\n            searchData: '',\n            isSearching: false,\n            currentPage: 1,\n            currentSize: 10,\n            count: 0,\n            dialogAddPosStockAdjustment: false,\n            isDisabledTrue: true,\n            isDisabledProduct: true,\n            adjustment: [\n                {productId: \"\", qty: 0, cost: 0, qtyChange: 0, costChange: 0, qtyAfter: 0, costAfter: 0}\n            ],\n            posStockAdjustmentForm: {\n                locationId: \"\",\n                reason: \"\",\n                adjustmentDate: moment().toDate(),\n                description: \"\",\n                adjustment: [],\n                _id: \"\"\n            },\n            rules: {\n                locationId: [{\n                    required: true, type: 'string',\n                    message: 'Please input Location', trigger: 'change'\n                }],\n                reason: [{\n                    required: true, type: 'string',\n                    message: 'Please input reason', trigger: 'change'\n                }],\n                adjustmentDate: [{\n                    type: 'date',\n                    required: true,\n                    message: 'Please input Date',\n                    trigger: 'blur'\n                }],\n\n            },\n            // Options\n            subStockAdjustmentDataOption: [],\n            skip: 0,\n            productOption: [],\n            locationOption: [],\n            reasonOption: [\n                {label: \"Increase\", value: \"Increase\"},\n                {label: \"Loss\", value: \"Loss\"},\n                {label: \"Damage\", value: \"Damage\"},\n                {label: \"Taste\", value: \"Taste\"},\n                {label: \"Gift\", value: \"Gift\"},\n            ]\n        }\n    },\n    watch: {\n        currentSize(val) {\n            this.isSearching = true;\n            this.skip = (this.currentPage - 1) * val;\n            this.queryData(this.searchData, this.skip, val + this.skip);\n        },\n        currentPage(val) {\n            this.isSearching = true;\n            this.skip = (val - 1) * this.currentSize;\n            this.queryData(this.searchData, this.skip, this.currentSize + this.skip);\n        },\n        searchData(val) {\n            this.isSearching = true;\n            this.skip = (this.currentPage - 1) * this.currentSize;\n            this.queryData(val, this.skip, this.currentSize + this.skip);\n        },\n        \"posStockAdjustmentForm.locationId\"(val) {\n            if (val && val != \"\") {\n                this.isDisabledProduct = false;\n            } else {\n                this.isDisabledProduct = true;\n            }\n            this.adjustment = [{\n                productId: \"\",\n                qty: 0,\n                cost: 0,\n                qtyChange: 0,\n                costChange: 0,\n                qtyAfter: 0,\n                costAfter: 0\n            }];\n        }\n    },\n    methods: {\n        handleSizeChange(val) {\n            this.currentSize = val;\n        },\n        handleCurrentChange(val) {\n            this.currentPage = val;\n        },\n        indexMethod(index) {\n            return index + 1;\n        },\n        queryData: _.debounce(function (val, skip, limit) {\n            this.newLoading = true;\n            Meteor.call('queryPosStockAdjustment', {\n                q: val,\n                filter: this.filter,\n                options: {skip: skip || 0, limit: limit || 10}\n            }, (err, result) => {\n                if (!err) {\n                    this.posStockAdjustmentData = result.content;\n                    this.count = result.countPosStockAdjustment;\n                }\n                this.isSearching = false;\n                this.newLoading = false;\n            });\n        }, 300),\n\n        productOpt(query) {\n            if (!!query) {\n                setTimeout(() => {\n                    Meteor.call('queryItemOption', query, (err, result) => {\n                        if (!err) {\n                            this.productOption = result;\n                        } else {\n                            console.log(err.message);\n                        }\n                    })\n                }, 200);\n            } else {\n                Meteor.call('queryItemOption', \"\", (err, result) => {\n                    if (!err) {\n                        this.productOption = result;\n                    } else {\n                        console.log(err.message);\n                    }\n                })\n            }\n        },\n        locationOpt() {\n            let selector = {};\n            Meteor.call('queryLocationOption', selector, (err, result) => {\n                this.locationOption = result;\n            })\n        },\n        savePosStockAdjustment(event) {\n            event.preventDefault();\n\n            let vm = this;\n            this.$refs[\"posStockAdjustmentFormAdd\"].validate((valid) => {\n                    if (valid) {\n                        let adjustmentDoc = {\n                            locationId: vm.posStockAdjustmentForm.locationId,\n                            reason: vm.posStockAdjustmentForm.reason,\n                            adjustmentDate: vm.posStockAdjustmentForm.adjustmentDate,\n                            description: vm.posStockAdjustmentForm.description,\n                            rolesArea: Session.get('area'),\n                        };\n                        adjustmentDoc.adjustment = vm.adjustment;\n                        Meteor.call(\"insertPosStockAdjustment\", adjustmentDoc, (err, result) => {\n                            if (!err) {\n                                vm.$message({\n                                    duration: 1000,\n                                    message: `Save Successfully!`,\n                                    type: 'success'\n                                });\n\n                                vm.dialogAddPosStockAdjustment = false;\n                                vm.resetForm();\n                            }\n                        })\n\n                    }\n\n                }\n            )\n\n        },\n        removePosStockAdjustment(index, row, rows) {\n            let vm = this;\n            this.$confirm('This will permanently delete the Item. Continue?', 'Warning', {\n                confirmButtonText: 'OK',\n                cancelButtonText: 'Cancel',\n                type: 'warning'\n            }).then(() => {\n                Meteor.call(\"removePosStockAdjustment\", row._id, (err, result) => {\n                    if (result === true || result === 1) {\n                        rows.splice(index, 1);\n\n                        vm.$message({\n                            message: `\n                    លុប ${row._id} : ${row.memo || \"\"} បានជោគជ័យ`,\n                            type: 'success'\n                        });\n\n                    } else {\n                        vm.$message({\n                            type: 'error',\n                            message: 'មានប្រតិបត្តិការថ្មីកើតឡើង ,មិនអាចលុបបានទេ!!'\n                        });\n                    }\n\n                })\n\n            }).catch(() => {\n                this.$message({\n                    type: 'info',\n                    message: 'Delete canceled'\n                });\n            });\n\n\n        },\n        findPosStockAdjustmentById(doc) {\n            let vm = this;\n            vm.posStockAdjustmentForm = {};\n\n            Meteor.call(\"queryPosStockAdjustmentById\", doc.row._id, (err, result) => {\n                if (result) {\n                    vm.posStockAdjustmentForm._id = result._id;\n                    vm.posStockAdjustmentForm = result;\n                    vm.adjustment = result.adjustment;\n                }\n            })\n        },\n        cancel() {\n            this.$message({\n                type: 'info',\n                message: 'Canceled'\n            });\n        },\n        resetForm() {\n            this.adjustment = [\n                {productId: \"\", qty: 0, cost: 0, qtyChange: 0, costChange: 0, qtyAfter: 0, costAfter: 0}\n            ];\n            this.locationId = \"\";\n            this.reason = \"\";\n            this.adjustmentDate = moment().toDate();\n            this.description = \"\";\n            this.posStockAdjustmentForm._id = \"\";\n            if (this.$refs[\"posStockAdjustmentFormAdd\"]) {\n                this.$refs[\"posStockAdjustmentFormAdd\"].resetFields();\n            }\n\n            if (this.$refs[\"posStockAdjustmentFormUpdate\"]) {\n                this.$refs[\"posStockAdjustmentFormUpdate\"].resetFields();\n            }\n\n        },\n        handleAddAdjustment() {\n            this.adjustment.push({\n                productId: \"\",\n                qty: 0,\n                qtyChange: 0,\n                qtyAfter: 0,\n                cost: 0,\n                costChange: 0,\n                costAfter: 0\n            })\n        },\n        handleEditAdjustmentQtyChange(index, row) {\n            row.qtyAfter = this.$_numeral(row.qty).value() + this.$_numeral(row.qtyChange).value();\n            this.adjustment[index] = row;\n        },\n        handleEditAdjustmentCostChange(index, row) {\n            row.costAfter = this.$_numeral(formatNumber(row.cost)).value() + this.$_numeral(row.costChange).value();\n            this.adjustment[index] = row;\n        },\n        handleEditAdjustmentQtyAfter(index, row) {\n            row.qtyChange = this.$_numeral(formatNumber(this.$_numeral(row.qtyAfter).value() - this.$_numeral(row.qty).value())).value();\n            this.adjustment[index] = row;\n        },\n        handleEditAdjustmentCostAfter(index, row) {\n            row.costChange = this.$_numeral(formatNumber(this.$_numeral(row.costAfter).value() - this.$_numeral(formatNumber(row.cost)).value())).value();\n            this.adjustment[index] = row;\n\n        },\n        handleEditAdjustmentProductId(index, row) {\n            Meteor.call(\"queryPosAverageCostByIdAdjustment\", row.productId, Session.get(\"area\"), this.posStockAdjustmentForm.locationId, (err, dataStock) => {\n                row.qty = this.$_numeral(dataStock.qtyEnding || 0).value();\n                row.qtyAfter = this.$_numeral(dataStock.qtyEnding || 0).value();\n                row.cost = this.$_numeral(formatNumber(dataStock.averageCost) || 0).value();\n                row.costAfter = this.$_numeral(formatNumber(dataStock.averageCost) || 0).value();\n                this.adjustment[index] = row;\n            })\n        },\n        removeAdjustmentData(index, row) {\n            if (this.adjustment.length > 1) {\n                this.adjustment.splice(index, 1);\n                this.$message({\n                    message: `លុប ${row.productId} បានជោគជ័យ`,\n                    type: 'success'\n                });\n            } else {\n                this.adjustment = [{\n                    productId: \"\",\n                    qty: 0,\n                    qtyChange: 0,\n                    qtyAfter: 0,\n                    cost: 0,\n                    costChange: 0,\n                    costAfter: 0\n                }];\n            }\n        }\n    },\n    created() {\n        this.isSearching = true;\n        this.queryData();\n        this.productOpt();\n        this.locationOpt();\n        Meteor.subscribe('Pos_StockAdjustmentReact');\n\n    },\n    computed: {\n        langConfig() {\n            let data = compoLang.filter(config => config.lang === this.langSession)[0]['stockAdjustment'];\n            return data;\n        }\n    }\n}\n"]},"sourceType":"script","hash":"58c2c3eb527a79c9466a5f61b4b3454c75c8531a"}
